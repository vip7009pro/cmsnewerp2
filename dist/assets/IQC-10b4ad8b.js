import{r as n,k as je,ai as C,am as me,j as e,ap as Ce,ar as De,as as Se,at as Ae,au as Oe,av as be,aw as x,I as A,ak as Ne,al as ge,ax as we,ay as Ie,az as pe,aA as Me,aB as Le,aE as a,aC as Fe,aD as v,S as c,aF as Pe,ad as T,an as He,ao as Qe}from"./index-4ab6dde0.js";import ze from"./KHOLIEU-ed4cd0a2.js";import qe from"./DTC-35aeaf23.js";import{G as ye}from"./index.esm-1097fa6b.js";import{D as Xe,G as $e,b as Je}from"./DataGrid-b5e0acb2.js";import"./Typography-b6d023f3.js";import"./TextField-db9fe3d0.js";import"./MenuItem-8199bc03.js";const Ze=()=>{const[i,f]=n.useState([]),N=je(o=>o.totalSlice.userData),[_,g]=n.useState(C().format("YYYY-MM-DD")),[F,y]=n.useState(C().format("YYYY-MM-DD"));n.useState("");const[I,X]=n.useState(!0),[p,O]=n.useState(""),[b,Y]=n.useState([]),[M,D]=n.useState(""),[r,H]=n.useState(""),[S,ne]=n.useState(""),[R,Q]=n.useState("ALL"),U=async o=>{if(i.length>0){c.fire({title:"SET/REST PASS",text:"Đang SET/RESET PASS liệu",icon:"info",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK",showConfirmButton:!1});let j="";for(let E=0;E<i.length;E++)await T("updateQCPASS_HOLDING",{M_LOT_NO:i[E].M_LOT_NO,ID:i[E].ID,VALUE:o}).then(w=>{w.data.tk_status!=="NG"||(j+=` Lỗi: ${w.data.message}`)}).catch(w=>{console.log(w)});j===""?c.fire("Thông báo","SET thành công","success"):c.fire("Thông báo","Lỗi: "+j,"error")}else c.fire("Thông báo","Chọn ít nhất 1 dòng để thực hiện","error")},$=async()=>{if(console.log(i),i.length>0){c.fire({title:"Update hiện tượng lỗi",text:"Đang update thông tin lỗi",icon:"info",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK",showConfirmButton:!1});let o="";for(let j=0;j<i.length;j++)await T("updateMaterialHoldingReason",{HOLD_ID:i[j].HOLD_ID,REASON:i[j].REASON}).then(E=>{E.data.tk_status!=="NG"||(o+=` Lỗi: ${E.data.message}`)}).catch(E=>{console.log(E)});o===""?c.fire("Thông báo","Update thành công","success"):c.fire("Thông báo","Lỗi: "+o,"error")}else c.fire("Thông báo","Chọn ít nhất 1 dòng để thực hiện","error")},L=me.useMemo(()=>e.jsx("div",{className:"datatb",children:e.jsxs(Ce,{style:{fontSize:"0.7rem"},autoNavigateToFocusedRow:!0,allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!1,cellHintEnabled:!0,columnResizingMode:"widget",showColumnLines:!0,dataSource:b,columnWidth:"auto",keyExpr:"id",height:"70vh",showBorders:!0,onSelectionChanged:o=>{console.log(o.selectedRowsData),f(o.selectedRowsData)},onRowClick:o=>{},children:[e.jsx(De,{useNative:!0,scrollByContent:!0,scrollByThumb:!0,showScrollbar:"onHover",mode:"virtual"}),e.jsx(Se,{mode:"multiple",selectAllMode:"allPages"}),e.jsx(Ae,{allowUpdating:!0,allowAdding:!1,allowDeleting:!1,mode:"cell",confirmDelete:!0,onChangesChange:o=>{}}),e.jsx(Oe,{enabled:!0}),e.jsxs(be,{disabled:!1,children:[e.jsx(x,{location:"before",children:e.jsxs(A,{className:"buttonIcon",onClick:()=>{Ne(b,"SPEC DTC")},children:[e.jsx(ge,{color:"green",size:25}),"SAVE"]})}),e.jsx(x,{name:"searchPanel"}),e.jsx(x,{name:"exportButton"}),e.jsx(x,{name:"columnChooser"})]}),e.jsx(we,{visible:!0}),e.jsx(Ie,{visible:!0}),e.jsx(pe,{enabled:!0}),e.jsx(Me,{defaultPageSize:15}),e.jsx(Le,{showPageSizeSelector:!0,allowedPageSizes:[5,10,15,20,100,1e3,1e4,"all"],showNavigationButtons:!0,showInfo:!0,infoText:"Page #{0}. Total: {1} ({2} items)",displayMode:"compact"}),e.jsx(a,{dataField:"HOLD_ID",caption:"HOLD_ID",width:100,allowEditing:!1}),e.jsx(a,{dataField:"ID",caption:"ID",width:100,allowEditing:!1}),e.jsx(a,{dataField:"HOLDING_MONTH",caption:"HOLDING_MONTH",width:100,allowEditing:!1}),e.jsx(a,{dataField:"FACTORY",caption:"FACTORY",width:100,allowEditing:!1}),e.jsx(a,{dataField:"WAHS_CD",caption:"WAHS_CD",width:100,allowEditing:!1}),e.jsx(a,{dataField:"LOC_CD",caption:"LOC_CD",width:100,allowEditing:!1}),e.jsx(a,{dataField:"M_LOT_NO",caption:"M_LOT_NO",width:100,allowEditing:!1}),e.jsx(a,{dataField:"M_CODE",caption:"M_CODE",width:100,allowEditing:!1}),e.jsx(a,{dataField:"M_NAME",caption:"M_NAME",width:150,allowEditing:!1}),e.jsx(a,{dataField:"WIDTH_CD",caption:"WIDTH_CD",width:100,allowEditing:!1}),e.jsx(a,{dataField:"HOLDING_ROLL_QTY",caption:"HOLDING_ROLL_QTY",width:100,allowEditing:!1}),e.jsx(a,{dataField:"HOLDING_QTY",caption:"HOLDING_QTY",width:100,allowEditing:!1}),e.jsx(a,{dataField:"HOLDING_TOTAL_QTY",caption:"HOLDING_TOTAL_QTY",width:100,allowEditing:!1}),e.jsx(a,{dataField:"REASON",caption:"REASON",width:150,allowEditing:!0}),e.jsx(a,{dataField:"HOLDING_IN_DATE",caption:"HOLDING_IN_DATE",width:100,allowEditing:!1}),e.jsx(a,{dataField:"HOLDING_OUT_DATE",caption:"HOLDING_OUT_DATE",width:100,allowEditing:!1}),e.jsx(a,{dataField:"VENDOR_LOT",caption:"VENDOR_LOT",width:100,allowEditing:!1}),e.jsx(a,{dataField:"USE_YN",caption:"USE_YN",width:100,allowEditing:!1}),e.jsx(a,{dataField:"INS_DATE",caption:"INS_DATE",width:150,allowEditing:!1}),e.jsx(a,{dataField:"INS_EMPL",caption:"INS_EMPL",width:100,allowEditing:!1}),e.jsx(a,{dataField:"UPD_DATE",caption:"UPD_DATE",width:150,allowEditing:!1}),e.jsx(a,{dataField:"UPD_EMPL",caption:"UPD_EMPL",width:100,allowEditing:!1}),e.jsx(a,{dataField:"QC_PASS",caption:"QC_PASS",width:100,allowEditing:!1}),e.jsx(a,{dataField:"QC_PASS_DATE",caption:"QC_PASS_DATE",width:150,allowEditing:!1}),e.jsx(a,{dataField:"QC_PASS_EMPL",caption:"QC_PASS_EMPL",width:100,allowEditing:!1}),e.jsxs(Fe,{children:[e.jsx(v,{alignment:"right",column:"M_CODE",summaryType:"count",valueFormat:"decimal"}),e.jsx(v,{alignment:"right",column:"HOLDING_ROLL_QTY",summaryType:"sum",valueFormat:"decimal"}),e.jsx(v,{alignment:"right",column:"HOLDING_QTY",summaryType:"sum",valueFormat:"decimal"}),e.jsx(v,{alignment:"right",column:"HOLDING_TOTAL_QTY",summaryType:"sum",valueFormat:"decimal"})]})]})}),[b]),P=o=>{o.key==="Enter"&&k()},k=()=>{c.fire({title:"Tra cứu vật liệu Holding",text:"Đang tải dữ liệu, hãy chờ chút",icon:"info",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK",showConfirmButton:!1}),T("traholdingmaterial",{ALLTIME:I,FROM_DATE:_,TO_DATE:F,M_NAME:M,M_CODE:r,M_LOT_NO:S,M_STATUS:R,ID:p}).then(o=>{if(o.data.tk_status!=="NG"){const j=o.data.data.map((E,w)=>({...E,INS_DATE:E.INS_DATE!==null?C.utc(E.INS_DATE).format("YYYY-MM-DD HH:mm:ss"):"",UPD_DATE:E.UPD_DATE!==null?C.utc(E.UPD_DATE).format("YYYY-MM-DD HH:mm:ss"):"",QC_PASS_DATE:E.QC_PASS_DATE!==null?C.utc(E.QC_PASS_DATE).format("YYYY-MM-DD HH:mm:ss"):"",id:w}));Y(j),c.fire("Thông báo","Đã load "+o.data.data.length+" dòng","success")}else c.fire("Thông báo","Nội dung: "+o.data.message,"error")}).catch(o=>{console.log(o)})};return n.useEffect(()=>{},[]),e.jsx("div",{className:"holding",children:e.jsxs("div",{className:"tracuuDataInspection",children:[e.jsxs("div",{className:"tracuuDataInspectionform",children:[e.jsxs("div",{className:"forminput",children:[e.jsxs("div",{className:"forminputcolumn",children:[e.jsxs("label",{children:[e.jsx("b",{children:"Từ ngày:"}),e.jsx("input",{onKeyDown:o=>{P(o)},type:"date",value:_.slice(0,10),onChange:o=>g(o.target.value)})]}),e.jsxs("label",{children:[e.jsx("b",{children:"Tới ngày:"})," ",e.jsx("input",{onKeyDown:o=>{P(o)},type:"date",value:F.slice(0,10),onChange:o=>y(o.target.value)})]})]}),e.jsxs("div",{className:"forminputcolumn",children:[e.jsxs("label",{children:[e.jsx("b",{children:"Tên Liệu:"})," ",e.jsx("input",{onKeyDown:o=>{P(o)},type:"text",placeholder:"SJ-203020HC",value:M,onChange:o=>D(o.target.value)})]}),e.jsxs("label",{children:[e.jsx("b",{children:"Mã Liệu CMS:"})," ",e.jsx("input",{onKeyDown:o=>{P(o)},type:"text",placeholder:"A123456",value:r,onChange:o=>H(o.target.value)})]})]}),e.jsxs("div",{className:"forminputcolumn",children:[e.jsxs("label",{children:[e.jsx("b",{children:"LOT CMS:"})," ",e.jsx("input",{onKeyDown:o=>{P(o)},type:"text",placeholder:"2204280689",value:S,onChange:o=>ne(o.target.value)})]}),e.jsxs("label",{children:[e.jsx("b",{children:"Trạng Thái"}),e.jsxs("select",{name:"hangmuctest",value:R,onChange:o=>{Q(o.target.value)},children:[e.jsx("option",{value:"ALL",children:"ALL"}),e.jsx("option",{value:"Y",children:"ĐÃ PASS"}),e.jsx("option",{value:"N",children:"CHƯA PASS"})]})]})]})]}),e.jsxs("div",{className:"formbutton",children:[e.jsxs("label",{children:[e.jsx("b",{children:"All Time:"}),e.jsx("input",{onKeyDown:o=>{P(o)},type:"checkbox",name:"alltimecheckbox",defaultChecked:I,onChange:()=>X(!I)})]}),e.jsx("button",{className:"tranhatky",onClick:()=>{k()},children:"Tra Holding"}),e.jsx("button",{className:"tranhatky",onClick:()=>{$()},children:"Update Reason"}),e.jsxs(A,{className:"buttonIcon",onClick:()=>{(N==null?void 0:N.SUBDEPTNAME)==="IQC"?U("Y"):c.fire("Thông báo","Bạn không phải người bộ phận IQC","error")},children:[e.jsx(ye,{color:"green",size:25}),"SET PASS"]}),e.jsxs(A,{className:"buttonIcon",onClick:()=>{(N==null?void 0:N.SUBDEPTNAME)==="IQC"?U("N"):c.fire("Thông báo","Bạn không phải người bộ phận IQC","error")},children:[e.jsx(Pe,{color:"red",size:25}),"RESET PASS"]})]})]}),e.jsx("div",{className:"tracuuYCSXTable",children:L})]})})};const et=()=>{const[i,f]=n.useState(!0),[N,_]=n.useState([]),g=je(l=>l.totalSlice.userData),[F,y]=n.useState("NVL"),[I,X]=n.useState(""),[p,O]=n.useState(""),[b,Y]=n.useState(""),[M,D]=n.useState(""),[r,H]=n.useState([]),[S,ne]=n.useState([]),[R,Q]=n.useState(""),[U,$]=n.useState(""),[L,P]=n.useState(""),[k,o]=n.useState(""),[j,E]=n.useState(""),[w,K]=n.useState(0),[ie,oe]=n.useState(0),[J,de]=n.useState(0),[re,W]=n.useState(""),[Re,Z]=n.useState(""),[G,ee]=n.useState(""),[te,ce]=n.useState(0),[he,B]=n.useState(""),[Ue,ae]=n.useState(""),[V,ue]=n.useState(""),[fe,le]=n.useState(0),[xe,_e]=n.useState(""),[Ee,Te]=n.useState(!0),[se,t]=n.useState("6969"),d=async l=>{if(console.log(S),S.length>0){c.fire({title:"Tra cứu vật liệu Holding",text:"Đang tải dữ liệu, hãy chờ chút",icon:"info",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK",showConfirmButton:!1});let s="";for(let u=0;u<S.length;u++)await T("updateQCPASS_FAILING",{M_LOT_NO:S[u].M_LOT_NO,PLAN_ID_SUDUNG:S[u].PLAN_ID_SUDUNG,VALUE:l}).then(q=>{q.data.tk_status!=="NG"||(s+=` Lỗi: ${q.data.message}`)}).catch(q=>{console.log(q)});s===""?c.fire("Thông báo","SET thành công","success"):c.fire("Thông báo","Lỗi: "+s,"error")}else c.fire("Thông báo","Chọn ít nhất 1 dòng để thực hiện","error")},h=me.useMemo(()=>e.jsxs("div",{className:"datatb",children:[e.jsxs("div",{className:"menubar",children:[e.jsxs(A,{className:"buttonIcon",onClick:()=>{Te(l=>!l),H([])},children:[e.jsx(He,{color:"blue",size:25}),"Show/Hide Input"]}),e.jsx("span",{style:{fontSize:20,fontWeight:"bold"},children:"BẢNG NHẬP THÔNG TIN CUỘN LIỆU- BTP QC FAIL"}),e.jsxs(A,{className:"buttonIcon",onClick:()=>{m(),Te(!1)},children:[e.jsx(Qe,{color:"red",size:25}),"Tra Data"]})]}),e.jsxs(Ce,{style:{fontSize:"0.7rem"},autoNavigateToFocusedRow:!0,allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!1,cellHintEnabled:!0,columnResizingMode:"widget",showColumnLines:!0,dataSource:r,columnWidth:"auto",keyExpr:"id",height:"70vh",showBorders:!0,onSelectionChanged:l=>{ne(l.selectedRowsData)},onRowClick:l=>{},onRowUpdated:l=>{},children:[e.jsx(De,{useNative:!1,scrollByContent:!0,scrollByThumb:!0,showScrollbar:"onHover",mode:"virtual"}),e.jsx(Se,{mode:"multiple",selectAllMode:"allPages"}),e.jsx(Ae,{allowUpdating:!0,allowAdding:!1,allowDeleting:!1,mode:"cell",confirmDelete:!0,onChangesChange:l=>{}}),e.jsx(Oe,{enabled:!0}),e.jsxs(be,{disabled:!1,children:[e.jsx(x,{location:"before",children:e.jsxs(A,{className:"buttonIcon",onClick:()=>{Ne(r,"SPEC DTC")},children:[e.jsx(ge,{color:"green",size:25}),"SAVE"]})}),e.jsx(x,{name:"searchPanel"}),e.jsx(x,{name:"exportButton"}),e.jsx(x,{name:"columnChooserButton"}),e.jsx(x,{name:"addRowButton"}),e.jsx(x,{name:"saveButton"}),e.jsx(x,{name:"revertButton"})]}),e.jsx(we,{visible:!0}),e.jsx(Ie,{visible:!0}),e.jsx(pe,{enabled:!0}),e.jsx(Me,{defaultPageSize:15}),e.jsx(Le,{showPageSizeSelector:!0,allowedPageSizes:[5,10,15,20,100,1e3,1e4,"all"],showNavigationButtons:!0,showInfo:!0,infoText:"Page #{0}. Total: {1} ({2} items)",displayMode:"compact"}),e.jsx(a,{dataField:"FAIL_ID",caption:"FAIL_ID",width:100,allowEditing:!1}),e.jsx(a,{dataField:"FACTORY",caption:"FACTORY",width:100,allowEditing:!1}),e.jsx(a,{dataField:"PLAN_ID_SUDUNG",caption:"PLAN_ID_SUDUNG",width:100,allowEditing:!1}),e.jsx(a,{dataField:"G_NAME",caption:"G_NAME",width:100,allowEditing:!1}),e.jsx(a,{dataField:"LIEUQL_SX",caption:"LIEUQL_SX",width:100,allowEditing:!1}),e.jsx(a,{dataField:"M_CODE",caption:"M_CODE",width:100,allowEditing:!1}),e.jsx(a,{dataField:"M_LOT_NO",caption:"M_LOT_NO",width:100,allowEditing:!0}),e.jsx(a,{dataField:"VENDOR_LOT",caption:"VENDOR_LOT",width:100,allowEditing:!1}),e.jsx(a,{dataField:"M_NAME",caption:"M_NAME",width:100,allowEditing:!1}),e.jsx(a,{dataField:"WIDTH_CD",caption:"WIDTH_CD",width:100,allowEditing:!1}),e.jsx(a,{dataField:"ROLL_QTY",caption:"ROLL_QTY",width:100}),e.jsx(a,{dataField:"IN_QTY",caption:"IN_QTY",width:100}),e.jsx(a,{dataField:"TOTAL_IN_QTY",caption:"TOTAL_IN_QTY",width:100}),e.jsx(a,{dataField:"USE_YN",caption:"USE_YN",width:100,allowEditing:!1}),e.jsx(a,{dataField:"PQC3_ID",caption:"PQC3_ID",width:100,allowEditing:!1}),e.jsx(a,{dataField:"DEFECT_PHENOMENON",caption:"DEFECT_PHENOMENON",width:100,allowEditing:!1}),e.jsx(a,{dataField:"OUT_DATE",caption:"OUT_DATE",width:100,allowEditing:!1}),e.jsx(a,{dataField:"INS_EMPL",caption:"INS_EMPL",width:100,allowEditing:!1}),e.jsx(a,{dataField:"INS_DATE",caption:"INS_DATE",width:100,allowEditing:!1}),e.jsx(a,{dataField:"UPD_EMPL",caption:"UPD_EMPL",width:100,allowEditing:!1}),e.jsx(a,{dataField:"UPD_DATE",caption:"UPD_DATE",width:100,allowEditing:!1}),e.jsx(a,{dataField:"PHANLOAI",caption:"PHANLOAI",width:100,allowEditing:!1}),e.jsx(a,{dataField:"QC_PASS",caption:"QC_PASS",width:100,allowEditing:!1}),e.jsx(a,{dataField:"QC_PASS_DATE",caption:"QC_PASS_DATE",width:100,allowEditing:!1}),e.jsx(a,{dataField:"QC_PASS_EMPL",caption:"QC_PASS_EMPL",width:100,allowEditing:!1}),e.jsx(a,{dataField:"REMARK",caption:"REMARK",width:100,allowEditing:!1}),e.jsx(a,{dataField:"IN1_EMPL",caption:"IN1_EMPL",width:100,allowEditing:!1}),e.jsx(a,{dataField:"IN2_EMPL",caption:"IN2_EMPL",width:100,allowEditing:!1}),e.jsx(a,{dataField:"OUT1_EMPL",caption:"OUT1_EMPL",width:100,allowEditing:!1}),e.jsx(a,{dataField:"OUT2_EMPL",caption:"OUT2_EMPL",width:100,allowEditing:!1}),e.jsx(a,{dataField:"IN_CUST_CD",caption:"IN_CUST_CD",width:100,allowEditing:!1}),e.jsx(a,{dataField:"OUT_CUST_CD",caption:"OUT_CUST_CD",width:100,allowEditing:!1}),e.jsx(a,{dataField:"IN_CUST_NAME",caption:"IN_CUST_NAME",width:100,allowEditing:!1}),e.jsx(a,{dataField:"OUT_CUST_NAME",caption:"OUT_CUST_NAME",width:100,allowEditing:!1}),e.jsx(a,{dataField:"OUT_PLAN_ID",caption:"OUT_PLAN_ID",width:100,allowEditing:!1}),e.jsx(a,{dataField:"REMARK_OUT",caption:"REMARK_OUT",width:100,allowEditing:!1}),e.jsxs(Fe,{children:[e.jsx(v,{alignment:"right",column:"M_CODE",summaryType:"count",valueFormat:"decimal"}),e.jsx(v,{alignment:"right",column:"ROLL_QTY",summaryType:"sum",valueFormat:"decimal"}),e.jsx(v,{alignment:"right",column:"IN_QTY",summaryType:"sum",valueFormat:"decimal"}),e.jsx(v,{alignment:"right",column:"TOTAL_IN_QTY",summaryType:"sum",valueFormat:"decimal"})]})]})]}),[r]),m=()=>{T("loadQCFailData",{}).then(l=>{if(l.data.tk_status!=="NG"){const s=l.data.data.map((u,q)=>({...u,INS_DATE:u.INS_DATE===null?"":C(u.INS_DATE).utc().format("YYYY-MM-DD HH:mm:ss"),UPD_DATE:u.UPD_DATE===null?"":C(u.UPD_DATE).utc().format("YYYY-MM-DD HH:mm:ss"),QC_PASS_DATE:u.QC_PASS_DATE===null?"":C(u.QC_PASS_DATE).utc().format("YYYY-MM-DD HH:mm:ss"),id:q}));H(s),c.fire("Thông báo","Đã load :"+s.length+" dòng","success")}}).catch(l=>{console.log(l)})},z=(l,s)=>{T("checkEMPL_NO_mobile",{EMPL_NO:s}).then(u=>{u.data.tk_status!=="NG"?l===1?Q(u.data.data[0].MIDLAST_NAME+" "+u.data.data[0].FIRST_NAME):$(u.data.data[0].MIDLAST_NAME+" "+u.data.data[0].FIRST_NAME):(Q(""),$(""))}).catch(u=>{console.log(u)})},ve=l=>{T("checkPLAN_ID",{PLAN_ID:l}).then(s=>{s.data.tk_status!=="NG"?(ee(l),P(s.data.data[0].G_NAME),ae(s.data.data[0].PROD_REQUEST_DATE),o(s.data.data[0].G_CODE)):(Z(""),P(""),ae(""),o(""))}).catch(s=>{console.log(s)})},Ge=l=>{T("checkPQC3_IDfromPLAN_ID",{PLAN_ID:l}).then(s=>{s.data.tk_status!=="NG"?(ce(s.data.data[0].PQC3_ID),B(s.data.data[0].DEFECT_PHENOMENON)):(ce(0),B(""))}).catch(s=>{console.log(s)})},Ye=l=>{T("checkMNAMEfromLot",{M_LOT_NO:l}).then(s=>{s.data.tk_status!=="NG"?(console.log(s.data.data),E(s.data.data[0].M_NAME+" | "+s.data.data[0].WIDTH_CD),W(s.data.data[0].M_CODE),K(s.data.data[0].WIDTH_CD),oe(s.data.data[0].OUT_CFM_QTY),de(s.data.data[0].ROLL_QTY),le(s.data.data[0].LIEUQL_SX===null?"0":s.data.data[0].LIEUQL_SX),_e(s.data.data[0].OUT_DATE)):(E(""),W(""),K(0),de(0),oe(0),le(0),_e(""))}).catch(s=>{console.log(s)})},ke=()=>I!==""&&G!==""&&V!==""&&p!=="",Ke=async()=>{let l={id:r.length,FACTORY:(g==null?void 0:g.FACTORY_CODE)===1?"NM1":"NM2",PLAN_ID_SUDUNG:G,G_NAME:L,LIEUQL_SX:fe,M_CODE:re,M_LOT_NO:I,VENDOR_LOT:V,M_NAME:j,WIDTH_CD:w,ROLL_QTY:J,IN_QTY:ie,TOTAL_IN_QTY:J*ie,USE_YN:"Y",PQC3_ID:te,DEFECT_PHENOMENON:he,OUT_DATE:xe,INS_EMPL:g==null?void 0:g.EMPL_NO,INS_DATE:C().format("YYYY-MM-DD HH:mm:ss"),UPD_EMPL:"",UPD_DATE:"",PHANLOAI:F,QC_PASS:"N",QC_PASS_DATE:"",QC_PASS_EMPL:"",REMARK:M,IN1_EMPL:"",IN2_EMPL:"",OUT1_EMPL:"",OUT2_EMPL:"",OUT_PLAN_ID:"",IN_CUST_CD:"",OUT_CUST_CD:"",IN_CUST_NAME:"",OUT_CUST_NAME:"",REMARK_OUT:"",FAIL_ID:0};H(s=>[...s,l])},We=async()=>{if(r.length>0){let l="";for(let s=0;s<r.length;s++)await T("insertFailingData",{FACTORY:r[s].FACTORY,PLAN_ID_SUDUNG:r[s].PLAN_ID_SUDUNG,LIEUQL_SX:r[s].LIEUQL_SX,M_CODE:r[s].M_CODE,M_LOT_NO:r[s].M_LOT_NO,VENDOR_LOT:r[s].VENDOR_LOT,ROLL_QTY:r[s].ROLL_QTY,IN_QTY:r[s].IN_QTY,TOTAL_IN_QTY:r[s].TOTAL_IN_QTY,USE_YN:r[s].USE_YN,PQC3_ID:r[s].PQC3_ID,OUT_DATE:r[s].OUT_DATE,INS_EMPL:r[s].INS_EMPL,INS_DATE:r[s].INS_DATE,UPD_EMPL:r[s].UPD_EMPL,UPD_DATE:r[s].UPD_DATE,PHANLOAI:r[s].PHANLOAI,QC_PASS:r[s].QC_PASS,QC_PASS_DATE:r[s].QC_PASS_DATE,QC_PASS_EMPL:r[s].QC_PASS_EMPL,REMARK:r[s].REMARK,IN1_EMPL:r[s].IN1_EMPL,IN2_EMPL:r[s].IN2_EMPL,OUT1_EMPL:r[s].OUT1_EMPL,OUT2_EMPL:r[s].OUT2_EMPL,OUT_PLAN_ID:r[s].OUT_PLAN_ID,IN_CUST_CD:r[s].IN_CUST_CD,OUT_CUST_CD:r[s].OUT_CUST_CD}).then(u=>{u.data.tk_status!=="NG"||(l+="Lỗi: "+u.data.message+"| ")}).catch(u=>{console.log(u)});l===""?c.fire("Thông báo","Thêm data thành công","success"):c.fire("Thông báo","Lỗi: "+l,"error")}},Be=()=>{T("selectcustomerList",{}).then(l=>{l.data.tk_status!=="NG"&&_(l.data.data)}).catch(l=>{console.log(l)})},Ve=async()=>{if(S.length>0){let l="";for(let s=0;s<S.length;s++)await T("updateQCFailTableData",{OUT1_EMPL:p,OUT2_EMPL:b,OUT_CUST_CD:se,OUT_PLAN_ID:G,REMARK_OUT:M,FAIL_ID:S[s].FAIL_ID}).then(u=>{u.data.tk_status!=="NG"||(l+=` Lỗi: ${u.data.message} | `)}).catch(u=>{console.log(u)});l===""?c.fire("Thông báo","Xuất thành công","success"):c.fire("Thông báo","Có lỗi: "+l,"error")}else c.fire("Chọn ít nhất 1 dòng để thực hiện")};return n.useEffect(()=>{Be()},[]),e.jsx("div",{className:"failing",children:e.jsx("div",{className:"tracuuDataInspection",children:e.jsxs("div",{className:"maintable",children:[Ee&&e.jsxs("div",{className:"tracuuDataInspectionform",children:[e.jsx("b",{style:{color:"blue"},children:"INPUT LIỆU QC FAIL"}),e.jsxs("div",{className:"forminput",children:[e.jsxs("div",{className:"forminputcolumn",children:[e.jsxs("label",{children:["Vendor:",e.jsx("select",{disabled:i,name:"khachhang",value:se,onChange:l=>{t(l.target.value)},children:N.map((l,s)=>e.jsx("option",{value:l.CUST_CD,children:l.CUST_NAME_KD},s))})]}),e.jsxs("label",{children:["CMSV",e.jsx("input",{type:"checkbox",name:"alltimecheckbox",defaultChecked:i,onChange:l=>{i===!1&&t("6969"),f(!i)}})]}),e.jsx("b",{children:"Phân loại hàng"}),e.jsx("label",{children:e.jsxs("select",{name:"phanloaihang",value:F,onChange:l=>{y(l.target.value)},children:[e.jsx("option",{value:"NVL",children:"Vật Liệu"}),e.jsx("option",{value:"BTP",children:"Bán Thành Phẩm"})]})}),e.jsx("b",{children:"Số chỉ thị sản xuất"}),e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"1F80008A",value:G,onChange:l=>{l.target.value.length>=7&&(ve(l.target.value),Ge(l.target.value)),ee(l.target.value)}})}),L&&e.jsx("span",{style:{fontSize:15,fontWeight:"bold",color:"blue"},children:L}),e.jsx("b",{children:"LOT NVL CMS"}),e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"202304190123",value:I,onChange:l=>{l.target.value.length>=7&&Ye(l.target.value),X(l.target.value)}})}),j&&e.jsx("span",{style:{fontSize:15,fontWeight:"bold",color:"blue"},children:j}),e.jsx("b",{children:"VENDOR LOT"}),e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"54951949844984",value:V,onChange:l=>{ue(l.target.value)}})}),e.jsx("b",{children:"Mã nhân viên giao"}),e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"NVD1201",value:p,onChange:l=>{l.target.value.length>=7&&z(1,l.target.value),O(l.target.value)}})}),p&&e.jsx("span",{style:{fontSize:15,fontWeight:"bold",color:"blue"},children:R}),e.jsx("b",{children:"Mã nhân viên nhận"}),e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"NVD1201",value:b,onChange:l=>{l.target.value.length>=7&&z(2,l.target.value),Y(l.target.value)}})}),b&&e.jsx("span",{style:{fontSize:15,fontWeight:"bold",color:"blue"},children:U})]}),e.jsx("b",{children:"Remark"}),e.jsx("div",{className:"forminputcolumn",children:e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"Ghi chú",value:M,onChange:l=>{D(l.target.value)}})})})]}),e.jsxs("div",{className:"formbutton",children:[e.jsx("button",{className:"tranhatky",onClick:()=>{if(ke()){let l=r.map((s,u)=>s.M_LOT_NO);te!==0?l.indexOf(I)<0?Ke():c.fire("Thông tin","Đã thêm cuộn này rồi","error"):c.fire("Thông tin","Số chỉ thị này PQC chưa lập lỗi, không thêm được","error")}else c.fire("Thông báo","Hãy nhập đủ thông tin trước khi đăng ký","error")},children:"Add"}),e.jsx("button",{className:"tranhatky",onClick:()=>{We()},children:"Save"})]}),e.jsx("div",{className:"formbutton",style:{marginTop:"20px",display:"flex",flexWrap:"wrap"}})]}),e.jsx("div",{className:"tracuuYCSXTable",children:h}),!Ee&&e.jsxs("div",{className:"tracuuDataInspectionform",children:[e.jsx("b",{style:{color:"blue"},children:"OUTPUT LIỆU QC FAIL"}),e.jsxs("div",{className:"forminput",children:[e.jsxs("div",{className:"forminputcolumn",children:[e.jsxs("label",{children:["Vendor:",e.jsx("select",{disabled:i,name:"khachhang",value:se,onChange:l=>{t(l.target.value)},children:N.map((l,s)=>e.jsx("option",{value:l.CUST_CD,children:l.CUST_NAME_KD},s))})]}),e.jsxs("label",{children:["CMSV",e.jsx("input",{type:"checkbox",name:"alltimecheckbox",defaultChecked:i,onChange:l=>{i===!1&&t("6969"),f(!i)}})]}),e.jsx("b",{children:"Số chỉ thị xuất ra"}),e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"1F80008A",value:G,onChange:l=>{l.target.value.length>=7&&ve(l.target.value),ee(l.target.value)}})}),L&&e.jsx("span",{style:{fontSize:15,fontWeight:"bold",color:"blue"},children:L}),e.jsx("b",{children:"Mã nhân viên giao"}),e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"NVD1201",value:p,onChange:l=>{l.target.value.length>=7&&z(1,l.target.value),O(l.target.value)}})}),p&&e.jsx("span",{style:{fontSize:15,fontWeight:"bold",color:"blue"},children:R}),e.jsx("b",{children:"Mã nhân viên nhận"}),e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"NVD1201",value:b,onChange:l=>{l.target.value.length>=7&&z(2,l.target.value),Y(l.target.value)}})}),b&&e.jsx("span",{style:{fontSize:15,fontWeight:"bold",color:"blue"},children:U})]}),e.jsx("b",{children:"Remark"}),e.jsx("div",{className:"forminputcolumn",children:e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"Ghi chú",value:M,onChange:l=>{D(l.target.value)}})})})]}),e.jsx("div",{className:"formbutton",children:e.jsx("button",{className:"tranhatky",onClick:()=>{Ve()},children:"Xuất"})}),e.jsxs("div",{className:"formbutton",children:[e.jsxs(A,{className:"buttonIcon",onClick:()=>{(g==null?void 0:g.SUBDEPTNAME)==="IQC"?d("Y"):c.fire("Thông báo","Bạn không phải người bộ phận IQC","error")},children:[e.jsx(ye,{color:"green",size:25}),"SET PASS"]}),e.jsxs(A,{className:"buttonIcon",onClick:()=>{(g==null?void 0:g.SUBDEPTNAME)==="IQC"?d("N"):c.fire("Thông báo","Bạn không phải người bộ phận IQC","error")},children:[e.jsx(Pe,{color:"red",size:25}),"RESET PASS"]})]}),e.jsx("div",{className:"formbutton",style:{marginTop:"20px",display:"flex",flexWrap:"wrap"}})]})]})})})};const tt=()=>{function i(){return e.jsxs($e,{children:[e.jsxs(A,{className:"buttonIcon",onClick:()=>{Ne(O,"Inspection Data Table")},children:[e.jsx(ge,{color:"green",size:25}),"SAVE"]}),e.jsx(Je,{})]})}const f=[{field:"TEST_NAME",headerName:"TEST_NAME",width:80},{field:"POINT_CODE",headerName:"POINT_CODE",width:90},{field:"DANHGIA",headerName:"DANH_GIA",width:80,renderCell:t=>t.row.RESULT>=t.row.CENTER_VALUE-t.row.LOWER_TOR&&t.row.RESULT<=t.row.CENTER_VALUE+t.row.UPPER_TOR?e.jsx("span",{style:{color:"green"},children:e.jsx("b",{children:"OK"})}):e.jsx("span",{style:{color:"red"},children:e.jsx("b",{children:"NG"})})},{field:"CENTER_VALUE",headerName:"CENTER_VALUE",width:120,renderCell:t=>e.jsx("span",{children:e.jsx("b",{children:t.row.CENTER_VALUE})})},{field:"UPPER_TOR",headerName:"UPPER_TOR",width:80,renderCell:t=>e.jsx("span",{children:e.jsx("b",{children:t.row.UPPER_TOR})})},{field:"LOWER_TOR",headerName:"LOWER_TOR",width:80,renderCell:t=>e.jsx("span",{children:e.jsx("b",{children:t.row.LOWER_TOR})})},{field:"RESULT",headerName:"RESULT",width:80},{field:"DTC_ID",headerName:"DTC_ID",width:80},{field:"PROD_REQUEST_NO",headerName:"YCSX",width:80},{field:"G_CODE",headerName:"G_CODE",width:80},{field:"G_NAME",headerName:"G_NAME",width:200,renderCell:t=>t.row.M_CODE!=="B0000035"?e.jsx("span",{}):e.jsx("span",{children:e.jsx("b",{children:t.row.G_NAME})})},{field:"M_CODE",headerName:"M_CODE",width:80,renderCell:t=>t.row.M_CODE==="B0000035"?e.jsx("span",{}):e.jsx("span",{children:e.jsx("b",{children:t.row.M_CODE})})},{field:"M_NAME",headerName:"TEN LIEU",width:150,renderCell:t=>t.row.M_CODE==="B0000035"?e.jsx("span",{}):e.jsx("span",{children:e.jsx("b",{children:t.row.M_NAME})})},{field:"FACTORY",headerName:"FACTORY",width:80},{field:"TEST_FINISH_TIME",headerName:"TEST_FINISH_TIME",width:145},{field:"TEST_EMPL_NO",headerName:"NV TEST",width:100},{field:"TEST_TYPE_NAME",headerName:"TEST_TYPE_NAME",width:140},{field:"WORK_POSITION_NAME",headerName:"BO PHAN",width:80},{field:"SAMPLE_NO",headerName:"SAMPLE_NO",width:80},{field:"REQUEST_DATETIME",headerName:"NGAY YC",width:145},{field:"REQUEST_EMPL_NO",headerName:"NV YC",width:80},{field:"SIZE",headerName:"SIZE",width:80},{field:"LOTCMS",headerName:"LOTCMS",width:80},{field:"TEST_CODE",headerName:"TEST_CODE",width:80},{field:"TDS",headerName:"TDS",width:80},{field:"TDS_EMPL",headerName:"TDS_EMPL",width:80},{field:"TDS_UPD_DATE",headerName:"TDS_UPD_DATE",width:80}],N=t=>{T("dtcdata",{ALLTIME:!0,FROM_DATE:"",TO_DATE:"",G_CODE:"",G_NAME:"",M_NAME:"",M_CODE:"",TEST_NAME:"0",PROD_REQUEST_NO:"",TEST_TYPE:"0",ID:t}).then(d=>{if(d.data.tk_status!=="NG"){const h=d.data.data.map((m,z)=>({...m,TEST_FINISH_TIME:C.utc(m.TEST_FINISH_TIME).format("YYYY-MM-DD HH:mm:ss"),REQUEST_DATETIME:C.utc(m.REQUEST_DATETIME).format("YYYY-MM-DD HH:mm:ss"),id:z}));M(h)}else c.fire("Thông báo","Nội dung: "+d.data.message,"error")}).catch(d=>{console.log(d)})},_=je(t=>t.totalSlice.userData);n.useState("NVL");const[g,F]=n.useState("");n.useState((_==null?void 0:_.SUBDEPTNAME)==="IQC");const[y,I]=n.useState(""),[X,p]=n.useState(""),[O,b]=n.useState([]),[Y,M]=n.useState([]),[D,r]=n.useState([]),[H,S]=n.useState(""),[ne,R]=n.useState(""),[Q,U]=n.useState(""),[$,L]=n.useState(0),[P,k]=n.useState(0),[o,j]=n.useState(0),[E,w]=n.useState(""),[K,ie]=n.useState(0),[oe,J]=n.useState(""),[de,re]=n.useState(""),[W,Re]=n.useState(""),[Z,G]=n.useState(C().format("YYYY-MM-DD")),[ee,te]=n.useState(0),[ce,he]=n.useState(0),[B,Ue]=n.useState(0),[ae,V]=n.useState(!0),ue=async t=>{if(console.log(D),D.length>0){c.fire({title:"Tra cứu vật liệu Holding",text:"Đang tải dữ liệu, hãy chờ chút",icon:"info",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK",showConfirmButton:!1});let d="";for(let h=0;h<D.length;h++)await T("updateQCPASSI222",{M_CODE:D[h].M_CODE,LOT_CMS:D[h].LOT_CMS,VALUE:t}).then(m=>{m.data.tk_status!=="NG"||(d+=` Lỗi: ${m.data.message}`)}).catch(m=>{console.log(m)}),await T("updateIQC1Table",{M_CODE:D[h].M_CODE,LOT_CMS:D[h].LOT_CMS,VALUE:t==="Y"?"OK":"NG",IQC1_ID:D[h].IQC1_ID,REMARK:D[h].REMARK}).then(m=>{m.data.tk_status!=="NG"||(d+=` Lỗi: ${m.data.message}`)}).catch(m=>{console.log(m)});d===""?(c.fire("Thông báo","SET thành công","success"),le()):c.fire("Thông báo","Lỗi: "+d,"error")}else c.fire("Thông báo","Chọn ít nhất 1 dòng để thực hiện","error")},fe=me.useMemo(()=>e.jsxs("div",{className:"datatb",children:[e.jsxs("div",{className:"menubar",children:[e.jsxs(A,{className:"buttonIcon",onClick:()=>{V(t=>!t),b([]),M([])},children:[e.jsx(He,{color:"blue",size:25}),"Show/Hide Input"]}),e.jsx("span",{style:{fontSize:20,fontWeight:"bold"},children:"BẢNG NHẬP THÔNG TIN LIỆU INCOMMING"}),e.jsxs(A,{className:"buttonIcon",onClick:()=>{le(),V(!1)},children:[e.jsx(Qe,{color:"red",size:25}),"Tra Data"]}),e.jsxs(A,{className:"buttonIcon",onClick:()=>{(_==null?void 0:_.SUBDEPTNAME)==="IQC"?ue("Y"):c.fire("Thông báo","Bạn không phải người bộ phận IQC","error")},children:[e.jsx(ye,{color:"green",size:25}),"SET PASS"]}),e.jsxs(A,{className:"buttonIcon",onClick:()=>{(_==null?void 0:_.SUBDEPTNAME)==="IQC"?ue("N"):c.fire("Thông báo","Bạn không phải người bộ phận IQC","error")},children:[e.jsx(Pe,{color:"red",size:25}),"RESET PASS"]})]}),e.jsxs(Ce,{style:{fontSize:"0.7rem"},autoNavigateToFocusedRow:!0,allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!1,cellHintEnabled:!0,columnResizingMode:"widget",showColumnLines:!0,dataSource:O,columnWidth:"auto",keyExpr:"id",height:"70vh",showBorders:!1,onSelectionChanged:t=>{r(t.selectedRowsData)},onRowClick:t=>{N(t.data.DTC_ID)},children:[e.jsx(De,{useNative:!0,scrollByContent:!0,scrollByThumb:!0,showScrollbar:"onHover",mode:"virtual"}),e.jsx(Se,{mode:"multiple",selectAllMode:"allPages"}),e.jsx(Ae,{allowUpdating:!0,allowAdding:!1,allowDeleting:!1,mode:"cell",confirmDelete:!0,onChangesChange:t=>{}}),e.jsx(Oe,{enabled:!0}),e.jsxs(be,{disabled:!1,children:[e.jsx(x,{location:"before",children:e.jsxs(A,{className:"buttonIcon",onClick:()=>{Ne(O,"SPEC DTC")},children:[e.jsx(ge,{color:"green",size:25}),"SAVE"]})}),e.jsx(x,{name:"searchPanel"}),e.jsx(x,{name:"exportButton"}),e.jsx(x,{name:"columnChooserButton"}),e.jsx(x,{name:"addRowButton"}),e.jsx(x,{name:"saveButton"}),e.jsx(x,{name:"revertButton"})]}),e.jsx(we,{visible:!0}),e.jsx(Ie,{visible:!0}),e.jsx(pe,{enabled:!0}),e.jsx(Me,{defaultPageSize:15}),e.jsx(Le,{showPageSizeSelector:!0,allowedPageSizes:[5,10,15,20,100,1e3,1e4,"all"],showNavigationButtons:!0,showInfo:!0,infoText:"Page #{0}. Total: {1} ({2} items)",displayMode:"compact"}),e.jsx(a,{dataField:"IQC1_ID",caption:"IQC1_ID",width:100,allowEditing:!1}),e.jsx(a,{dataField:"M_CODE",caption:"M_CODE",width:100,allowEditing:!1}),e.jsx(a,{dataField:"M_LOT_NO",caption:"M_LOT_NO",width:100,allowEditing:!1}),e.jsx(a,{dataField:"LOT_CMS",caption:"LOT_CMS",width:100,allowEditing:!1}),e.jsx(a,{dataField:"LOT_VENDOR",caption:"LOT_VENDOR",width:100}),e.jsx(a,{dataField:"CUST_CD",caption:"CUST_CD",width:100,allowEditing:!1}),e.jsx(a,{dataField:"CUST_NAME_KD",caption:"VENDOR NAME",width:120,allowEditing:!1}),e.jsx(a,{dataField:"EXP_DATE",caption:"EXP_DATE",width:150}),e.jsx(a,{dataField:"INPUT_LENGTH",caption:"INPUT_LENGTH",width:100,allowEditing:!1}),e.jsx(a,{dataField:"TOTAL_ROLL",caption:"TOTAL_ROLL",width:100,allowEditing:!1}),e.jsx(a,{dataField:"NQ_CHECK_ROLL",caption:"NQ_CHECK_ROLL",width:100,allowEditing:!1}),e.jsx(a,{dataField:"DTC_ID",caption:"DTC_ID",width:100,allowEditing:!1}),e.jsx(a,{dataField:"TEST_EMPL",caption:"TEST_EMPL",width:100,allowEditing:!1}),e.jsx(a,{dataField:"TOTAL_RESULT",caption:"TOTAL_RESULT",width:100,cellRender:t=>t.data.TOTAL_RESULT==="OK"?e.jsx("div",{style:{color:"white",fontWeight:"bold",backgroundColor:"green",textAlign:"center"},children:"OK"}):t.data.TOTAL_RESULT==="NG"?e.jsx("div",{style:{color:"white",fontWeight:"bold",backgroundColor:"red",textAlign:"center"},children:"NG"}):e.jsx("div",{style:{color:"white",fontWeight:"bold",backgroundColor:"gray",textAlign:"center"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"AUTO_JUDGEMENT",caption:"AUTO_JUDGEMENT",width:100,cellRender:t=>{if(t.data.AUTO_JUDGEMENT==="OK")return e.jsx("div",{style:{color:"white",fontWeight:"bold",backgroundColor:"green",textAlign:"center"},children:"OK"});if(t.data.AUTO_JUDGEMENT==="NG")return e.jsx("div",{style:{color:"white",fontWeight:"bold",backgroundColor:"red",textAlign:"center"},children:"NG"})},allowEditing:!1}),e.jsx(a,{dataField:"NGOAIQUAN",caption:"NGOAIQUAN",width:100,cellRender:t=>t.data.NGOAIQUAN===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.NGOAIQUAN===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"KICHTHUOC",caption:"KICHTHUOC",width:100,cellRender:t=>t.data.KICHTHUOC===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.KICHTHUOC===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"THICKNESS",caption:"THICKNESS",width:100,cellRender:t=>t.data.THICKNESS===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.THICKNESS===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"DIENTRO",caption:"DIENTRO",width:100,cellRender:t=>t.data.DIENTRO===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.DIENTRO===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"CANNANG",caption:"CANNANG",width:100,cellRender:t=>t.data.CANNANG===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.CANNANG===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"KEOKEO",caption:"KEOKEO",width:100,cellRender:t=>t.data.KEOKEO===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.KEOKEO===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"KEOKEO2",caption:"KEOKEO2",width:100,cellRender:t=>t.data.KEOKEO2===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.KEOKEO2===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"FTIR",caption:"FTIR",width:100,cellRender:t=>t.data.FTIR===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.FTIR===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"MAIMON",caption:"MAIMON",width:100,cellRender:t=>t.data.MAIMON===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.MAIMON===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"XRF",caption:"XRF",width:100,cellRender:t=>t.data.XRF===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.XRF===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"SCANBARCODE",caption:"SCANBARCODE",width:100,cellRender:t=>t.data.SCANBARCODE===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.SCANBARCODE===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"PHTHALATE",caption:"PHTHALATE",width:100,cellRender:t=>t.data.PHTHALATE===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.PHTHALATE===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"MAUSAC",caption:"MAUSAC",width:100,cellRender:t=>t.data.MAUSAC===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.MAUSAC===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"SHOCKNHIET",caption:"SHOCKNHIET",width:100,cellRender:t=>t.data.SHOCKNHIET===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.SHOCKNHIET===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"TINHDIEN",caption:"TINHDIEN",width:100,cellRender:t=>t.data.TINHDIEN===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.TINHDIEN===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"NHIETAM",caption:"NHIETAM",width:100,cellRender:t=>t.data.NHIETAM===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.NHIETAM===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"TVOC",caption:"TVOC",width:100,cellRender:t=>t.data.TVOC===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.TVOC===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"DOBONG",caption:"DOBONG",width:100,cellRender:t=>t.data.DOBONG===1?e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:"OK"}):t.data.DOBONG===0?e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"NG"}):e.jsx("span",{style:{color:"gray",fontWeight:"bold"},children:"N/A"}),allowEditing:!1}),e.jsx(a,{dataField:"INS_DATE",caption:"INS_DATE",width:100,allowEditing:!1}),e.jsx(a,{dataField:"INS_EMPL",caption:"INS_EMPL",width:100,allowEditing:!1}),e.jsx(a,{dataField:"UPD_DATE",caption:"UPD_DATE",width:100,allowEditing:!1}),e.jsx(a,{dataField:"UPD_EMPL",caption:"UPD_EMPL",width:100,allowEditing:!1}),e.jsx(a,{dataField:"REMARK",caption:"REMARK",width:150,allowEditing:!0})]})]}),[O]),le=()=>{T("loadIQC1table",{}).then(t=>{if(t.data.tk_status!=="NG"){const d=t.data.data.map((h,m)=>({...h,INS_DATE:h.INS_DATE===null?"":C(h.INS_DATE).utc().format("YYYY-MM-DD HH:mm:ss"),UPD_DATE:h.UPD_DATE===null?"":C(h.UPD_DATE).utc().format("YYYY-MM-DD HH:mm:ss"),EXP_DATE:h.EXP_DATE===null?"":C(h.EXP_DATE).utc().format("YYYY-MM-DD HH:mm:ss"),id:m}));b(d),c.fire("Thông báo","Đã load :"+d.length+" dòng","success")}}).catch(t=>{console.log(t)})},xe=t=>{T("checkEMPL_NO_mobile",{EMPL_NO:t}).then(d=>{d.data.tk_status!=="NG"?(S(d.data.data[0].MIDLAST_NAME+" "+d.data.data[0].FIRST_NAME),R(d.data.data[0].WORK_POSITION_CODE)):(S(""),R(""))}).catch(d=>{console.log(d)})},_e=t=>{T("checkMNAMEfromLotI222",{M_LOT_NO:t}).then(d=>{d.data.tk_status!=="NG"?(U(d.data.data[0].M_NAME+" | "+d.data.data[0].WIDTH_CD),w(d.data.data[0].M_CODE),L(d.data.data[0].WIDTH_CD),k(d.data.data[0].OUT_CFM_QTY),j(d.data.data[0].ROLL_QTY),J(d.data.data[0].CUST_CD),re(d.data.data[0].CUST_NAME_KD),T("checkMNAMEfromLotI222Total",{M_CODE:d.data.data[0].M_CODE,LOTCMS:t.substring(0,6)}).then(h=>{h.data.tk_status!=="NG"?(te(h.data.data[0].TOTAL_CFM_QTY),he(h.data.data[0].TOTAL_ROLL)):(te(0),he(0))}).catch(h=>{console.log(h)})):(U(""),w(""),L(0),j(0),k(0),J(""),re(""))}).catch(d=>{console.log(d)})},Ee=()=>g!==""&&W!==""&&y!==""&&Z!==""&&B!==0&&K!==0,Te=async()=>{let t={id:O.length,IQC1_ID:O.length,M_CODE:E,M_LOT_NO:g,LOT_CMS:g.substring(0,6),LOT_VENDOR:W,CUST_CD:oe,CUST_NAME_KD:de,EXP_DATE:Z,INPUT_LENGTH:ee,TOTAL_ROLL:ce,NQ_CHECK_ROLL:B,DTC_ID:K,TEST_EMPL:y,TOTAL_RESULT:"",AUTO_JUDGEMENT:"",NGOAIQUAN:"",KICHTHUOC:"",THICKNESS:"",DIENTRO:"",CANNANG:"",KEOKEO:"",KEOKEO2:"",FTIR:"",MAIMON:"",XRF:"",SCANBARCODE:"",PHTHALATE:"",MAUSAC:"",SHOCKNHIET:"",TINHDIEN:"",NHIETAM:"",TVOC:"",DOBONG:"",INS_DATE:"",INS_EMPL:"",UPD_DATE:"",UPD_EMPL:"",REMARK:""};b(d=>[...d,t])},se=async()=>{if(O.length>0){let t="";for(let d=0;d<O.length;d++)await T("insertIQC1table",O[d]).then(h=>{h.data.tk_status!=="NG"||(t+="Lỗi : "+h.data.message+" | ")}).catch(h=>{console.log(h)});t===""?c.fire("Thông báo","Thêm data thành công","success"):c.fire("Thông báo","Lỗi: "+t,"error")}else c.fire("Thông báo","Thêm ít nhất 1 dòng để lưu","error")};return n.useEffect(()=>{},[]),e.jsx("div",{className:"incomming",children:e.jsx("div",{className:"tracuuDataInspection",children:e.jsxs("div",{className:"maintable",children:[ae&&e.jsxs("div",{className:"tracuuDataInspectionform",children:[e.jsx("b",{style:{color:"blue"},children:"INPUT DATA KIỂM TRA INCOMMING"}),e.jsxs("div",{className:"forminput",children:[e.jsxs("div",{className:"forminputcolumn",children:[e.jsx("b",{children:"LOT NVL CMS"}),e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"202304190123",value:g,onChange:t=>{t.target.value.length>=7&&_e(t.target.value),F(t.target.value)}})}),Q&&e.jsx("span",{style:{fontSize:15,fontWeight:"bold",color:"blue"},children:Q}),e.jsx("b",{children:"VENDOR LOT"}),e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"NVD1201",value:W,onChange:t=>{Re(t.target.value)}})}),e.jsx("b",{children:"Hạn sử dụng"}),e.jsx("label",{children:e.jsx("input",{type:"date",value:Z,onChange:t=>{G(t.target.value)}})}),e.jsx("b",{children:"Số Roll check ngoại quan"}),e.jsx("label",{children:e.jsx("input",{type:"text",value:B,onChange:t=>{Ue(Number(t.target.value))}})}),e.jsx("b",{children:"ID Test ngoại quan- độ tin cậy"}),e.jsx("label",{children:e.jsx("input",{type:"text",value:K,onChange:t=>{ie(Number(t.target.value))}})}),e.jsx("b",{children:"Mã nhân viên test IQC"}),e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"NVD1201",value:y,onChange:t=>{t.target.value.length>=7&&xe(t.target.value),I(t.target.value)}})}),y&&e.jsx("span",{style:{fontSize:15,fontWeight:"bold",color:"blue"},children:H})]}),e.jsx("b",{children:"Remark"}),e.jsx("div",{className:"forminputcolumn",children:e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"Ghi chú",value:X,onChange:t=>{p(t.target.value)}})})})]}),e.jsxs("div",{className:"formbutton",children:[e.jsx("button",{className:"tranhatky",onClick:()=>{Ee()?Te():c.fire("Thông báo","Hãy nhập đủ thông tin trước khi đăng ký","error")},children:"Add"}),e.jsx("button",{className:"tranhatky",onClick:()=>{se()},children:"Save"})]}),e.jsx("div",{className:"formbutton",style:{marginTop:"20px",display:"flex",flexWrap:"wrap"}})]}),e.jsx("div",{className:"tracuuYCSXTable",children:fe}),!ae&&e.jsxs("div",{className:"tracuuDataInspectionform2",children:[e.jsx("b",{style:{color:"blue"},children:"Kết quả ĐTC"}),e.jsx(Xe,{sx:{fontSize:"0.7rem",flex:1},components:{Toolbar:i},rowHeight:30,rows:Y,columns:f,rowsPerPageOptions:[5,10,50,100,500,1e3,5e3,1e4,5e5],editMode:"row"})]})]})})})},at=()=>{const[i,f]=n.useState({tab1:!1,tab2:!1,tab3:!0}),N=_=>{_===1?f({...i,tab1:!0,tab2:!1,tab3:!1,tab4:!1,tab5:!1}):_===2?f({...i,tab1:!1,tab2:!0,tab3:!1,tab4:!1,tab5:!1}):_===3?f({...i,tab1:!1,tab2:!1,tab3:!0,tab4:!1,tab5:!1}):_===4?f({...i,tab1:!1,tab2:!1,tab3:!1,tab4:!0,tab5:!1}):_===5&&f({...i,tab1:!1,tab2:!1,tab3:!1,tab4:!1,tab5:!0})};return n.useEffect(()=>{},[]),e.jsxs("div",{className:"hold_fail",children:[e.jsxs("div",{className:"mininavbar",children:[e.jsx("div",{className:"mininavitem",onClick:()=>N(3),style:{backgroundColor:i.tab3===!0?"#02c712":"#abc9ae",color:(i.tab3===!0,"yellow")},children:e.jsx("span",{className:"mininavtext",children:"INCOMMING"})}),e.jsx("div",{className:"mininavitem",onClick:()=>N(1),style:{backgroundColor:i.tab1===!0?"#02c712":"#abc9ae",color:(i.tab1===!0,"yellow")},children:e.jsx("span",{className:"mininavtext",children:"HOLDING"})}),e.jsx("div",{className:"mininavitem",onClick:()=>N(2),style:{backgroundColor:i.tab2===!0?"#02c712":"#abc9ae",color:(i.tab2===!0,"yellow")},children:e.jsx("span",{className:"mininavtext",children:"FAILING"})})]}),i.tab1&&e.jsx("div",{className:"traiqc",children:e.jsx(Ze,{})}),i.tab2&&e.jsx("div",{className:"datadtc",children:e.jsx(et,{})}),i.tab3&&e.jsx("div",{className:"datadtc",children:e.jsx(tt,{})})]})},ht=()=>{const[i,f]=n.useState({tab1:!0,tab2:!1,tab3:!1}),N=_=>{_===1?f({...i,tab1:!0,tab2:!1,tab3:!1,tab4:!1,tab5:!1}):_===2?f({...i,tab1:!1,tab2:!0,tab3:!1,tab4:!1,tab5:!1}):_===3?f({...i,tab1:!1,tab2:!1,tab3:!0,tab4:!1,tab5:!1}):_===4?f({...i,tab1:!1,tab2:!1,tab3:!1,tab4:!0,tab5:!1}):_===5&&f({...i,tab1:!1,tab2:!1,tab3:!1,tab4:!1,tab5:!0})};return n.useEffect(()=>{},[]),e.jsxs("div",{className:"iqc",children:[e.jsxs("div",{className:"mininavbar",children:[e.jsx("div",{className:"mininavitem",onClick:()=>N(1),style:{backgroundColor:i.tab1===!0?"#02c712":"#abc9ae",color:(i.tab1===!0,"yellow")},children:e.jsx("span",{className:"mininavtext",children:"Kho Liệu"})}),e.jsx("div",{className:"mininavitem",onClick:()=>N(2),style:{backgroundColor:i.tab2===!0?"#02c712":"#abc9ae",color:(i.tab2===!0,"yellow")},children:e.jsx("span",{className:"mininavtext",children:"ĐỘ TIN CẬY"})}),e.jsx("div",{className:"mininavitem",onClick:()=>N(3),style:{backgroundColor:i.tab3===!0?"#02c712":"#abc9ae",color:(i.tab3===!0,"yellow")},children:e.jsx("span",{className:"mininavtext",children:"IN-HOLD-FAIL"})})]}),i.tab1&&e.jsx("div",{className:"traiqc",children:e.jsx(ze,{})}),i.tab2&&e.jsx("div",{className:"datadtc",children:e.jsx(qe,{})}),i.tab3&&e.jsx("div",{className:"datadtc",children:e.jsx(at,{})})]})};export{ht as default};
