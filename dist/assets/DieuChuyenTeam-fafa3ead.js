import{r as h,ad as d,S as l,j as e,aj as A,ak as C}from"./index-4ab6dde0.js";/* empty css                       */import{D as x,G as S,b as j}from"./DataGrid-b5e0acb2.js";import{G as b,a as w,b as g}from"./GridToolbarFilterButton-ec6062d3.js";import"./TextField-db9fe3d0.js";import"./MenuItem-8199bc03.js";import"./Typography-b6d023f3.js";const K=()=>{const[u,r]=h.useState(!1),[m,E]=h.useState(5),[N,c]=h.useState([]),[_,M]=h.useState([]),T=[{field:"id",headerName:"ID",width:100,valueGetter:a=>a.row.EMPL_NO},{field:"WORK_SHIF_NAME",headerName:"WORK_SHIF_NAME",width:130},{field:"SET_TEAM",headerName:"SET_TEAM",width:200,renderCell:a=>{const t=i=>{d("setteamnhom",{teamvalue:i,EMPL_NO:a.row.EMPL_NO}).then(n=>{if(console.log(n.data.tk_status),n.data.tk_status==="OK"){const s=N.map(o=>o.EMPL_NO===a.row.EMPL_NO?{...o,WORK_SHIF_NAME:i===0?"Hành Chính":i===1?"TEAM 1":"TEAM 2"}:o);c(s)}else l.fire("Có lỗi","Nội dung: "+n.data.message,"error")}).catch(n=>{console.log(n)})};return a.row.WORK_SHIF_NAME==="Hành Chính"?e.jsxs("div",{className:"onoffdiv",children:[e.jsx("button",{className:"team1bt",onClick:()=>t(1),children:"TEAM1"}),e.jsx("button",{className:"team2bt",onClick:()=>t(2),children:"TEAM2"})]}):a.row.WORK_SHIF_NAME==="TEAM 1"?e.jsxs("div",{className:"onoffdiv",children:[e.jsx("button",{className:"hcbt",onClick:()=>t(0),children:"HanhChinh"}),e.jsx("button",{className:"team2bt",onClick:()=>t(2),children:"TEAM2"})]}):e.jsxs("div",{className:"onoffdiv",children:[e.jsx("button",{className:"team1bt",onClick:()=>t(1),children:"TEAM1"}),e.jsx("button",{className:"hcbt",onClick:()=>t(0),children:"HanhChinh"})]})}},{field:"FACTORY_NAME",headerName:"FACTORY_NAME",width:130},{field:"SET_NM",headerName:"SET_NM",width:100,renderCell:a=>{const t=i=>{d("setnhamay",{FACTORY:i,EMPL_NO:a.row.EMPL_NO}).then(n=>{if(n.data.tk_status==="OK"){const s=N.map(o=>o.EMPL_NO===a.row.EMPL_NO?{...o,FACTORY_NAME:i===1?"Nhà máy 1":"Nhà máy 2"}:o);c(s)}else l.fire("Có lỗi","Nội dung: "+n.data.message,"error")}).catch(n=>{console.log(n)})};return a.row.FACTORY_NAME==="Nhà máy 1"?e.jsx("div",{className:"onoffdiv",children:e.jsx("button",{className:"team2bt",onClick:()=>t(2),children:"SET NM2"})}):a.row.FACTORY_NAME==="Nhà máy 2"?e.jsx("div",{className:"onoffdiv",children:e.jsx("button",{className:"hcbt",onClick:()=>t(1),children:"SET NM1"})}):e.jsxs("div",{className:"onoffdiv",children:[e.jsx("button",{className:"team1bt",onClick:()=>t(1),children:"SET NM1"}),e.jsx("button",{className:"hcbt",onClick:()=>t(2),children:"SET NM2"})]})}},{field:"WORK_POSITION_NAME",headerName:"WORK_POSITION_NAME",width:130},{field:"SETVITRI",headerName:"SET_VI_TRI",width:120,renderCell:a=>{const t=i=>{l.fire({title:"Chắc chắn muốn chuyển team ?",text:"Sẽ bắt đầu chuyển team",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Vẫn chuyển!"}).then(n=>{n.isConfirmed&&(l.fire("Tiến hành chuyển team","Đang chuyển team","success"),d("setEMPL_WORK_POSITION",{WORK_POSITION_CODE:i,EMPL_NO:a.row.EMPL_NO}).then(s=>{s.data.tk_status==="OK"?d("diemdanhnhom",{team_name_list:m}).then(o=>{o.data.tk_status!=="NG"?(c(o.data.data),r(!1)):l.fire("Thông báo","Nội dung: "+o.data.message,"error")}).catch(o=>{console.log(o)}):l.fire("Có lỗi","Nội dung: "+s.data.message,"error")}).catch(s=>{console.log(s)}))})};return e.jsx("div",{className:"onoffdiv",children:e.jsx("label",{children:e.jsx("select",{name:"vitrilamviec",value:a.row.WORK_POSITION_CODE,onChange:i=>{t(Number(i.target.value))},children:_.map((i,n)=>e.jsx("option",{value:i.WORK_POSITION_CODE,children:i.WORK_POSITION_NAME},n))})})})}},{field:"EMPL_NO",headerName:"EMPL_NO",width:170},{field:"CMS_ID",headerName:"CMS_ID",width:100},{field:"MIDLAST_NAME",headerName:"MIDLAST_NAME",width:130},{field:"FIRST_NAME",headerName:"FIRST_NAME",width:130},{field:"SUBDEPTNAME",headerName:"SUBDEPTNAME",width:130},{field:"MAINDEPTNAME",headerName:"MAINDEPTNAME",width:130},{field:"PHONE_NUMBER",headerName:"PHONE_NUMBER",width:130},{field:"SEX_NAME",headerName:"SEX_NAME",width:130},{field:"WORK_STATUS_NAME",headerName:"WORK_STATUS_NAME",width:130},{field:"JOB_NAME",headerName:"JOB_NAME",width:130}];function f(){return e.jsxs(S,{children:[e.jsx(b,{}),e.jsx(w,{}),e.jsx(g,{}),e.jsx("button",{className:"saveexcelbutton",onClick:()=>{C(N,"DieuChuyenTeam")},children:"Save Excel"}),e.jsx(j,{})]})}const O=a=>{E(a),d("diemdanhnhom",{team_name_list:a}).then(t=>{c(t.data.data),r(!1)}).catch(t=>{console.log(t)})};return h.useEffect(()=>{r(!0),d("workpositionlist_BP",{}).then(a=>{M(a.data.data),r(!1)}).catch(a=>{console.log(a)}),d("diemdanhnhom",{team_name_list:m}).then(a=>{a.data.tk_status!=="NG"?(c(a.data.data),r(!1),l.fire("Thông báo","Đã load "+a.data.data.length+" dòng","success")):l.fire("Thông báo","Nội dung: "+a.data.message,"error")}).catch(a=>{console.log(a)})},[]),e.jsxs("div",{className:"dieuchuyenteam",children:[e.jsx("h3",{children:"Điều chuyển team"}),e.jsx("div",{className:"filterform",children:e.jsxs("label",{children:["Ca làm việc:",e.jsxs("select",{name:"calamviec",value:m,onChange:a=>{O(Number(a.target.value))},children:[e.jsx("option",{value:0,children:"TEAM 1 + Hành chính"}),e.jsx("option",{value:1,children:"TEAM 2+ Hành chính"}),e.jsx("option",{value:2,children:"TEAM 1"}),e.jsx("option",{value:3,children:"TEAM 2"}),e.jsx("option",{value:4,children:"Hành chính"}),e.jsx("option",{value:5,children:"Tất cả"})]})]})}),e.jsx("div",{className:"maindept_table",children:e.jsx(x,{sx:{fontSize:"0.8rem"},components:{Toolbar:f,LoadingOverlay:A},loading:u,rowHeight:35,rows:N,columns:T,rowsPerPageOptions:[5,10,50,100,500],editMode:"row",getRowHeight:()=>"auto"})})]})};export{K as default};
