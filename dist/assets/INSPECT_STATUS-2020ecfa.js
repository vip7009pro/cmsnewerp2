import{j as E,aU as u,r as U,ad as T,ai as n}from"./index-4ab6dde0.js";import{S as x,T as S}from"./TextField-db9fe3d0.js";import{M as C}from"./MenuItem-8199bc03.js";const d=({INS_DATA:a})=>{const R="#2fd5eb",l="#8ce9f5",M="white",_="black";let c=!1;return(a==null?void 0:a.G_NAME)!==void 0&&a.SEARCH_STRING!==void 0&&a.G_NAME!==null&&a.SEARCH_STRING!==null&&(a.SEARCH_STRING===""?c=!0:c=a.G_NAME.toLowerCase().includes(a.SEARCH_STRING.toLowerCase())),E.jsxs("div",{className:"inspect_component",style:{backgroundImage:`linear-gradient(to right, ${(a==null?void 0:a.EQ_STATUS)==="START"?R:M}, ${(a==null?void 0:a.EQ_STATUS)==="START"?l:_})`,borderRadius:"4px",WebkitFilter:(a==null?void 0:a.G_NAME)===null||c?"none":"blur(5px)"},children:[E.jsx("div",{className:"tieude",style:{backgroundColor:`${c?(a==null?void 0:a.EQ_STATUS)==="STOP"?"red":((a==null?void 0:a.EQ_STATUS)==="START","#3ff258"):"black"}`},children:E.jsxs("div",{className:"eqname",style:{color:`${c?(a==null?void 0:a.EQ_STATUS)==="STOP"?"white":((a==null?void 0:a.EQ_STATUS)==="START","black"):"white"}`},children:[a==null?void 0:a.EQ_NAME,c&&(a==null?void 0:a.EQ_STATUS)==="START"&&E.jsx("img",{alt:"running",src:"/blink.gif",width:40,height:15}),c&&(a==null?void 0:a.EQ_STATUS)==="SETTING"&&E.jsx("img",{alt:"running",src:"/setting3.gif",width:30,height:30})]})}),E.jsxs("div",{className:"machineplan",style:{fontSize:"12px"},children:[E.jsxs("div",{className:"codename",children:[" ",a==null?void 0:a.G_NAME_KD]}),E.jsxs("div",{className:"user",children:[E.jsx(u,{})," ",a==null?void 0:a.EMPL_COUNT," người"]})]})]})};const e=()=>{const[a,R]=U.useState(""),[l,M]=U.useState(0),[_,c]=U.useState([]),[r,h]=U.useState({totalSheetA:0,totalRollB:0,totalNormal:0,totalOLED:0,totalUV:0}),N=()=>{T("getIns_Status",{}).then(s=>{if(s.data.tk_status!=="NG"){const i=s.data.data.map((t,P)=>({...t,INS_DATE:n(t.INS_DATE).utc().format("YYYY-MM-DD HH:mm:ss"),UPD_DATE:n(t.UPD_DATE).utc().format("YYYY-MM-DD HH:mm:ss"),id:P}));let o={totalSheetA:0,totalRollB:0,totalNormal:0,totalOLED:0,totalUV:0};for(let t=0;t<i.length;t++)o.totalSheetA+=i[t].KHUVUC==="A"?i[t].EMPL_COUNT:0,o.totalRollB+=i[t].KHUVUC==="B"?i[t].EMPL_COUNT:0,o.totalNormal+=i[t].KHUVUC==="N"?i[t].EMPL_COUNT:0,o.totalOLED+=i[t].KHUVUC==="O"?i[t].EMPL_COUNT:0,o.totalUV+=i[t].KHUVUC==="U"?i[t].EMPL_COUNT:0;h(o),c(i)}}).catch(s=>{console.log(s)})};return U.useEffect(()=>{N();let s=window.setInterval(()=>{N()},3e3);return()=>{window.clearInterval(s)}},[]),E.jsxs("div",{className:"ins_status",children:[E.jsx("div",{className:"ins_summary",children:E.jsxs("div",{className:"selectform",children:[E.jsx("div",{className:"label",children:"Select Factory"}),E.jsxs(x,{value:l,label:"Select Factory",onChange:s=>{M(Number(s.target.value))},style:{width:"200px",height:"40px"},placeholder:"Chọn nhà máy",children:[E.jsx(C,{value:0,children:"ALL"}),E.jsx(C,{value:1,children:"NM1"}),E.jsx(C,{value:2,children:"NM3"})]}),E.jsx(S,{placeholder:"Search Code",value:a,onChange:s=>{R(s.target.value)}})]})}),E.jsxs("div",{className:"ins_div",children:[(l===0||l===1)&&E.jsxs("div",{className:"NM1",children:[E.jsxs("div",{className:"title",children:["NM1 INSPECTION STATUS (",r.totalSheetA+r.totalRollB," người)"]}),E.jsxs("div",{className:"table",children:[E.jsxs("div",{className:"xuongA",children:[E.jsx("div",{className:"subtitle",children:E.jsxs("b",{children:["Xưởng A: (",r.totalSheetA," người đang kiểm tra)"]})}),E.jsx("div",{className:"submachine",children:_.filter(s=>s.KHUVUC==="A").map((s,i)=>E.jsx(d,{INS_DATA:{SEARCH_STRING:a,FACTORY:s.FACTORY,EQ_NAME:s.EQ_NAME,EMPL_COUNT:s.EMPL_COUNT,EQ_STATUS:s.EQ_STATUS,CURR_PLAN_ID:s.CURR_PLAN_ID,CURR_G_CODE:s.CURR_G_CODE,G_NAME:s.G_NAME,G_NAME_KD:s.G_NAME_KD,REMARK:s.REMARK,INS_EMPL:s.INS_EMPL,INS_DATE:s.INS_DATE,UPD_EMPL:s.UPD_EMPL,UPD_DATE:s.UPD_DATE}},i))})]}),E.jsxs("div",{className:"xuongB",children:[E.jsx("div",{className:"subtitle",children:E.jsxs("b",{children:["Xưởng B: (",r.totalRollB," người đang kiểm tra)"]})}),E.jsx("div",{className:"submachine",children:_.filter(s=>s.KHUVUC==="B").map((s,i)=>E.jsx(d,{INS_DATA:{SEARCH_STRING:a,FACTORY:s.FACTORY,EQ_NAME:s.EQ_NAME,EMPL_COUNT:s.EMPL_COUNT,EQ_STATUS:s.EQ_STATUS,CURR_PLAN_ID:s.CURR_PLAN_ID,CURR_G_CODE:s.CURR_G_CODE,G_NAME:s.G_NAME,G_NAME_KD:s.G_NAME_KD,REMARK:s.REMARK,INS_EMPL:s.INS_EMPL,INS_DATE:s.INS_DATE,UPD_EMPL:s.UPD_EMPL,UPD_DATE:s.UPD_DATE}},i))})]})]})]}),(l===0||l===2)&&E.jsxs("div",{className:"NM2",children:[E.jsxs("div",{className:"title",children:["NM2 INSPECTION STATUS (",r.totalNormal+r.totalOLED+r.totalUV," người)"]}),E.jsxs("div",{className:"table",children:[E.jsxs("div",{className:"normal",children:[E.jsx("div",{className:"subtitle",children:E.jsxs("b",{children:["Hàng Thường: (",r.totalNormal," người đang kiểm tra)"]})}),E.jsx("div",{className:"submachine",children:_.filter(s=>s.KHUVUC==="N").map((s,i)=>E.jsx(d,{INS_DATA:{SEARCH_STRING:a,FACTORY:s.FACTORY,EQ_NAME:s.EQ_NAME,EMPL_COUNT:s.EMPL_COUNT,EQ_STATUS:s.EQ_STATUS,CURR_PLAN_ID:s.CURR_PLAN_ID,CURR_G_CODE:s.CURR_G_CODE,G_NAME:s.G_NAME,G_NAME_KD:s.G_NAME_KD,REMARK:s.REMARK,INS_EMPL:s.INS_EMPL,INS_DATE:s.INS_DATE,UPD_EMPL:s.UPD_EMPL,UPD_DATE:s.UPD_DATE}},i))})]}),E.jsxs("div",{className:"oled",children:[E.jsx("div",{className:"subtitle",children:E.jsxs("b",{children:["OLED: (",r.totalOLED," người đang kiểm tra)"]})}),E.jsx("div",{className:"submachine",children:_.filter(s=>s.KHUVUC==="O").map((s,i)=>E.jsx(d,{INS_DATA:{SEARCH_STRING:a,FACTORY:s.FACTORY,EQ_NAME:s.EQ_NAME,EMPL_COUNT:s.EMPL_COUNT,EQ_STATUS:s.EQ_STATUS,CURR_PLAN_ID:s.CURR_PLAN_ID,CURR_G_CODE:s.CURR_G_CODE,G_NAME:s.G_NAME,G_NAME_KD:s.G_NAME_KD,REMARK:s.REMARK,INS_EMPL:s.INS_EMPL,INS_DATE:s.INS_DATE,UPD_EMPL:s.UPD_EMPL,UPD_DATE:s.UPD_DATE}},i))})]}),E.jsxs("div",{className:"uv",children:[E.jsx("div",{className:"subtitle",children:E.jsxs("b",{children:["UV: (",r.totalUV," người đang kiểm tra)"]})}),E.jsx("div",{className:"submachine",children:_.filter(s=>s.KHUVUC==="U").map((s,i)=>E.jsx(d,{INS_DATA:{SEARCH_STRING:a,FACTORY:s.FACTORY,EQ_NAME:s.EQ_NAME,EMPL_COUNT:s.EMPL_COUNT,EQ_STATUS:s.EQ_STATUS,CURR_PLAN_ID:s.CURR_PLAN_ID,CURR_G_CODE:s.CURR_G_CODE,G_NAME:s.G_NAME,G_NAME_KD:s.G_NAME_KD,REMARK:s.REMARK,INS_EMPL:s.INS_EMPL,INS_DATE:s.INS_DATE,UPD_EMPL:s.UPD_EMPL,UPD_DATE:s.UPD_DATE}},i))})]})]})]})]})]})};export{e as default};
