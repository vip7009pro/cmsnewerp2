var qt=Object.defineProperty;var Gt=(e,t,n)=>t in e?qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var je=(e,t,n)=>(Gt(e,typeof t!="symbol"?t+"":t,n),n),at=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var L=(e,t,n)=>(at(e,t,"read from private field"),n?n.call(e):t.get(e)),ce=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},me=(e,t,n,i)=>(at(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),ot=(e,t,n,i)=>({set _(r){me(e,t,r,n)},get _(){return L(e,t,i)}}),ue=(e,t,n)=>(at(e,t,"access private method"),n);import{k as useSelector,r as reactExports,j as jsxRuntimeExports,ai as hooks,ad as generalQuery}from"./index-4ab6dde0.js";import{B as Barcode}from"./index-7be2e040.js";const YCSXComponent$1="",YCSXComponent=({G_CODE:e,PROD_TYPE:t,PROD_MAIN_MATERIAL:n,G_NAME:i,EMPL_NAME:r,EMPL_NO:s,CUST_NAME_KD:o,CUST_CD:m,PROD_REQUEST_NO:A,PROD_REQUEST_DATE:l,PROD_REQUEST_QTY:_,LOT_TOTAL_INPUT_QTY_EA:P,LOT_TOTAL_OUTPUT_QTY_EA:w,INSPECT_BALANCE:E,SHORTAGE_YCSX:p,YCSX_PENDING:a,PHAN_LOAI:h,REMARK:d,PO_TDYCSX:R,TOTAL_TKHO_TDYCSX:x,TKHO_TDYCSX:f,BTP_TDYCSX:c,CK_TDYCSX:u,BLOCK_TDYCSX:y,FCST_TDYCSX:O,W1:M,W2:S,W3:F,W4:Q,W5:re,W6:J,W7:V,W8:z,PDUYET:q,LOAIXH:Y,PDBV:ie,PDBV_EMPL:oe,PDBV_DATE:be,DESCR:$})=>{var k,D,N,W,se,de,te,le,ne,he,pe,U,fe,ve,ye,Te,Ce,De,Oe,ze,Me,Fe,Xe,ae,_e,ee,G,Z,ge,Ee,Ae,Se,Pe,Ie,ke,Re,Ne,Le,Be;const T=useSelector(xe=>xe.totalSlice.userData);reactExports.useState([{M_CODE:"string",M_NAME:"string",WIDTH_CD:0,TON_DAU:0,INPUT:0,OUTPUT:0,RETURN_IN:0,HOLDING:0,GRAND_TOTAL:0}]);const[b,I]=reactExports.useState({G_CODE:"",CHO_KIEM:0,CHO_CS_CHECK:0,CHO_KIEM_RMA:0,TONG_TON_KIEM:0,BTP:0,TON_TP:0,BLOCK_QTY:0,GRAND_TOTAL_STOCK:0}),[B,H]=reactExports.useState({G_CODE:"",PO_BALANCE:0}),[j,K]=reactExports.useState([{REMK:"20220617",PROD_REQUEST_QTY:18e3,PROD_REQUEST_NO:"2FH0078",PROD_REQUEST_DATE:"20220617",G_CODE:"7A07975A",DELIVERY_DT:"20220620",CODE_55:"03",CODE_50:"02",RIV_NO:"A",M_QTY:1,M_CODE:"A0009027",CUST_NAME:"",ROLE_EA_QTY:2e3,PACK_DRT:"",PROD_PRINT_TIMES:1,G_WIDTH:28.6,G_SG_R:2,G_SG_L:2,G_R:0,G_NAME:"",G_LG:3,G_LENGTH:23,G_CODE_C:"",G_CG:4,G_C:1,G_C_R:4,PD:31.6,CODE_33:"02",M_NAME:"",WIDTH_CD:110,EMPL_NO:"",EMPL_NAME:"",CODE_03:"01",REMARK:"",TONLIEU:0,HOLDING:0,TONG_TON_LIEU:0,PO_TYPE:"E1",PROD_MAIN_MATERIAL:"",LIEUQL_SX:0,FSC:"N"}]),[X,g]=reactExports.useState(!1),C=async()=>{let xe="202207";await generalQuery("check_inventorydate",{G_CODE:e}).then(we=>{we.data.tk_status!=="NG"&&(xe=we.data.data[0].INVENTORY_DATE)}).catch(we=>{console.log(we)}),generalQuery("ycsx_fullinfo",{PROD_REQUEST_NO:A,TRADATE:hooks(xe).format("YYYY-MM-DD 08:00:00"),INVENTORY:xe}).then(we=>{if(we.data.tk_status!=="NG"){for(let He=0;He<we.data.data.length;He++)we.data.data[He].PROD_MAIN_MATERIAL===we.data.data[He].M_NAME&&we.data.data[He].LIEUQL_SX===1&&g(!0);K(we.data.data)}else K([{REMK:"",PROD_REQUEST_QTY:0,PROD_REQUEST_NO:"",PROD_REQUEST_DATE:"",G_CODE:"",DELIVERY_DT:"",CODE_55:"03",CODE_50:"02",RIV_NO:"",M_QTY:1,M_CODE:"",CUST_NAME:"",ROLE_EA_QTY:0,PACK_DRT:"",PROD_PRINT_TIMES:0,G_WIDTH:0,G_SG_R:0,G_SG_L:0,G_R:0,G_NAME:"",G_LG:0,G_LENGTH:0,G_CODE_C:"",G_CG:0,G_C:0,G_C_R:0,PD:0,CODE_33:"02",M_NAME:"",WIDTH_CD:0,EMPL_NO:"",EMPL_NAME:"",CODE_03:"01",REMARK:"",TONLIEU:0,HOLDING:0,TONG_TON_LIEU:0,NO_INSPECTION:"N",PROD_MAIN_MATERIAL:"",LIEUQL_SX:0,FSC:"N"}])}).catch(we=>{console.log(we)}),generalQuery("checkpobalance_tdycsx",{G_CODE:e}).then(we=>{we.data.tk_status!=="NG"&&H(we.data.data[0])}).catch(we=>{console.log(we)}),generalQuery("checktonkho_tdycsx",{G_CODE:e}).then(we=>{we.data.tk_status!=="NG"&&I(we.data.data[0])}).catch(we=>{console.log(we)})};return reactExports.useEffect(()=>{C()},[A]),console.log(oe),console.log(ie),jsxRuntimeExports.jsxs("div",{className:"ycsxcomponent",children:[ie==="Y"&&X===!0&&jsxRuntimeExports.jsx("div",{className:"qcpass",children:jsxRuntimeExports.jsx("img",{alt:"qcpass",src:"/QC PASS20.png",width:440-100-10,height:400-100})}),((k=j[0])==null?void 0:k.FSC)==="Y"&&jsxRuntimeExports.jsx("div",{className:"fsc",children:jsxRuntimeExports.jsx("img",{alt:"qcpass",src:"/fsc logo2.png",width:440-100-10,height:400-100})}),j[0].PDUYET&&jsxRuntimeExports.jsxs("div",{className:"tieudeycsx",children:[jsxRuntimeExports.jsx("img",{alt:"logo",src:"/logocmsvina.png",width:160,height:40}),jsxRuntimeExports.jsxs("div",{className:"title",children:[" 생산요청서 - Yêu cầu sản xuất",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{style:{fontSize:12},children:["Thời điểm in YCSX: ",hooks().format("YYYY-MM-DD HH:mm:ss")]}),jsxRuntimeExports.jsx("br",{})," ",j[0].NO_INSPECTION==="Y"&&jsxRuntimeExports.jsx("span",{style:{fontSize:12},children:"(Sản phẩm không kiểm tra ngoại quan)"})]}),jsxRuntimeExports.jsxs("div",{className:"soycsx",children:[jsxRuntimeExports.jsxs("div",{className:"ycsxno",children:[j[0].PROD_REQUEST_DATE,"-",j[0].PROD_REQUEST_NO," "]}),jsxRuntimeExports.jsx("div",{className:"ycsxbarcode",children:jsxRuntimeExports.jsx(Barcode,{value:(D=j[0])==null?void 0:D.PROD_REQUEST_NO,format:"CODE128",width:1,height:50,displayValue:!1,background:"#fff",lineColor:"black",margin:0})})]})]}),j[0].PDUYET&&jsxRuntimeExports.jsxs("div",{className:"thongtinycsx",children:[jsxRuntimeExports.jsxs("div",{className:"text1",children:["1. 정보 Thông tin(",j[0].G_NAME," ) _ PO_TYPE: (",(N=j[0])==null?void 0:N.PO_TYPE," ) "]}),jsxRuntimeExports.jsxs("div",{className:"thongtinyeucau",children:[jsxRuntimeExports.jsxs("table",{className:"ttyc1",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Hạng mục/항목"}),jsxRuntimeExports.jsx("th",{children:"Thông tin/정보"})]})}),jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Người yêu cầu/요청자"}),jsxRuntimeExports.jsx("td",{children:(W=j[0])==null?void 0:W.EMPL_NAME})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Khách hàng/고객사"}),jsxRuntimeExports.jsx("td",{children:(se=j[0])==null?void 0:se.CUST_NAME})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Mã sản phẩm/제품코드"}),jsxRuntimeExports.jsx("td",{children:(de=j[0])==null?void 0:de.G_CODE})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Tên sản phẩm/제품명"}),jsxRuntimeExports.jsx("td",{children:(te=j[0])==null?void 0:te.G_NAME})]})]})]}),jsxRuntimeExports.jsxs("table",{className:"ttyc2",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Hạng mục/항목"}),jsxRuntimeExports.jsx("th",{children:"Thông tin/정보"})]})}),jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Số lượng yêu cầu/요청수량"}),jsxRuntimeExports.jsxs("td",{children:[(le=j[0])==null?void 0:le.PROD_REQUEST_QTY.toLocaleString("en-US")," EA"]})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Số lượng tồn/재고수량"}),jsxRuntimeExports.jsxs("td",{children:[((b==null?void 0:b.CHO_KIEM)+(b==null?void 0:b.CHO_KIEM_RMA)+(b==null?void 0:b.CHO_KIEM_RMA)+(b==null?void 0:b.TON_TP)+(b==null?void 0:b.BTP)-(b==null?void 0:b.BLOCK_QTY)).toLocaleString("en-US")," EA"]})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Số lượng giao/납품수량"}),jsxRuntimeExports.jsx("td",{children:(ne=j[0])==null?void 0:ne.PROD_REQUEST_QTY.toLocaleString("en-US")})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Ngày giao/납품예정일"}),jsxRuntimeExports.jsx("td",{children:hooks((he=j[0])==null?void 0:he.DELIVERY_DT).format("YYYY-MM-DD")})]})]})]}),jsxRuntimeExports.jsxs("table",{className:"ttyc3",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Hạng mục/항목"}),jsxRuntimeExports.jsx("th",{children:"Thông tin/정보"})]})}),jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Phân loại sản xuất/생산구분"}),jsxRuntimeExports.jsx("td",{children:((pe=j[0])==null?void 0:pe.CODE_55)==="01"?"Thông thường":((U=j[0])==null?void 0:U.CODE_55)==="02"?"SDI":((fe=j[0])==null?void 0:fe.CODE_55)==="03"?"ETC":((ve=j[0])==null?void 0:ve.CODE_55)==="04"?"SAMPLE":""})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Phân loại giao hàng/납품구분"}),jsxRuntimeExports.jsx("td",{children:((ye=j[0])==null?void 0:ye.CODE_50)==="01"?"GC":((Te=j[0])==null?void 0:Te.CODE_50)==="02"?"SK":((Ce=j[0])==null?void 0:Ce.CODE_50)==="03"?"KD":((De=j[0])==null?void 0:De.CODE_50)==="04"?"VN":((Oe=j[0])==null?void 0:Oe.CODE_50)==="05"?"SAMPLE":((ze=j[0])==null?void 0:ze.CODE_50)==="06"?"Vai bac 4":"ETC"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"text1",children:["2. 제품 정보 Thông tin sản phẩm  _",((Me=j[0])==null?void 0:Me.FSC)==="Y"?"(FSC Mix Credit)":""," ",jsxRuntimeExports.jsxs("span",{className:"approval_info",children:["(Specification: ",$,") "]})]}),jsxRuntimeExports.jsxs("div",{className:"thongtinsanpham",children:[jsxRuntimeExports.jsxs("div",{className:"ttsp",children:[jsxRuntimeExports.jsxs("table",{children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Hạng mục/항목"}),jsxRuntimeExports.jsx("th",{children:"Thông tin/정보"})]})}),jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Dài SP"}),jsxRuntimeExports.jsxs("td",{children:[(Fe=j[0])==null?void 0:Fe.G_LENGTH," mm"]})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Rộng SP"}),jsxRuntimeExports.jsxs("td",{children:[(Xe=j[0])==null?void 0:Xe.G_WIDTH," mm"]})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"P/D"}),jsxRuntimeExports.jsxs("td",{children:[(ae=j[0])==null?void 0:ae.PD," mm"]})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Số hàng SP"}),jsxRuntimeExports.jsxs("td",{children:[(_e=j[0])==null?void 0:_e.G_C_R," EA"]})]})]})]}),jsxRuntimeExports.jsxs("table",{children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Hạng mục/항목"}),jsxRuntimeExports.jsx("th",{children:"Thông tin/정보"})]})}),jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Type"}),jsxRuntimeExports.jsx("td",{children:((ee=j[0])==null?void 0:ee.CODE_33)==="01"?"EA":((G=j[0])==null?void 0:G.CODE_33)==="02"?"ROLL":((Z=j[0])==null?void 0:Z.CODE_33)==="03"?"SHEET":((ge=j[0])==null?void 0:ge.CODE_33)==="04"?"MET":((Ee=j[0])==null?void 0:Ee.CODE_33)==="06"?"PACK (BAG)":((Ae=j[0])==null?void 0:Ae.CODE_33)==="99"?"X":""})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"SL Packing"}),jsxRuntimeExports.jsxs("td",{children:[(Se=j[0])==null?void 0:Se.ROLE_EA_QTY.toLocaleString("en-US")," EA"]})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Số lần in"}),jsxRuntimeExports.jsx("td",{children:(Pe=j[0])==null?void 0:Pe.PROD_PRINT_TIMES})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Số cột SP"}),jsxRuntimeExports.jsxs("td",{children:[(Ie=j[0])==null?void 0:Ie.G_C,"EA"]})]})]})]}),jsxRuntimeExports.jsxs("table",{children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Hạng mục/항목"}),jsxRuntimeExports.jsx("th",{children:"Thông tin/정보"})]})}),jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Khoảng cách hàng"}),jsxRuntimeExports.jsxs("td",{children:[(ke=j[0])==null?void 0:ke.G_LG," mm"]})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Khoảng cách cột"}),jsxRuntimeExports.jsxs("td",{children:[(Re=j[0])==null?void 0:Re.G_CG," mm"]})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"K/C liner trái"}),jsxRuntimeExports.jsxs("td",{children:[(Ne=j[0])==null?void 0:Ne.G_SG_L," mm"]})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"K/C liner phải"}),jsxRuntimeExports.jsxs("td",{children:[(Le=j[0])==null?void 0:Le.G_SG_R," mm"]})]})]})]}),jsxRuntimeExports.jsxs("table",{children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Hạng mục/항목"}),jsxRuntimeExports.jsx("th",{children:"Thông tin/정보"})]})}),jsxRuntimeExports.jsx("tbody",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Ghi chú"}),jsxRuntimeExports.jsx("td",{children:(Be=j[0])==null?void 0:Be.REMK})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"title",children:["Tồn các loại tại thời điểm IN YCSX",jsxRuntimeExports.jsxs("span",{className:"approval_info",children:["     TK IN: ",T==null?void 0:T.EMPL_NO]}),"  ",ie==="Y"&&jsxRuntimeExports.jsxs("span",{className:"approval_info",children:[" | (TTPD_YCSX_BV: ",oe," | ",hooks.utc(be).format("YYYY-MM-DD HH:mm:ss"),")"]})]}),jsxRuntimeExports.jsx("div",{className:"toncacloai",children:jsxRuntimeExports.jsxs("table",{children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Thành phẩm/완제품"}),jsxRuntimeExports.jsx("th",{children:"Bán thành phẩm/반제품"}),jsxRuntimeExports.jsx("th",{children:"Chờ kiểm/검사대기"}),jsxRuntimeExports.jsx("th",{children:"Chờ CS check/CS확인대기"}),jsxRuntimeExports.jsx("th",{children:"Chờ Sorting RMA/RMA선별대기"}),jsxRuntimeExports.jsx("th",{children:"Tổng chờ kiểm/총 검사대기"}),jsxRuntimeExports.jsx("th",{children:"Block/블록"}),jsxRuntimeExports.jsx("th",{children:"Grand Total"})]})}),jsxRuntimeExports.jsx("tbody",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:b==null?void 0:b.TON_TP.toLocaleString("en-US")}),jsxRuntimeExports.jsx("td",{children:b==null?void 0:b.BTP.toLocaleString("en-US")}),jsxRuntimeExports.jsx("td",{children:b==null?void 0:b.CHO_KIEM.toLocaleString("en-US")}),jsxRuntimeExports.jsx("td",{children:b==null?void 0:b.CHO_CS_CHECK.toLocaleString("en-US")}),jsxRuntimeExports.jsx("td",{children:b==null?void 0:b.CHO_KIEM_RMA.toLocaleString("en-US")}),jsxRuntimeExports.jsx("td",{children:((b==null?void 0:b.CHO_KIEM)+(b==null?void 0:b.CHO_KIEM_RMA)+(b==null?void 0:b.CHO_KIEM_RMA)).toLocaleString("en-US")}),jsxRuntimeExports.jsx("td",{children:b==null?void 0:b.BLOCK_QTY.toLocaleString("en-US")}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("b",{children:((b==null?void 0:b.CHO_KIEM)+(b==null?void 0:b.CHO_KIEM_RMA)+(b==null?void 0:b.CHO_KIEM_RMA)+(b==null?void 0:b.TON_TP)+(b==null?void 0:b.BTP)-(b==null?void 0:b.BLOCK_QTY)).toLocaleString("en-US")})})]})})]})})]}),jsxRuntimeExports.jsx("div",{className:"text1",children:"3.금형 필름 정보 Thông tin dao film"}),jsxRuntimeExports.jsx("div",{className:"thongtindaofilm",children:jsxRuntimeExports.jsxs("table",{children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"hangmuc",children:"Hạng mục/항목"}),jsxRuntimeExports.jsx("th",{children:"Thông tin/정보"})]})}),jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"hangmuc",children:"Mã Dao"}),jsxRuntimeExports.jsx("td",{})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"hangmuc",children:"Mã Film"}),jsxRuntimeExports.jsx("td",{})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"text1",children:["4. 제품 정보 Thông tin vật liệu | Liệu chính ",j[0].PROD_MAIN_MATERIAL," | ",X===!0?"Đã SET":"Chưa SET"," "]}),jsxRuntimeExports.jsxs("div",{className:"thongtinvatlieu",children:[j.length<=12&&jsxRuntimeExports.jsx("div",{className:"vatlieugiua",children:jsxRuntimeExports.jsxs("table",{children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"No"}),jsxRuntimeExports.jsx("th",{children:"Mã Liệu/원단코드"}),jsxRuntimeExports.jsx("th",{children:"Tên Liệu/원단명"}),jsxRuntimeExports.jsx("th",{children:"Size Liệu/원단폭"}),jsxRuntimeExports.jsx("th",{children:"Tồn liệu/원단재고"}),jsxRuntimeExports.jsx("th",{children:"Tồn block/블록재고"}),jsxRuntimeExports.jsx("th",{children:"Tổng tồn liệu/총 재고"}),jsxRuntimeExports.jsx("th",{children:"Ghi chú/비고"})]})}),jsxRuntimeExports.jsx("tbody",{children:j.map((xe,we)=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:we}),jsxRuntimeExports.jsx("td",{children:xe.M_CODE}),jsxRuntimeExports.jsx("td",{children:xe.M_NAME}),jsxRuntimeExports.jsx("td",{children:xe.WIDTH_CD}),jsxRuntimeExports.jsxs("td",{children:[xe.TONLIEU.toLocaleString("en-US")," M"]}),jsxRuntimeExports.jsxs("td",{children:[xe.HOLDING.toLocaleString("en-US")," M"]}),jsxRuntimeExports.jsxs("td",{children:[xe.TONG_TON_LIEU.toLocaleString("en-US")," M"]}),jsxRuntimeExports.jsx("td",{children:xe.REMARK})]},we))})]})}),j.length>12&&jsxRuntimeExports.jsx("div",{className:"vatlieutrai",children:jsxRuntimeExports.jsxs("table",{children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"No"}),jsxRuntimeExports.jsx("th",{children:"Mã Liệu/원단코드"}),jsxRuntimeExports.jsx("th",{children:"Tên Liệu/원단명"}),jsxRuntimeExports.jsx("th",{children:"Size Liệu/원단폭"}),jsxRuntimeExports.jsx("th",{children:"Tồn liệu/원단재고"}),jsxRuntimeExports.jsx("th",{children:"Tồn block/블록재고"}),jsxRuntimeExports.jsx("th",{children:"Tổng tồn liệu/총 재고"}),jsxRuntimeExports.jsx("th",{children:"Ghi chú/비고"})]})}),jsxRuntimeExports.jsx("tbody",{children:j.map((xe,we)=>we<=12&&jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:we}),jsxRuntimeExports.jsx("td",{children:xe.M_CODE}),jsxRuntimeExports.jsx("td",{children:xe.M_NAME}),jsxRuntimeExports.jsx("td",{children:xe.WIDTH_CD}),jsxRuntimeExports.jsxs("td",{children:[xe.TONLIEU.toLocaleString("en-US")," M"]}),jsxRuntimeExports.jsxs("td",{children:[xe.HOLDING.toLocaleString("en-US")," M"]}),jsxRuntimeExports.jsxs("td",{children:[xe.TONG_TON_LIEU.toLocaleString("en-US")," M"]}),jsxRuntimeExports.jsx("td",{children:xe.REMARK})]},we))})]})}),j.length>12&&jsxRuntimeExports.jsx("div",{className:"vatlieuphai",children:jsxRuntimeExports.jsxs("table",{children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"No"}),jsxRuntimeExports.jsx("th",{children:"Mã Liệu/원단코드"}),jsxRuntimeExports.jsx("th",{children:"Tên Liệu/원단명"}),jsxRuntimeExports.jsx("th",{children:"Size Liệu/원단폭"}),jsxRuntimeExports.jsx("th",{children:"Tồn liệu/원단재고"}),jsxRuntimeExports.jsx("th",{children:"Tồn block/블록재고"}),jsxRuntimeExports.jsx("th",{children:"Tổng tồn liệu/총 재고"}),jsxRuntimeExports.jsx("th",{children:"Ghi chú/비고"})]})}),jsxRuntimeExports.jsx("tbody",{children:j.map((xe,we)=>we>12&&jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:we}),jsxRuntimeExports.jsx("td",{children:xe.M_CODE}),jsxRuntimeExports.jsx("td",{children:xe.M_NAME}),jsxRuntimeExports.jsx("td",{children:xe.WIDTH_CD}),jsxRuntimeExports.jsxs("td",{children:[xe.TONLIEU.toLocaleString("en-US")," M"]}),jsxRuntimeExports.jsxs("td",{children:[xe.HOLDING.toLocaleString("en-US")," M"]}),jsxRuntimeExports.jsxs("td",{children:[xe.TONG_TON_LIEU.toLocaleString("en-US")," M"]}),jsxRuntimeExports.jsx("td",{children:xe.REMARK})]},we))})]})})]})]})]})},DrawComponent$1="";function getAugmentedNamespace(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}var global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;typeof global$1.setTimeout=="function"&&(cachedSetTimeout=setTimeout);typeof global$1.clearTimeout=="function"&&(cachedClearTimeout=clearTimeout);function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch{try{return cachedSetTimeout.call(null,e,0)}catch{return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch{try{return cachedClearTimeout.call(null,e)}catch{return cachedClearTimeout.call(this,e)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function nextTick(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];queue.push(new Item(e,t)),queue.length===1&&!draining&&runTimeout(drainQueue)}function Item(e,t){this.fun=e,this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform="browser",browser=!0,env={},argv=[],version="",versions={},release={},config={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding$1(e){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(e){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance=global$1.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return new Date().getTime()};function hrtime(e){var t=performanceNow.call(performance)*.001,n=Math.floor(t),i=Math.floor(t%1*1e9);return e&&(n=n-e[0],i=i-e[1],i<0&&(n--,i+=1e9)),[n,i]}var startTime=new Date;function uptime(){var e=new Date,t=e-startTime;return t/1e3}var browser$1={nextTick,title,browser,env,argv,version,versions,on,addListener,once,off,removeListener,removeAllListeners,emit,binding:binding$1,cwd,chdir,umask,hrtime,platform,release,config,uptime},lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)lookup[t]=e[t],revLookup[e.charCodeAt(t)]=t;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(e){inited||init();var t,n,i,r,s,o,m=e.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=e[m-2]==="="?2:e[m-1]==="="?1:0,o=new Arr(m*3/4-s),i=s>0?m-4:m;var A=0;for(t=0,n=0;t<i;t+=4,n+=3)r=revLookup[e.charCodeAt(t)]<<18|revLookup[e.charCodeAt(t+1)]<<12|revLookup[e.charCodeAt(t+2)]<<6|revLookup[e.charCodeAt(t+3)],o[A++]=r>>16&255,o[A++]=r>>8&255,o[A++]=r&255;return s===2?(r=revLookup[e.charCodeAt(t)]<<2|revLookup[e.charCodeAt(t+1)]>>4,o[A++]=r&255):s===1&&(r=revLookup[e.charCodeAt(t)]<<10|revLookup[e.charCodeAt(t+1)]<<4|revLookup[e.charCodeAt(t+2)]>>2,o[A++]=r>>8&255,o[A++]=r&255),o}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[e&63]}function encodeChunk(e,t,n){for(var i,r=[],s=t;s<n;s+=3)i=(e[s]<<16)+(e[s+1]<<8)+e[s+2],r.push(tripletToBase64(i));return r.join("")}function fromByteArray(e){inited||init();for(var t,n=e.length,i=n%3,r="",s=[],o=16383,m=0,A=n-i;m<A;m+=o)s.push(encodeChunk(e,m,m+o>A?A:m+o));return i===1?(t=e[n-1],r+=lookup[t>>2],r+=lookup[t<<4&63],r+="=="):i===2&&(t=(e[n-2]<<8)+e[n-1],r+=lookup[t>>10],r+=lookup[t>>4&63],r+=lookup[t<<2&63],r+="="),s.push(r),s.join("")}function read(e,t,n,i,r){var s,o,m=r*8-i-1,A=(1<<m)-1,l=A>>1,_=-7,P=n?r-1:0,w=n?-1:1,E=e[t+P];for(P+=w,s=E&(1<<-_)-1,E>>=-_,_+=m;_>0;s=s*256+e[t+P],P+=w,_-=8);for(o=s&(1<<-_)-1,s>>=-_,_+=i;_>0;o=o*256+e[t+P],P+=w,_-=8);if(s===0)s=1-l;else{if(s===A)return o?NaN:(E?-1:1)*(1/0);o=o+Math.pow(2,i),s=s-l}return(E?-1:1)*o*Math.pow(2,s-i)}function write(e,t,n,i,r,s){var o,m,A,l=s*8-r-1,_=(1<<l)-1,P=_>>1,w=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=i?0:s-1,p=i?1:-1,a=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(m=isNaN(t)?1:0,o=_):(o=Math.floor(Math.log(t)/Math.LN2),t*(A=Math.pow(2,-o))<1&&(o--,A*=2),o+P>=1?t+=w/A:t+=w*Math.pow(2,1-P),t*A>=2&&(o++,A/=2),o+P>=_?(m=0,o=_):o+P>=1?(m=(t*A-1)*Math.pow(2,r),o=o+P):(m=t*Math.pow(2,P-1)*Math.pow(2,r),o=0));r>=8;e[n+E]=m&255,E+=p,m/=256,r-=8);for(o=o<<r|m,l+=r;l>0;e[n+E]=o&255,E+=p,o/=256,l-=8);e[n+E-p]|=a*128}var toString={}.toString,isArray$2=Array.isArray||function(e){return toString.call(e)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT!==void 0?global$1.TYPED_ARRAY_SUPPORT:!0;kMaxLength();function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=Buffer.prototype):(e===null&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,n){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer))return new Buffer(e,t,n);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,n)}Buffer.poolSize=8192;Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e};function from(e,t,n,i){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,n,i):typeof t=="string"?fromString(e,t,n):fromObject(e,t)}Buffer.from=function(e,t,n){return from(null,e,t,n)};Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array);function assertSize(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,n,i){return assertSize(t),t<=0?createBuffer(e,t):n!==void 0?typeof i=="string"?createBuffer(e,t).fill(n,i):createBuffer(e,t).fill(n):createBuffer(e,t)}Buffer.alloc=function(e,t,n){return alloc(null,e,t,n)};function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:checked(t)|0),!Buffer.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)};Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)};function fromString(e,t,n){if((typeof n!="string"||n==="")&&(n="utf8"),!Buffer.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=byteLength(t,n)|0;e=createBuffer(e,i);var r=e.write(t,n);return r!==i&&(e=e.slice(0,r)),e}function fromArrayLike(e,t){var n=t.length<0?0:checked(t.length)|0;e=createBuffer(e,n);for(var i=0;i<n;i+=1)e[i]=t[i]&255;return e}function fromArrayBuffer(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return n===void 0&&i===void 0?t=new Uint8Array(t):i===void 0?t=new Uint8Array(t,n):t=new Uint8Array(t,n,i),Buffer.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=Buffer.prototype):e=fromArrayLike(e,t),e}function fromObject(e,t){if(internalIsBuffer(t)){var n=checked(t.length)|0;return e=createBuffer(e,n),e.length===0||t.copy(e,0,0,n),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||isnan(t.length)?createBuffer(e,0):fromArrayLike(e,t);if(t.type==="Buffer"&&isArray$2(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return e|0}Buffer.isBuffer=isBuffer;function internalIsBuffer(e){return!!(e!=null&&e._isBuffer)}Buffer.compare=function(t,n){if(!internalIsBuffer(t)||!internalIsBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var i=t.length,r=n.length,s=0,o=Math.min(i,r);s<o;++s)if(t[s]!==n[s]){i=t[s],r=n[s];break}return i<r?-1:r<i?1:0};Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer.concat=function(t,n){if(!isArray$2(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return Buffer.alloc(0);var i;if(n===void 0)for(n=0,i=0;i<t.length;++i)n+=t[i].length;var r=Buffer.allocUnsafe(n),s=0;for(i=0;i<t.length;++i){var o=t[i];if(!internalIsBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,s),s+=o.length}return r};function byteLength(e,t){if(internalIsBuffer(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var n=e.length;if(n===0)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(i)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),i=!0}}Buffer.byteLength=byteLength;function slowToString(e,t,n){var i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return asciiSlice(this,t,n);case"latin1":case"binary":return latin1Slice(this,t,n);case"base64":return base64Slice(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}Buffer.prototype._isBuffer=!0;function swap(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}Buffer.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<t;n+=2)swap(this,n,n+1);return this};Buffer.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<t;n+=4)swap(this,n,n+3),swap(this,n+1,n+2);return this};Buffer.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<t;n+=8)swap(this,n,n+7),swap(this,n+1,n+6),swap(this,n+2,n+5),swap(this,n+3,n+4);return this};Buffer.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?utf8Slice(this,0,t):slowToString.apply(this,arguments)};Buffer.prototype.equals=function(t){if(!internalIsBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:Buffer.compare(this,t)===0};Buffer.prototype.inspect=function(){var t="",n=INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"};Buffer.prototype.compare=function(t,n,i,r,s){if(!internalIsBuffer(t))throw new TypeError("Argument must be a Buffer");if(n===void 0&&(n=0),i===void 0&&(i=t?t.length:0),r===void 0&&(r=0),s===void 0&&(s=this.length),n<0||i>t.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&n>=i)return 0;if(r>=s)return-1;if(n>=i)return 1;if(n>>>=0,i>>>=0,r>>>=0,s>>>=0,this===t)return 0;for(var o=s-r,m=i-n,A=Math.min(o,m),l=this.slice(r,s),_=t.slice(n,i),P=0;P<A;++P)if(l[P]!==_[P]){o=l[P],m=_[P];break}return o<m?-1:m<o?1:0};function bidirectionalIndexOf(e,t,n,i,r){if(e.length===0)return-1;if(typeof n=="string"?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0)if(r)n=0;else return-1;if(typeof t=="string"&&(t=Buffer.from(t,i)),internalIsBuffer(t))return t.length===0?-1:arrayIndexOf(e,t,n,i,r);if(typeof t=="number")return t=t&255,Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,i,r){var s=1,o=e.length,m=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(e.length<2||t.length<2)return-1;s=2,o/=2,m/=2,n/=2}function A(E,p){return s===1?E[p]:E.readUInt16BE(p*s)}var l;if(r){var _=-1;for(l=n;l<o;l++)if(A(e,l)===A(t,_===-1?0:l-_)){if(_===-1&&(_=l),l-_+1===m)return _*s}else _!==-1&&(l-=l-_),_=-1}else for(n+m>o&&(n=o-m),l=n;l>=0;l--){for(var P=!0,w=0;w<m;w++)if(A(e,l+w)!==A(t,w)){P=!1;break}if(P)return l}return-1}Buffer.prototype.includes=function(t,n,i){return this.indexOf(t,n,i)!==-1};Buffer.prototype.indexOf=function(t,n,i){return bidirectionalIndexOf(this,t,n,i,!0)};Buffer.prototype.lastIndexOf=function(t,n,i){return bidirectionalIndexOf(this,t,n,i,!1)};function hexWrite(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var s=t.length;if(s%2!==0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var m=parseInt(t.substr(o*2,2),16);if(isNaN(m))return o;e[n+o]=m}return o}function utf8Write(e,t,n,i){return blitBuffer(utf8ToBytes(t,e.length-n),e,n,i)}function asciiWrite(e,t,n,i){return blitBuffer(asciiToBytes(t),e,n,i)}function latin1Write(e,t,n,i){return asciiWrite(e,t,n,i)}function base64Write(e,t,n,i){return blitBuffer(base64ToBytes(t),e,n,i)}function ucs2Write(e,t,n,i){return blitBuffer(utf16leToBytes(t,e.length-n),e,n,i)}Buffer.prototype.write=function(t,n,i,r){if(n===void 0)r="utf8",i=this.length,n=0;else if(i===void 0&&typeof n=="string")r=n,i=this.length,n=0;else if(isFinite(n))n=n|0,isFinite(i)?(i=i|0,r===void 0&&(r="utf8")):(r=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-n;if((i===void 0||i>s)&&(i=s),t.length>0&&(i<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return hexWrite(this,t,n,i);case"utf8":case"utf-8":return utf8Write(this,t,n,i);case"ascii":return asciiWrite(this,t,n,i);case"latin1":case"binary":return latin1Write(this,t,n,i);case"base64":return base64Write(this,t,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,n,i);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}};Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(e,t,n){return t===0&&n===e.length?fromByteArray(e):fromByteArray(e.slice(t,n))}function utf8Slice(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var s=e[r],o=null,m=s>239?4:s>223?3:s>191?2:1;if(r+m<=n){var A,l,_,P;switch(m){case 1:s<128&&(o=s);break;case 2:A=e[r+1],(A&192)===128&&(P=(s&31)<<6|A&63,P>127&&(o=P));break;case 3:A=e[r+1],l=e[r+2],(A&192)===128&&(l&192)===128&&(P=(s&15)<<12|(A&63)<<6|l&63,P>2047&&(P<55296||P>57343)&&(o=P));break;case 4:A=e[r+1],l=e[r+2],_=e[r+3],(A&192)===128&&(l&192)===128&&(_&192)===128&&(P=(s&15)<<18|(A&63)<<12|(l&63)<<6|_&63,P>65535&&P<1114112&&(o=P))}}o===null?(o=65533,m=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|o&1023),i.push(o),r+=m}return decodeCodePointsArray(i)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=MAX_ARGUMENTS_LENGTH));return n}function asciiSlice(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]&127);return i}function latin1Slice(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function hexSlice(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",s=t;s<n;++s)r+=toHex(e[s]);return r}function utf16leSlice(e,t,n){for(var i=e.slice(t,n),r="",s=0;s<i.length;s+=2)r+=String.fromCharCode(i[s]+i[s+1]*256);return r}Buffer.prototype.slice=function(t,n){var i=this.length;t=~~t,n=n===void 0?i:~~n,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),n<0?(n+=i,n<0&&(n=0)):n>i&&(n=i),n<t&&(n=t);var r;if(Buffer.TYPED_ARRAY_SUPPORT)r=this.subarray(t,n),r.__proto__=Buffer.prototype;else{var s=n-t;r=new Buffer(s,void 0);for(var o=0;o<s;++o)r[o]=this[o+t]}return r};function checkOffset(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function(t,n,i){t=t|0,n=n|0,i||checkOffset(t,n,this.length);for(var r=this[t],s=1,o=0;++o<n&&(s*=256);)r+=this[t+o]*s;return r};Buffer.prototype.readUIntBE=function(t,n,i){t=t|0,n=n|0,i||checkOffset(t,n,this.length);for(var r=this[t+--n],s=1;n>0&&(s*=256);)r+=this[t+--n]*s;return r};Buffer.prototype.readUInt8=function(t,n){return n||checkOffset(t,1,this.length),this[t]};Buffer.prototype.readUInt16LE=function(t,n){return n||checkOffset(t,2,this.length),this[t]|this[t+1]<<8};Buffer.prototype.readUInt16BE=function(t,n){return n||checkOffset(t,2,this.length),this[t]<<8|this[t+1]};Buffer.prototype.readUInt32LE=function(t,n){return n||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};Buffer.prototype.readUInt32BE=function(t,n){return n||checkOffset(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};Buffer.prototype.readIntLE=function(t,n,i){t=t|0,n=n|0,i||checkOffset(t,n,this.length);for(var r=this[t],s=1,o=0;++o<n&&(s*=256);)r+=this[t+o]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*n)),r};Buffer.prototype.readIntBE=function(t,n,i){t=t|0,n=n|0,i||checkOffset(t,n,this.length);for(var r=n,s=1,o=this[t+--r];r>0&&(s*=256);)o+=this[t+--r]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*n)),o};Buffer.prototype.readInt8=function(t,n){return n||checkOffset(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};Buffer.prototype.readInt16LE=function(t,n){n||checkOffset(t,2,this.length);var i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i};Buffer.prototype.readInt16BE=function(t,n){n||checkOffset(t,2,this.length);var i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i};Buffer.prototype.readInt32LE=function(t,n){return n||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};Buffer.prototype.readInt32BE=function(t,n){return n||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};Buffer.prototype.readFloatLE=function(t,n){return n||checkOffset(t,4,this.length),read(this,t,!0,23,4)};Buffer.prototype.readFloatBE=function(t,n){return n||checkOffset(t,4,this.length),read(this,t,!1,23,4)};Buffer.prototype.readDoubleLE=function(t,n){return n||checkOffset(t,8,this.length),read(this,t,!0,52,8)};Buffer.prototype.readDoubleBE=function(t,n){return n||checkOffset(t,8,this.length),read(this,t,!1,52,8)};function checkInt(e,t,n,i,r,s){if(!internalIsBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<s)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function(t,n,i,r){if(t=+t,n=n|0,i=i|0,!r){var s=Math.pow(2,8*i)-1;checkInt(this,t,n,i,s,0)}var o=1,m=0;for(this[n]=t&255;++m<i&&(o*=256);)this[n+m]=t/o&255;return n+i};Buffer.prototype.writeUIntBE=function(t,n,i,r){if(t=+t,n=n|0,i=i|0,!r){var s=Math.pow(2,8*i)-1;checkInt(this,t,n,i,s,0)}var o=i-1,m=1;for(this[n+o]=t&255;--o>=0&&(m*=256);)this[n+o]=t/m&255;return n+i};Buffer.prototype.writeUInt8=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=t&255,n+1};function objectWriteUInt16(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,s=Math.min(e.length-n,2);r<s;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>(i?r:1-r)*8}Buffer.prototype.writeUInt16LE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8):objectWriteUInt16(this,t,n,!0),n+2};Buffer.prototype.writeUInt16BE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t&255):objectWriteUInt16(this,t,n,!1),n+2};function objectWriteUInt32(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,s=Math.min(e.length-n,4);r<s;++r)e[n+r]=t>>>(i?r:3-r)*8&255}Buffer.prototype.writeUInt32LE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255):objectWriteUInt32(this,t,n,!0),n+4};Buffer.prototype.writeUInt32BE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255):objectWriteUInt32(this,t,n,!1),n+4};Buffer.prototype.writeIntLE=function(t,n,i,r){if(t=+t,n=n|0,!r){var s=Math.pow(2,8*i-1);checkInt(this,t,n,i,s-1,-s)}var o=0,m=1,A=0;for(this[n]=t&255;++o<i&&(m*=256);)t<0&&A===0&&this[n+o-1]!==0&&(A=1),this[n+o]=(t/m>>0)-A&255;return n+i};Buffer.prototype.writeIntBE=function(t,n,i,r){if(t=+t,n=n|0,!r){var s=Math.pow(2,8*i-1);checkInt(this,t,n,i,s-1,-s)}var o=i-1,m=1,A=0;for(this[n+o]=t&255;--o>=0&&(m*=256);)t<0&&A===0&&this[n+o+1]!==0&&(A=1),this[n+o]=(t/m>>0)-A&255;return n+i};Buffer.prototype.writeInt8=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=t&255,n+1};Buffer.prototype.writeInt16LE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8):objectWriteUInt16(this,t,n,!0),n+2};Buffer.prototype.writeInt16BE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t&255):objectWriteUInt16(this,t,n,!1),n+2};Buffer.prototype.writeInt32LE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):objectWriteUInt32(this,t,n,!0),n+4};Buffer.prototype.writeInt32BE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255):objectWriteUInt32(this,t,n,!1),n+4};function checkIEEE754(e,t,n,i,r,s){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,i,r){return r||checkIEEE754(e,t,n,4),write(e,t,n,i,23,4),n+4}Buffer.prototype.writeFloatLE=function(t,n,i){return writeFloat(this,t,n,!0,i)};Buffer.prototype.writeFloatBE=function(t,n,i){return writeFloat(this,t,n,!1,i)};function writeDouble(e,t,n,i,r){return r||checkIEEE754(e,t,n,8),write(e,t,n,i,52,8),n+8}Buffer.prototype.writeDoubleLE=function(t,n,i){return writeDouble(this,t,n,!0,i)};Buffer.prototype.writeDoubleBE=function(t,n,i){return writeDouble(this,t,n,!1,i)};Buffer.prototype.copy=function(t,n,i,r){if(i||(i=0),!r&&r!==0&&(r=this.length),n>=t.length&&(n=t.length),n||(n=0),r>0&&r<i&&(r=i),r===i||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-i&&(r=t.length-n+i);var s=r-i,o;if(this===t&&i<n&&n<r)for(o=s-1;o>=0;--o)t[o+n]=this[o+i];else if(s<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)t[o+n]=this[o+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+s),n);return s};Buffer.prototype.fill=function(t,n,i,r){if(typeof t=="string"){if(typeof n=="string"?(r=n,n=0,i=this.length):typeof i=="string"&&(r=i,i=this.length),t.length===1){var s=t.charCodeAt(0);s<256&&(t=s)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!Buffer.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof t=="number"&&(t=t&255);if(n<0||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;n=n>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);var o;if(typeof t=="number")for(o=n;o<i;++o)this[o]=t;else{var m=internalIsBuffer(t)?t:utf8ToBytes(new Buffer(t,r).toString()),A=m.length;for(o=0;o<i-n;++o)this[o+n]=m[o%A]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if(e=stringtrim(e).replace(INVALID_BASE64_RE,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){t=t||1/0;for(var n,i=e.length,r=null,s=[],o=0;o<i;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}else if(o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(t-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return s}function asciiToBytes(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function utf16leToBytes(e,t){for(var n,i,r,s=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),i=n>>8,r=n%256,s.push(r),s.push(i);return s}function base64ToBytes(e){return toByteArray(base64clean(e))}function blitBuffer(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function isnan(e){return e!==e}function isBuffer(e){return e!=null&&(!!e._isBuffer||isFastBuffer(e)||isSlowBuffer(e))}function isFastBuffer(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&isFastBuffer(e.slice(0,0))}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}},_polyfillNode_fs={},_polyfillNode_fs$1=Object.freeze({__proto__:null,default:_polyfillNode_fs}),require$$0=getAugmentedNamespace(_polyfillNode_fs$1),_nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty}),require$$1=getAugmentedNamespace(_nodeResolve_empty$1),domain;function EventHandlers(){}EventHandlers.prototype=Object.create(null);function EventEmitter(){EventEmitter.init.call(this)}EventEmitter.EventEmitter=EventEmitter;EventEmitter.usingDomains=!1;EventEmitter.prototype.domain=void 0;EventEmitter.prototype._events=void 0;EventEmitter.prototype._maxListeners=void 0;EventEmitter.defaultMaxListeners=10;EventEmitter.init=function(){this.domain=null,EventEmitter.usingDomains&&domain.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new EventHandlers,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function $getMaxListeners(e){return e._maxListeners===void 0?EventEmitter.defaultMaxListeners:e._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)};function emitNone(e,t,n){if(t)e.call(n);else for(var i=e.length,r=arrayClone(e,i),s=0;s<i;++s)r[s].call(n)}function emitOne(e,t,n,i){if(t)e.call(n,i);else for(var r=e.length,s=arrayClone(e,r),o=0;o<r;++o)s[o].call(n,i)}function emitTwo(e,t,n,i,r){if(t)e.call(n,i,r);else for(var s=e.length,o=arrayClone(e,s),m=0;m<s;++m)o[m].call(n,i,r)}function emitThree(e,t,n,i,r,s){if(t)e.call(n,i,r,s);else for(var o=e.length,m=arrayClone(e,o),A=0;A<o;++A)m[A].call(n,i,r,s)}function emitMany(e,t,n,i){if(t)e.apply(n,i);else for(var r=e.length,s=arrayClone(e,r),o=0;o<r;++o)s[o].apply(n,i)}EventEmitter.prototype.emit=function(t){var n,i,r,s,o,m,A,l=t==="error";if(m=this._events,m)l=l&&m.error==null;else if(!l)return!1;if(A=this.domain,l){if(n=arguments[1],A)n||(n=new Error('Uncaught, unspecified "error" event')),n.domainEmitter=this,n.domain=A,n.domainThrown=!1,A.emit("error",n);else{if(n instanceof Error)throw n;var _=new Error('Uncaught, unspecified "error" event. ('+n+")");throw _.context=n,_}return!1}if(i=m[t],!i)return!1;var P=typeof i=="function";switch(r=arguments.length,r){case 1:emitNone(i,P,this);break;case 2:emitOne(i,P,this,arguments[1]);break;case 3:emitTwo(i,P,this,arguments[1],arguments[2]);break;case 4:emitThree(i,P,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(r-1),o=1;o<r;o++)s[o-1]=arguments[o];emitMany(i,P,this,s)}return!0};function _addListener(e,t,n,i){var r,s,o;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]):(s=e._events=new EventHandlers,e._eventsCount=0),!o)o=s[t]=n,++e._eventsCount;else if(typeof o=="function"?o=s[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),!o.warned&&(r=$getMaxListeners(e),r&&r>0&&o.length>r)){o.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=e,m.type=t,m.count=o.length,emitWarning(m)}return e}function emitWarning(e){typeof console.warn=="function"?console.warn(e):console.log(e)}EventEmitter.prototype.addListener=function(t,n){return _addListener(this,t,n,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(t,n){return _addListener(this,t,n,!0)};function _onceWrap(e,t,n){var i=!1;function r(){e.removeListener(t,r),i||(i=!0,n.apply(e,arguments))}return r.listener=n,r}EventEmitter.prototype.once=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,_onceWrap(this,t,n)),this};EventEmitter.prototype.prependOnceListener=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,_onceWrap(this,t,n)),this};EventEmitter.prototype.removeListener=function(t,n){var i,r,s,o,m;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(r=this._events,!r)return this;if(i=r[t],!i)return this;if(i===n||i.listener&&i.listener===n)--this._eventsCount===0?this._events=new EventHandlers:(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length;o-- >0;)if(i[o]===n||i[o].listener&&i[o].listener===n){m=i[o].listener,s=o;break}if(s<0)return this;if(i.length===1){if(i[0]=void 0,--this._eventsCount===0)return this._events=new EventHandlers,this;delete r[t]}else spliceOne(i,s);r.removeListener&&this.emit("removeListener",t,m||n)}return this};EventEmitter.prototype.off=function(e,t){return this.removeListener(e,t)};EventEmitter.prototype.removeAllListeners=function(t){var n,i;if(i=this._events,!i)return this;if(!i.removeListener)return arguments.length===0?(this._events=new EventHandlers,this._eventsCount=0):i[t]&&(--this._eventsCount===0?this._events=new EventHandlers:delete i[t]),this;if(arguments.length===0){for(var r=Object.keys(i),s=0,o;s<r.length;++s)o=r[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=new EventHandlers,this._eventsCount=0,this}if(n=i[t],typeof n=="function")this.removeListener(t,n);else if(n)do this.removeListener(t,n[n.length-1]);while(n[0]);return this};EventEmitter.prototype.listeners=function(t){var n,i,r=this._events;return r?(n=r[t],n?typeof n=="function"?i=[n.listener||n]:i=unwrapListeners(n):i=[]):i=[],i};EventEmitter.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):listenerCount$1.call(e,t)};EventEmitter.prototype.listenerCount=listenerCount$1;function listenerCount$1(e){var t=this._events;if(t){var n=t[e];if(typeof n=="function")return 1;if(n)return n.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function spliceOne(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}function arrayClone(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function unwrapListeners(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}var inherits;typeof Object.create=="function"?inherits=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:inherits=function(t,n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t};var inherits$1=inherits,formatRegExp=/%[sdj%]/g;function format$1(e){if(!isString(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(inspect(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,r=i.length,s=String(e).replace(formatRegExp,function(m){if(m==="%%")return"%";if(n>=r)return m;switch(m){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch{return"[Circular]"}default:return m}}),o=i[n];n<r;o=i[++n])isNull(o)||!isObject(o)?s+=" "+o:s+=" "+inspect(o);return s}function deprecate(e,t){if(isUndefined(global$1.process))return function(){return deprecate(e,t).apply(this,arguments)};if(browser$1.noDeprecation===!0)return e;var n=!1;function i(){if(!n){if(browser$1.throwDeprecation)throw new Error(t);browser$1.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}return i}var debugs={},debugEnviron;function debuglog(e){if(isUndefined(debugEnviron)&&(debugEnviron=browser$1.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var t=0;debugs[e]=function(){var n=format$1.apply(null,arguments);console.error("%s %d: %s",e,t,n)}}else debugs[e]=function(){};return debugs[e]}function inspect(e,t){var n={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),isBoolean(t)?n.showHidden=t:t&&_extend(n,t),isUndefined(n.showHidden)&&(n.showHidden=!1),isUndefined(n.depth)&&(n.depth=2),isUndefined(n.colors)&&(n.colors=!1),isUndefined(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=stylizeWithColor),formatValue(n,e,n.depth)}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(e,t){var n=inspect.styles[t];return n?"\x1B["+inspect.colors[n][0]+"m"+e+"\x1B["+inspect.colors[n][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach(function(n,i){t[n]=!0}),t}function formatValue(e,t,n){if(e.customInspect&&t&&isFunction$1(t.inspect)&&t.inspect!==inspect&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(n,e);return isString(i)||(i=formatValue(e,i,n)),i}var r=formatPrimitive(e,t);if(r)return r;var s=Object.keys(t),o=arrayToHash(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),isError(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return formatError(t);if(s.length===0){if(isFunction$1(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(isRegExp(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(isDate(t))return e.stylize(Date.prototype.toString.call(t),"date");if(isError(t))return formatError(t)}var A="",l=!1,_=["{","}"];if(isArray$1(t)&&(l=!0,_=["[","]"]),isFunction$1(t)){var P=t.name?": "+t.name:"";A=" [Function"+P+"]"}if(isRegExp(t)&&(A=" "+RegExp.prototype.toString.call(t)),isDate(t)&&(A=" "+Date.prototype.toUTCString.call(t)),isError(t)&&(A=" "+formatError(t)),s.length===0&&(!l||t.length==0))return _[0]+A+_[1];if(n<0)return isRegExp(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var w;return l?w=formatArray(e,t,n,o,s):w=s.map(function(E){return formatProperty(e,t,n,o,E,l)}),e.seen.pop(),reduceToSingleString(w,A,_)}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(isNumber(t))return e.stylize(""+t,"number");if(isBoolean(t))return e.stylize(""+t,"boolean");if(isNull(t))return e.stylize("null","null")}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,n,i,r){for(var s=[],o=0,m=t.length;o<m;++o)hasOwnProperty$1(t,String(o))?s.push(formatProperty(e,t,n,i,String(o),!0)):s.push("");return r.forEach(function(A){A.match(/^\d+$/)||s.push(formatProperty(e,t,n,i,A,!0))}),s}function formatProperty(e,t,n,i,r,s){var o,m,A;if(A=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},A.get?A.set?m=e.stylize("[Getter/Setter]","special"):m=e.stylize("[Getter]","special"):A.set&&(m=e.stylize("[Setter]","special")),hasOwnProperty$1(i,r)||(o="["+r+"]"),m||(e.seen.indexOf(A.value)<0?(isNull(n)?m=formatValue(e,A.value,null):m=formatValue(e,A.value,n-1),m.indexOf(`
`)>-1&&(s?m=m.split(`
`).map(function(l){return"  "+l}).join(`
`).substr(2):m=`
`+m.split(`
`).map(function(l){return"   "+l}).join(`
`))):m=e.stylize("[Circular]","special")),isUndefined(o)){if(s&&r.match(/^\d+$/))return m;o=JSON.stringify(""+r),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+m}function reduceToSingleString(e,t,n){var i=e.reduce(function(r,s){return s.indexOf(`
`)>=0,r+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function isArray$1(e){return Array.isArray(e)}function isBoolean(e){return typeof e=="boolean"}function isNull(e){return e===null}function isNullOrUndefined(e){return e==null}function isNumber(e){return typeof e=="number"}function isString(e){return typeof e=="string"}function isUndefined(e){return e===void 0}function isRegExp(e){return isObject(e)&&objectToString(e)==="[object RegExp]"}function isObject(e){return typeof e=="object"&&e!==null}function isDate(e){return isObject(e)&&objectToString(e)==="[object Date]"}function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}function isFunction$1(e){return typeof e=="function"}function objectToString(e){return Object.prototype.toString.call(e)}function _extend(e,t){if(!t||!isObject(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}function hasOwnProperty$1(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function BufferList(){this.head=null,this.tail=null,this.length=0}BufferList.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length};BufferList.prototype.unshift=function(e){var t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length};BufferList.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}};BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0};BufferList.prototype.join=function(e){if(this.length===0)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n};BufferList.prototype.concat=function(e){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;for(var t=Buffer.allocUnsafe(e>>>0),n=this.head,i=0;n;)n.data.copy(t,i),i+=n.data.length,n=n.next;return t};var isBufferEncoding=Buffer.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function assertEncoding(e){if(e&&!isBufferEncoding(e))throw new Error("Unknown encoding: "+e)}function StringDecoder(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0}StringDecoder.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(r>=55296&&r<=56319){this.charLength+=this.surrogateSize,t="";continue}if(this.charReceived=this.charLength=0,e.length===0)return t;break}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&r<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),e.copy(this.charBuffer,0,0,s),t.substring(0,i)}return t};StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(t==1&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t};StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;t+=i.slice(0,n).toString(r)}return t};function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}Readable.ReadableState=ReadableState;var debug=debuglog("stream");inherits$1(Readable,EventEmitter);function prependListener(e,t,n){if(typeof e.prependListener=="function")return e.prependListener(t,n);!e._events||!e._events[t]?e.on(t,n):Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]}function listenerCount(e,t){return e.listeners(t).length}function ReadableState(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){if(!(this instanceof Readable))return new Readable(e);this._readableState=new ReadableState(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),EventEmitter.call(this)}Readable.prototype.push=function(e,t){var n=this._readableState;return!n.objectMode&&typeof e=="string"&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=Buffer.from(e,t),t="")),readableAddChunk(this,n,e,t,!1)};Readable.prototype.unshift=function(e){var t=this._readableState;return readableAddChunk(this,t,e,"",!0)};Readable.prototype.isPaused=function(){return this._readableState.flowing===!1};function readableAddChunk(e,t,n,i,r){var s=chunkInvalid(t,n);if(s)e.emit("error",s);else if(n===null)t.reading=!1,onEofChunk(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!r){var o=new Error("stream.push() after EOF");e.emit("error",o)}else if(t.endEmitted&&r){var m=new Error("stream.unshift() after end event");e.emit("error",m)}else{var A;t.decoder&&!r&&!i&&(n=t.decoder.write(n),A=!t.objectMode&&n.length===0),r||(t.reading=!1),A||(t.flowing&&t.length===0&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&emitReadable(e))),maybeReadMore(e,t)}else r||(t.reading=!1);return needMoreData(t)}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}Readable.prototype.setEncoding=function(e){return this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e,this};var MAX_HWM=8388608;function computeNewHighWaterMark(e){return e>=MAX_HWM?e=MAX_HWM:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}Readable.prototype.read=function(e){debug("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return debug("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?endReadable(this):emitReadable(this),null;if(e=howMuchToRead(e,t),e===0&&t.ended)return t.length===0&&endReadable(this),null;var i=t.needReadable;debug("need readable",i),(t.length===0||t.length-e<t.highWaterMark)&&(i=!0,debug("length less than watermark",i)),t.ended||t.reading?(i=!1,debug("reading or ended",i)):i&&(debug("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(n,t)));var r;return e>0?r=fromList(e,t):r=null,r===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&endReadable(this)),r!==null&&this.emit("data",r),r};function chunkInvalid(e,t){var n=null;return!Buffer.isBuffer(t)&&typeof t!="string"&&t!==null&&t!==void 0&&!e.objectMode&&(n=new TypeError("Invalid non-string/buffer chunk")),n}function onEofChunk(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,emitReadable(e)}}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?nextTick(emitReadable_,e):emitReadable_(e))}function emitReadable_(e){debug("emit readable"),e.emit("readable"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(debug("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}Readable.prototype._read=function(e){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);break}i.pipesCount+=1,debug("pipe count=%d opts=%j",i.pipesCount,t);var r=!t||t.end!==!1,s=r?m:_;i.endEmitted?nextTick(s):n.once("end",s),e.on("unpipe",o);function o(d){debug("onunpipe"),d===n&&_()}function m(){debug("onend"),e.end()}var A=pipeOnDrain(n);e.on("drain",A);var l=!1;function _(){debug("cleanup"),e.removeListener("close",p),e.removeListener("finish",a),e.removeListener("drain",A),e.removeListener("error",E),e.removeListener("unpipe",o),n.removeListener("end",m),n.removeListener("end",_),n.removeListener("data",w),l=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&A()}var P=!1;n.on("data",w);function w(d){debug("ondata"),P=!1;var R=e.write(d);R===!1&&!P&&((i.pipesCount===1&&i.pipes===e||i.pipesCount>1&&indexOf(i.pipes,e)!==-1)&&!l&&(debug("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,P=!0),n.pause())}function E(d){debug("onerror",d),h(),e.removeListener("error",E),listenerCount(e,"error")===0&&e.emit("error",d)}prependListener(e,"error",E);function p(){e.removeListener("finish",a),h()}e.once("close",p);function a(){debug("onfinish"),e.removeListener("close",p),h()}e.once("finish",a);function h(){debug("unpipe"),n.unpipe(e)}return e.emit("pipe",n),i.flowing||(debug("pipe resume"),n.resume()),e};function pipeOnDrain(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&e.listeners("data").length&&(t.flowing=!0,flow(e))}}Readable.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<i;r++)n[r].emit("unpipe",this);return this}var s=indexOf(t.pipes,e);return s===-1?this:(t.pipes.splice(s,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)};Readable.prototype.on=function(e,t){var n=EventEmitter.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var i=this._readableState;!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&emitReadable(this):nextTick(nReadingNextTick,this))}return n};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(e){debug("readable nexttick read 0"),e.read(0)}Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!0,resume(this,e)),this};function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,nextTick(resume_,e,t))}function resume_(e,t){t.reading||(debug("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function flow(e){var t=e._readableState;for(debug("flow",t.flowing);t.flowing&&e.read()!==null;);}Readable.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;e.on("end",function(){if(debug("wrapped end"),t.decoder&&!t.ended){var o=t.decoder.end();o&&o.length&&i.push(o)}i.push(null)}),e.on("data",function(o){if(debug("wrapped data"),t.decoder&&(o=t.decoder.write(o)),!(t.objectMode&&o==null)&&!(!t.objectMode&&(!o||!o.length))){var m=i.push(o);m||(n=!0,e.pause())}});for(var r in e)this[r]===void 0&&typeof e[r]=="function"&&(this[r]=function(o){return function(){return e[o].apply(e,arguments)}}(r));var s=["error","close","destroy","pause","resume"];return forEach(s,function(o){e.on(o,i.emit.bind(i,o))}),i._read=function(o){debug("wrapped _read",o),n&&(n=!1,e.resume())},i};Readable._fromList=fromList;function fromList(e,t){if(t.length===0)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(t.decoder?n=t.buffer.join(""):t.buffer.length===1?n=t.buffer.head.data:n=t.buffer.concat(t.length),t.buffer.clear()):n=fromListPartial(e,t.buffer,t.decoder),n}function fromListPartial(e,t,n){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?i=t.shift():i=n?copyFromBufferString(e,t):copyFromBuffer(e,t),i}function copyFromBufferString(e,t){var n=t.head,i=1,r=n.data;for(e-=r.length;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(o===s.length?r+=s:r+=s.slice(0,e),e-=o,e===0){o===s.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(o));break}++i}return t.length-=i,r}function copyFromBuffer(e,t){var n=Buffer.allocUnsafe(e),i=t.head,r=1;for(i.data.copy(n),e-=i.data.length;i=i.next;){var s=i.data,o=e>s.length?s.length:e;if(s.copy(n,n.length-e,0,o),e-=o,e===0){o===s.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=s.slice(o));break}++r}return t.length-=r,n}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,nextTick(endReadableNT,t,e))}function endReadableNT(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function forEach(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)}function indexOf(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}Writable.WritableState=WritableState;inherits$1(Writable,EventEmitter);function nop(){}function WriteReq(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function WritableState(e,t){Object.defineProperty(this,"buffer",{get:deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=e.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(s){onwrite(t,s)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function(){for(var t=this.bufferedRequest,n=[];t;)n.push(t),t=t.next;return n};function Writable(e){if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(e);this._writableState=new WritableState(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),EventEmitter.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(e,t){var n=new Error("write after end");e.emit("error",n),nextTick(t,n)}function validChunk(e,t,n,i){var r=!0,s=!1;return n===null?s=new TypeError("May not write null values to stream"):!Buffer.isBuffer(n)&&typeof n!="string"&&n!==void 0&&!t.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),nextTick(i,s),r=!1),r}Writable.prototype.write=function(e,t,n){var i=this._writableState,r=!1;return typeof t=="function"&&(n=t,t=null),Buffer.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),typeof n!="function"&&(n=nop),i.ended?writeAfterEnd(this,n):validChunk(this,i,e,n)&&(i.pendingcb++,r=writeOrBuffer(this,i,e,t,n)),r};Writable.prototype.cork=function(){var e=this._writableState;e.corked++};Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&clearBuffer(this,e))};Writable.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function decodeChunk(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=Buffer.from(t,n)),t}function writeOrBuffer(e,t,n,i,r){n=decodeChunk(t,n,i),Buffer.isBuffer(n)&&(i="buffer");var s=t.objectMode?1:n.length;t.length+=s;var o=t.length<t.highWaterMark;if(o||(t.needDrain=!0),t.writing||t.corked){var m=t.lastBufferedRequest;t.lastBufferedRequest=new WriteReq(n,i,r),m?m.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,s,n,i,r);return o}function doWrite(e,t,n,i,r,s,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,s,t.onwrite),t.sync=!1}function onwriteError(e,t,n,i,r){--t.pendingcb,n?nextTick(r,i):r(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(onwriteStateUpdate(n),t)onwriteError(e,n,i,t,r);else{var s=needFinish(n);!s&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest&&clearBuffer(e,n),i?nextTick(afterWrite,e,n,s,r):afterWrite(e,n,s,r)}}function afterWrite(e,t,n,i){n||onwriteDrain(e,t),t.pendingcb--,i(),finishMaybe(e,t)}function onwriteDrain(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var o=0;n;)r[o]=n,n=n.next,o+=1;doWrite(e,t,!0,t.length,r,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new CorkedRequest(t)}else{for(;n;){var m=n.chunk,A=n.encoding,l=n.callback,_=t.objectMode?1:m.length;if(doWrite(e,t,!1,_,m,A,l),n=n.next,t.writing)break}n===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}Writable.prototype._write=function(e,t,n){n(new Error("not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(e,t,n){var i=this._writableState;typeof e=="function"?(n=e,e=null,t=null):typeof t=="function"&&(n=t,t=null),e!=null&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),!i.ending&&!i.finished&&endWritable(this,i,n)};function needFinish(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function prefinish(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function finishMaybe(e,t){var n=needFinish(t);return n&&(t.pendingcb===0?(prefinish(e,t),t.finished=!0,e.emit("finish")):prefinish(e,t)),n}function endWritable(e,t,n){t.ending=!0,finishMaybe(e,t),n&&(t.finished?nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var i=t.entry;for(t.entry=null;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}inherits$1(Duplex,Readable);var keys=Object.keys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);Readable.call(this,e),Writable.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||nextTick(onEndNT,this)}function onEndNT(e){e.end()}inherits$1(Transform,Duplex);function TransformState(e){this.afterTransform=function(t,n){return afterTransform(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,n!=null&&e.push(n),r(t);var s=e._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&e._read(s.highWaterMark)}function Transform(e){if(!(this instanceof Transform))return new Transform(e);Duplex.call(this,e),this._transformState=new TransformState(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(n){done(t,n)}):done(t)})}Transform.prototype.push=function(e,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,e,t)};Transform.prototype._transform=function(e,t,n){throw new Error("Not implemented")};Transform.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}};Transform.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};function done(e,t){if(t)return e.emit("error",t);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}inherits$1(PassThrough,Transform);function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);Transform.call(this,e)}PassThrough.prototype._transform=function(e,t,n){n(null,e)};inherits$1(Stream,EventEmitter);Stream.Readable=Readable;Stream.Writable=Writable;Stream.Duplex=Duplex;Stream.Transform=Transform;Stream.PassThrough=PassThrough;Stream.Stream=Stream;function Stream(){EventEmitter.call(this)}Stream.prototype.pipe=function(e,t){var n=this;function i(_){e.writable&&e.write(_)===!1&&n.pause&&n.pause()}n.on("data",i);function r(){n.readable&&n.resume&&n.resume()}e.on("drain",r),!e._isStdio&&(!t||t.end!==!1)&&(n.on("end",o),n.on("close",m));var s=!1;function o(){s||(s=!0,e.end())}function m(){s||(s=!0,typeof e.destroy=="function"&&e.destroy())}function A(_){if(l(),EventEmitter.listenerCount(this,"error")===0)throw _}n.on("error",A),e.on("error",A);function l(){n.removeListener("data",i),e.removeListener("drain",r),n.removeListener("end",o),n.removeListener("close",m),n.removeListener("error",A),e.removeListener("error",A),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e};var msg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function arraySet(e,t,n,i,r){if(t.subarray&&e.subarray){e.set(t.subarray(n,n+i),r);return}for(var s=0;s<i;s++)e[r+s]=t[n+s]}var Buf8=Uint8Array,Buf16=Uint16Array,Buf32=Int32Array,Z_FIXED$2=4,Z_BINARY$1=0,Z_TEXT$1=1,Z_UNKNOWN$2=2;function zero$1(e){for(var t=e.length;--t>=0;)e[t]=0}var STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);var static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);var _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);var base_length=new Array(LENGTH_CODES$1);zero$1(base_length);var base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}var static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function d_code(e){return e<256?_dist_code[e]:_dist_code[256+(e>>>7)]}function put_short(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function send_bits(e,t,n){e.bi_valid>Buf_size-n?(e.bi_buf|=t<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=t>>Buf_size-e.bi_valid,e.bi_valid+=n-Buf_size):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function send_code(e,t,n){send_bits(e,n[t*2],n[t*2+1])}function bi_reverse(e,t){var n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1}function bi_flush(e){e.bi_valid===16?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function gen_bitlen(e,t){var n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,A=t.stat_desc.max_length,l,_,P,w,E,p,a=0;for(w=0;w<=MAX_BITS$1;w++)e.bl_count[w]=0;for(n[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<HEAP_SIZE$1;l++)_=e.heap[l],w=n[n[_*2+1]*2+1]+1,w>A&&(w=A,a++),n[_*2+1]=w,!(_>i)&&(e.bl_count[w]++,E=0,_>=m&&(E=o[_-m]),p=n[_*2],e.opt_len+=p*(w+E),s&&(e.static_len+=p*(r[_*2+1]+E)));if(a!==0){do{for(w=A-1;e.bl_count[w]===0;)w--;e.bl_count[w]--,e.bl_count[w+1]+=2,e.bl_count[A]--,a-=2}while(a>0);for(w=A;w!==0;w--)for(_=e.bl_count[w];_!==0;)P=e.heap[--l],!(P>i)&&(n[P*2+1]!==w&&(e.opt_len+=(w-n[P*2+1])*n[P*2],n[P*2+1]=w),_--)}}function gen_codes(e,t,n){var i=new Array(MAX_BITS$1+1),r=0,s,o;for(s=1;s<=MAX_BITS$1;s++)i[s]=r=r+n[s-1]<<1;for(o=0;o<=t;o++){var m=e[o*2+1];m!==0&&(e[o*2]=bi_reverse(i[m]++,m))}}function tr_static_init(){var e,t,n,i,r,s=new Array(MAX_BITS$1+1);for(n=0,i=0;i<LENGTH_CODES$1-1;i++)for(base_length[i]=n,e=0;e<1<<extra_lbits[i];e++)_length_code[n++]=i;for(_length_code[n-1]=i,r=0,i=0;i<16;i++)for(base_dist[i]=r,e=0;e<1<<extra_dbits[i];e++)_dist_code[r++]=i;for(r>>=7;i<D_CODES$1;i++)for(base_dist[i]=r<<7,e=0;e<1<<extra_dbits[i]-7;e++)_dist_code[256+r++]=i;for(t=0;t<=MAX_BITS$1;t++)s[t]=0;for(e=0;e<=143;)static_ltree[e*2+1]=8,e++,s[8]++;for(;e<=255;)static_ltree[e*2+1]=9,e++,s[9]++;for(;e<=279;)static_ltree[e*2+1]=7,e++,s[7]++;for(;e<=287;)static_ltree[e*2+1]=8,e++,s[8]++;for(gen_codes(static_ltree,L_CODES$1+1,s),e=0;e<D_CODES$1;e++)static_dtree[e*2+1]=5,static_dtree[e*2]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)}function init_block(e){var t;for(t=0;t<L_CODES$1;t++)e.dyn_ltree[t*2]=0;for(t=0;t<D_CODES$1;t++)e.dyn_dtree[t*2]=0;for(t=0;t<BL_CODES$1;t++)e.bl_tree[t*2]=0;e.dyn_ltree[END_BLOCK*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function bi_windup(e){e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function copy_block(e,t,n,i){bi_windup(e),i&&(put_short(e,n),put_short(e,~n)),arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function smaller(e,t,n,i){var r=t*2,s=n*2;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]}function pqdownheap(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&smaller(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!smaller(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function compress_block(e,t,n){var i,r,s=0,o,m;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],r=e.pending_buf[e.l_buf+s],s++,i===0?send_code(e,r,t):(o=_length_code[r],send_code(e,o+LITERALS$1+1,t),m=extra_lbits[o],m!==0&&(r-=base_length[o],send_bits(e,r,m)),i--,o=d_code(i),send_code(e,o,n),m=extra_dbits[o],m!==0&&(i-=base_dist[o],send_bits(e,i,m)));while(s<e.last_lit);send_code(e,END_BLOCK,t)}function build_tree(e,t){var n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems,o,m,A=-1,l;for(e.heap_len=0,e.heap_max=HEAP_SIZE$1,o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=A=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=A<2?++A:0,n[l*2]=1,e.depth[l]=0,e.opt_len--,r&&(e.static_len-=i[l*2+1]);for(t.max_code=A,o=e.heap_len>>1;o>=1;o--)pqdownheap(e,n,o);l=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,n,1),m=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=m,n[l*2]=n[o*2]+n[m*2],e.depth[l]=(e.depth[o]>=e.depth[m]?e.depth[o]:e.depth[m])+1,n[o*2+1]=n[m*2+1]=l,e.heap[1]=l++,pqdownheap(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,t),gen_codes(n,A,e.bl_count)}function scan_tree(e,t,n){var i,r=-1,s,o=t[0*2+1],m=0,A=7,l=4;for(o===0&&(A=138,l=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)s=o,o=t[(i+1)*2+1],!(++m<A&&s===o)&&(m<l?e.bl_tree[s*2]+=m:s!==0?(s!==r&&e.bl_tree[s*2]++,e.bl_tree[REP_3_6*2]++):m<=10?e.bl_tree[REPZ_3_10*2]++:e.bl_tree[REPZ_11_138*2]++,m=0,r=s,o===0?(A=138,l=3):s===o?(A=6,l=3):(A=7,l=4))}function send_tree(e,t,n){var i,r=-1,s,o=t[0*2+1],m=0,A=7,l=4;for(o===0&&(A=138,l=3),i=0;i<=n;i++)if(s=o,o=t[(i+1)*2+1],!(++m<A&&s===o)){if(m<l)do send_code(e,s,e.bl_tree);while(--m!==0);else s!==0?(s!==r&&(send_code(e,s,e.bl_tree),m--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,m-3,2)):m<=10?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,m-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,m-11,7));m=0,r=s,o===0?(A=138,l=3):s===o?(A=6,l=3):(A=7,l=4)}}function build_bl_tree(e){var t;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),t=BL_CODES$1-1;t>=3&&e.bl_tree[bl_order[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function send_all_trees(e,t,n,i){var r;for(send_bits(e,t-257,5),send_bits(e,n-1,5),send_bits(e,i-4,4),r=0;r<i;r++)send_bits(e,e.bl_tree[bl_order[r]*2+1],3);send_tree(e,e.dyn_ltree,t-1),send_tree(e,e.dyn_dtree,n-1)}function detect_data_type(e){var t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return Z_BINARY$1;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Z_TEXT$1;for(n=32;n<LITERALS$1;n++)if(e.dyn_ltree[n*2]!==0)return Z_TEXT$1;return Z_BINARY$1}var static_init_done=!1;function _tr_init(e){static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)}function _tr_stored_block(e,t,n,i){send_bits(e,(STORED_BLOCK<<1)+(i?1:0),3),copy_block(e,t,n,!0)}function _tr_align(e){send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)}function _tr_flush_block(e,t,n,i){var r,s,o=0;e.level>0?(e.strm.data_type===Z_UNKNOWN$2&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),o=build_bl_tree(e),r=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=r&&(r=s)):r=s=n+5,n+4<=r&&t!==-1?_tr_stored_block(e,t,n,i):e.strategy===Z_FIXED$2||s===r?(send_bits(e,(STATIC_TREES<<1)+(i?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(i?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),i&&bi_windup(e)}function _tr_tally(e,t,n){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(_length_code[n]+LITERALS$1+1)*2]++,e.dyn_dtree[d_code(t)*2]++),e.last_lit===e.lit_bufsize-1}function adler32(e,t,n,i){for(var r=e&65535|0,s=e>>>16&65535|0,o=0;n!==0;){o=n>2e3?2e3:n,n-=o;do r=r+t[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0}function makeTable(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t}var crcTable=makeTable();function crc32(e,t,n,i){var r=crcTable,s=i+n;e^=-1;for(var o=i;o<s;o++)e=e>>>8^r[(e^t[o])&255];return e^-1}var Z_NO_FLUSH$1=0,Z_PARTIAL_FLUSH$1=1,Z_FULL_FLUSH$1=3,Z_FINISH$2=4,Z_BLOCK$2=5,Z_OK$2=0,Z_STREAM_END$2=1,Z_STREAM_ERROR$2=-2,Z_DATA_ERROR$2=-3,Z_BUF_ERROR$2=-5,Z_DEFAULT_COMPRESSION$1=-1,Z_FILTERED$1=1,Z_HUFFMAN_ONLY$1=2,Z_RLE$1=3,Z_FIXED$1=4,Z_UNKNOWN$1=2,Z_DEFLATED$2=8,MAX_MEM_LEVEL=9,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3;function err(e,t){return e.msg=msg[t],t}function rank(e){return(e<<1)-(e>4?9:0)}function zero(e){for(var t=e.length;--t>=0;)e[t]=0}function flush_pending(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))}function flush_block_only(e,t){_tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,flush_pending(e.strm)}function put_byte(e,t){e.pending_buf[e.pending++]=t}function putShortMSB(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function read_buf(e,t,n,i){var r=e.avail_in;return r>i&&(r=i),r===0?0:(e.avail_in-=r,arraySet(t,e.input,e.next_in,r,n),e.state.wrap===1?e.adler=adler32(e.adler,t,r,n):e.state.wrap===2&&(e.adler=crc32(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)}function longest_match(e,t){var n=e.max_chain_length,i=e.strstart,r,s,o=e.prev_length,m=e.nice_match,A=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0,l=e.window,_=e.w_mask,P=e.prev,w=e.strstart+MAX_MATCH,E=l[i+o-1],p=l[i+o];e.prev_length>=e.good_match&&(n>>=2),m>e.lookahead&&(m=e.lookahead);do if(r=t,!(l[r+o]!==p||l[r+o-1]!==E||l[r]!==l[i]||l[++r]!==l[i+1])){i+=2,r++;do;while(l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&i<w);if(s=MAX_MATCH-(w-i),i=w-MAX_MATCH,s>o){if(e.match_start=t,o=s,s>=m)break;E=l[i+o-1],p=l[i+o]}}while((t=P[t&_])>A&&--n!==0);return o<=e.lookahead?o:e.lookahead}function fill_window(e){var t=e.w_size,n,i,r,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-MIN_LOOKAHEAD)){arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do r=e.head[--n],e.head[n]=r>=t?r-t:0;while(--i);i=t,n=i;do r=e.prev[--n],e.prev[n]=r>=t?r-t:0;while(--i);s+=t}if(e.strm.avail_in===0)break;if(i=read_buf(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=i,e.lookahead+e.insert>=MIN_MATCH)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+MIN_MATCH-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<MIN_MATCH)););}while(e.lookahead<MIN_LOOKAHEAD&&e.strm.avail_in!==0)}function deflate_stored(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(fill_window(e),e.lookahead===0&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,flush_block_only(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-MIN_LOOKAHEAD&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):(e.strstart>e.block_start&&(flush_block_only(e,!1),e.strm.avail_out===0),BS_NEED_MORE)}function deflate_fast(e,t){for(var n,i;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(n=0,e.lookahead>=MIN_MATCH&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,n)),e.match_length>=MIN_MATCH)if(i=_tr_tally(e,e.strstart-e.match_start,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(e,t){for(var n,i,r;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(n=0,e.lookahead>=MIN_MATCH&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=MIN_MATCH-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,n),e.match_length<=5&&(e.strategy===Z_FILTERED$1||e.match_length===MIN_MATCH&&e.strstart-e.match_start>4096)&&(e.match_length=MIN_MATCH-1)),e.prev_length>=MIN_MATCH&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-MIN_MATCH,i=_tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=MIN_MATCH-1,e.strstart++,i&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}else if(e.match_available){if(i=_tr_tally(e,0,e.window[e.strstart-1]),i&&flush_block_only(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return BS_NEED_MORE}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=_tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(e,t){for(var n,i,r,s,o=e.window;;){if(e.lookahead<=MAX_MATCH){if(fill_window(e),e.lookahead<=MAX_MATCH&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=MIN_MATCH&&e.strstart>0&&(r=e.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=e.strstart+MAX_MATCH;do;while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);e.match_length=MAX_MATCH-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=MIN_MATCH?(n=_tr_tally(e,1,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(e,t){for(var n;;){if(e.lookahead===0&&(fill_window(e),e.lookahead===0)){if(t===Z_NO_FLUSH$1)return BS_NEED_MORE;break}if(e.match_length=0,n=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}var configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function lm_init(e){e.window_size=2*e.w_size,zero(e.head),e.max_lazy_match=configuration_table[e.level].max_lazy,e.good_match=configuration_table[e.level].good_length,e.nice_match=configuration_table[e.level].nice_length,e.max_chain_length=configuration_table[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=MIN_MATCH-1,e.match_available=0,e.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Buf16(HEAP_SIZE*2),this.dyn_dtree=new Buf16((2*D_CODES+1)*2),this.bl_tree=new Buf16((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Buf16(MAX_BITS+1),this.heap=new Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(e){var t;return!e||!e.state?err(e,Z_STREAM_ERROR$2):(e.total_in=e.total_out=0,e.data_type=Z_UNKNOWN$1,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?INIT_STATE:BUSY_STATE,e.adler=t.wrap===2?0:1,t.last_flush=Z_NO_FLUSH$1,_tr_init(t),Z_OK$2)}function deflateReset(e){var t=deflateResetKeep(e);return t===Z_OK$2&&lm_init(e.state),t}function deflateInit2(e,t,n,i,r,s){if(!e)return Z_STREAM_ERROR$2;var o=1;if(t===Z_DEFAULT_COMPRESSION$1&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>MAX_MEM_LEVEL||n!==Z_DEFLATED$2||i<8||i>15||t<0||t>9||s<0||s>Z_FIXED$1)return err(e,Z_STREAM_ERROR$2);i===8&&(i=9);var m=new DeflateState;return e.state=m,m.strm=e,m.wrap=o,m.gzhead=null,m.w_bits=i,m.w_size=1<<m.w_bits,m.w_mask=m.w_size-1,m.hash_bits=r+7,m.hash_size=1<<m.hash_bits,m.hash_mask=m.hash_size-1,m.hash_shift=~~((m.hash_bits+MIN_MATCH-1)/MIN_MATCH),m.window=new Buf8(m.w_size*2),m.head=new Buf16(m.hash_size),m.prev=new Buf16(m.w_size),m.lit_bufsize=1<<r+6,m.pending_buf_size=m.lit_bufsize*4,m.pending_buf=new Buf8(m.pending_buf_size),m.d_buf=1*m.lit_bufsize,m.l_buf=(1+2)*m.lit_bufsize,m.level=t,m.strategy=s,m.method=n,deflateReset(e)}function deflate$1(e,t){var n,i,r,s;if(!e||!e.state||t>Z_BLOCK$2||t<0)return e?err(e,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;if(i=e.state,!e.output||!e.input&&e.avail_in!==0||i.status===FINISH_STATE&&t!==Z_FINISH$2)return err(e,e.avail_out===0?Z_BUF_ERROR$2:Z_STREAM_ERROR$2);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===INIT_STATE)if(i.wrap===2)e.adler=0,put_byte(i,31),put_byte(i,139),put_byte(i,8),i.gzhead?(put_byte(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),put_byte(i,i.gzhead.time&255),put_byte(i,i.gzhead.time>>8&255),put_byte(i,i.gzhead.time>>16&255),put_byte(i,i.gzhead.time>>24&255),put_byte(i,i.level===9?2:i.strategy>=Z_HUFFMAN_ONLY$1||i.level<2?4:0),put_byte(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(put_byte(i,i.gzhead.extra.length&255),put_byte(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=crc32(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=EXTRA_STATE):(put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,i.level===9?2:i.strategy>=Z_HUFFMAN_ONLY$1||i.level<2?4:0),put_byte(i,OS_CODE),i.status=BUSY_STATE);else{var o=Z_DEFLATED$2+(i.w_bits-8<<4)<<8,m=-1;i.strategy>=Z_HUFFMAN_ONLY$1||i.level<2?m=0:i.level<6?m=1:i.level===6?m=2:m=3,o|=m<<6,i.strstart!==0&&(o|=PRESET_DICT),o+=31-o%31,i.status=BUSY_STATE,putShortMSB(i,o),i.strstart!==0&&(putShortMSB(i,e.adler>>>16),putShortMSB(i,e.adler&65535)),e.adler=1}if(i.status===EXTRA_STATE)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),flush_pending(e),r=i.pending,i.pending===i.pending_buf_size));)put_byte(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=NAME_STATE)}else i.status=NAME_STATE;if(i.status===NAME_STATE)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),flush_pending(e),r=i.pending,i.pending===i.pending_buf_size)){s=1;break}i.gzindex<i.gzhead.name.length?s=i.gzhead.name.charCodeAt(i.gzindex++)&255:s=0,put_byte(i,s)}while(s!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),s===0&&(i.gzindex=0,i.status=COMMENT_STATE)}else i.status=COMMENT_STATE;if(i.status===COMMENT_STATE)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),flush_pending(e),r=i.pending,i.pending===i.pending_buf_size)){s=1;break}i.gzindex<i.gzhead.comment.length?s=i.gzhead.comment.charCodeAt(i.gzindex++)&255:s=0,put_byte(i,s)}while(s!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),s===0&&(i.status=HCRC_STATE)}else i.status=HCRC_STATE;if(i.status===HCRC_STATE&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&flush_pending(e),i.pending+2<=i.pending_buf_size&&(put_byte(i,e.adler&255),put_byte(i,e.adler>>8&255),e.adler=0,i.status=BUSY_STATE)):i.status=BUSY_STATE),i.pending!==0){if(flush_pending(e),e.avail_out===0)return i.last_flush=-1,Z_OK$2}else if(e.avail_in===0&&rank(t)<=rank(n)&&t!==Z_FINISH$2)return err(e,Z_BUF_ERROR$2);if(i.status===FINISH_STATE&&e.avail_in!==0)return err(e,Z_BUF_ERROR$2);if(e.avail_in!==0||i.lookahead!==0||t!==Z_NO_FLUSH$1&&i.status!==FINISH_STATE){var A=i.strategy===Z_HUFFMAN_ONLY$1?deflate_huff(i,t):i.strategy===Z_RLE$1?deflate_rle(i,t):configuration_table[i.level].func(i,t);if((A===BS_FINISH_STARTED||A===BS_FINISH_DONE)&&(i.status=FINISH_STATE),A===BS_NEED_MORE||A===BS_FINISH_STARTED)return e.avail_out===0&&(i.last_flush=-1),Z_OK$2;if(A===BS_BLOCK_DONE&&(t===Z_PARTIAL_FLUSH$1?_tr_align(i):t!==Z_BLOCK$2&&(_tr_stored_block(i,0,0,!1),t===Z_FULL_FLUSH$1&&(zero(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),flush_pending(e),e.avail_out===0))return i.last_flush=-1,Z_OK$2}return t!==Z_FINISH$2?Z_OK$2:i.wrap<=0?Z_STREAM_END$2:(i.wrap===2?(put_byte(i,e.adler&255),put_byte(i,e.adler>>8&255),put_byte(i,e.adler>>16&255),put_byte(i,e.adler>>24&255),put_byte(i,e.total_in&255),put_byte(i,e.total_in>>8&255),put_byte(i,e.total_in>>16&255),put_byte(i,e.total_in>>24&255)):(putShortMSB(i,e.adler>>>16),putShortMSB(i,e.adler&65535)),flush_pending(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?Z_OK$2:Z_STREAM_END$2)}function deflateEnd(e){var t;return!e||!e.state?Z_STREAM_ERROR$2:(t=e.state.status,t!==INIT_STATE&&t!==EXTRA_STATE&&t!==NAME_STATE&&t!==COMMENT_STATE&&t!==HCRC_STATE&&t!==BUSY_STATE&&t!==FINISH_STATE?err(e,Z_STREAM_ERROR$2):(e.state=null,t===BUSY_STATE?err(e,Z_DATA_ERROR$2):Z_OK$2))}var BAD$1=30,TYPE$1=12;function inflate_fast(e,t){var n,i,r,s,o,m,A,l,_,P,w,E,p,a,h,d,R,x,f,c,u,y,O,M,S;n=e.state,i=e.next_in,M=e.input,r=i+(e.avail_in-5),s=e.next_out,S=e.output,o=s-(t-e.avail_out),m=s+(e.avail_out-257),A=n.dmax,l=n.wsize,_=n.whave,P=n.wnext,w=n.window,E=n.hold,p=n.bits,a=n.lencode,h=n.distcode,d=(1<<n.lenbits)-1,R=(1<<n.distbits)-1;e:do{p<15&&(E+=M[i++]<<p,p+=8,E+=M[i++]<<p,p+=8),x=a[E&d];t:for(;;){if(f=x>>>24,E>>>=f,p-=f,f=x>>>16&255,f===0)S[s++]=x&65535;else if(f&16){c=x&65535,f&=15,f&&(p<f&&(E+=M[i++]<<p,p+=8),c+=E&(1<<f)-1,E>>>=f,p-=f),p<15&&(E+=M[i++]<<p,p+=8,E+=M[i++]<<p,p+=8),x=h[E&R];n:for(;;){if(f=x>>>24,E>>>=f,p-=f,f=x>>>16&255,f&16){if(u=x&65535,f&=15,p<f&&(E+=M[i++]<<p,p+=8,p<f&&(E+=M[i++]<<p,p+=8)),u+=E&(1<<f)-1,u>A){e.msg="invalid distance too far back",n.mode=BAD$1;break e}if(E>>>=f,p-=f,f=s-o,u>f){if(f=u-f,f>_&&n.sane){e.msg="invalid distance too far back",n.mode=BAD$1;break e}if(y=0,O=w,P===0){if(y+=l-f,f<c){c-=f;do S[s++]=w[y++];while(--f);y=s-u,O=S}}else if(P<f){if(y+=l+P-f,f-=P,f<c){c-=f;do S[s++]=w[y++];while(--f);if(y=0,P<c){f=P,c-=f;do S[s++]=w[y++];while(--f);y=s-u,O=S}}}else if(y+=P-f,f<c){c-=f;do S[s++]=w[y++];while(--f);y=s-u,O=S}for(;c>2;)S[s++]=O[y++],S[s++]=O[y++],S[s++]=O[y++],c-=3;c&&(S[s++]=O[y++],c>1&&(S[s++]=O[y++]))}else{y=s-u;do S[s++]=S[y++],S[s++]=S[y++],S[s++]=S[y++],c-=3;while(c>2);c&&(S[s++]=S[y++],c>1&&(S[s++]=S[y++]))}}else if(f&64){e.msg="invalid distance code",n.mode=BAD$1;break e}else{x=h[(x&65535)+(E&(1<<f)-1)];continue n}break}}else if(f&64)if(f&32){n.mode=TYPE$1;break e}else{e.msg="invalid literal/length code",n.mode=BAD$1;break e}else{x=a[(x&65535)+(E&(1<<f)-1)];continue t}break}}while(i<r&&s<m);c=p>>3,i-=c,p-=c<<3,E&=(1<<p)-1,e.next_in=i,e.next_out=s,e.avail_in=i<r?5+(r-i):5-(i-r),e.avail_out=s<m?257+(m-s):257-(s-m),n.hold=E,n.bits=p}var MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function inflate_table(e,t,n,i,r,s,o,m){var A=m.bits,l=0,_=0,P=0,w=0,E=0,p=0,a=0,h=0,d=0,R=0,x,f,c,u,y,O=null,M=0,S,F=new Buf16(MAXBITS+1),Q=new Buf16(MAXBITS+1),re=null,J=0,V,z,q;for(l=0;l<=MAXBITS;l++)F[l]=0;for(_=0;_<i;_++)F[t[n+_]]++;for(E=A,w=MAXBITS;w>=1&&F[w]===0;w--);if(E>w&&(E=w),w===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,m.bits=1,0;for(P=1;P<w&&F[P]===0;P++);for(E<P&&(E=P),h=1,l=1;l<=MAXBITS;l++)if(h<<=1,h-=F[l],h<0)return-1;if(h>0&&(e===CODES$1||w!==1))return-1;for(Q[1]=0,l=1;l<MAXBITS;l++)Q[l+1]=Q[l]+F[l];for(_=0;_<i;_++)t[n+_]!==0&&(o[Q[t[n+_]]++]=_);if(e===CODES$1?(O=re=o,S=19):e===LENS$1?(O=lbase,M-=257,re=lext,J-=257,S=256):(O=dbase,re=dext,S=-1),R=0,_=0,l=P,y=s,p=E,a=0,c=-1,d=1<<E,u=d-1,e===LENS$1&&d>ENOUGH_LENS$1||e===DISTS$1&&d>ENOUGH_DISTS$1)return 1;for(;;){V=l-a,o[_]<S?(z=0,q=o[_]):o[_]>S?(z=re[J+o[_]],q=O[M+o[_]]):(z=32+64,q=0),x=1<<l-a,f=1<<p,P=f;do f-=x,r[y+(R>>a)+f]=V<<24|z<<16|q|0;while(f!==0);for(x=1<<l-1;R&x;)x>>=1;if(x!==0?(R&=x-1,R+=x):R=0,_++,--F[l]===0){if(l===w)break;l=t[n+o[_]]}if(l>E&&(R&u)!==c){for(a===0&&(a=E),y+=P,p=l-a,h=1<<p;p+a<w&&(h-=F[p+a],!(h<=0));)p++,h<<=1;if(d+=1<<p,e===LENS$1&&d>ENOUGH_LENS$1||e===DISTS$1&&d>ENOUGH_DISTS$1)return 1;c=R&u,r[c]=E<<24|p<<16|y-s|0}}return R!==0&&(r[y+R]=l-a<<24|64<<16|0),m.bits=E,0}var CODES=0,LENS=1,DISTS=2,Z_FINISH$1=4,Z_BLOCK$1=5,Z_TREES$1=6,Z_OK$1=0,Z_STREAM_END$1=1,Z_NEED_DICT$1=2,Z_STREAM_ERROR$1=-2,Z_DATA_ERROR$1=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR$1=-5,Z_DEFLATED$1=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592;function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Buf16(320),this.work=new Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return!e||!e.state?Z_STREAM_ERROR$1:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK$1)}function inflateReset(e){var t;return!e||!e.state?Z_STREAM_ERROR$1:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e))}function inflateReset2(e,t){var n,i;return!e||!e.state||(i=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?Z_STREAM_ERROR$1:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,inflateReset(e))}function inflateInit2(e,t){var n,i;return e?(i=new InflateState,e.state=i,i.window=null,n=inflateReset2(e,t),n!==Z_OK$1&&(e.state=null),n):Z_STREAM_ERROR$1}var virgin=!0,lenfix,distfix;function fixedtables(e){if(virgin){var t;for(lenfix=new Buf32(512),distfix=new Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,n,i){var r,s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Buf8(s.wsize)),i>=s.wsize?(arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),arraySet(s.window,t,n-i,r,s.wnext),i-=r,i?(arraySet(s.window,t,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}function inflate$1(e,t){var n,i,r,s,o,m,A,l,_,P,w,E,p,a,h=0,d,R,x,f,c,u,y,O,M=new Buf8(4),S,F,Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Z_STREAM_ERROR$1;n=e.state,n.mode===TYPE&&(n.mode=TYPEDO),o=e.next_out,r=e.output,A=e.avail_out,s=e.next_in,i=e.input,m=e.avail_in,l=n.hold,_=n.bits,P=m,w=A,O=Z_OK$1;e:for(;;)switch(n.mode){case HEAD:if(n.wrap===0){n.mode=TYPEDO;break}for(;_<16;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}if(n.wrap&2&&l===35615){n.check=0,M[0]=l&255,M[1]=l>>>8&255,n.check=crc32(n.check,M,2,0),l=0,_=0,n.mode=FLAGS;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=BAD;break}if((l&15)!==Z_DEFLATED$1){e.msg="unknown compression method",n.mode=BAD;break}if(l>>>=4,_-=4,y=(l&15)+8,n.wbits===0)n.wbits=y;else if(y>n.wbits){e.msg="invalid window size",n.mode=BAD;break}n.dmax=1<<y,e.adler=n.check=1,n.mode=l&512?DICTID:TYPE,l=0,_=0;break;case FLAGS:for(;_<16;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}if(n.flags=l,(n.flags&255)!==Z_DEFLATED$1){e.msg="unknown compression method",n.mode=BAD;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=BAD;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&(M[0]=l&255,M[1]=l>>>8&255,n.check=crc32(n.check,M,2,0)),l=0,_=0,n.mode=TIME;case TIME:for(;_<32;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}n.head&&(n.head.time=l),n.flags&512&&(M[0]=l&255,M[1]=l>>>8&255,M[2]=l>>>16&255,M[3]=l>>>24&255,n.check=crc32(n.check,M,4,0)),l=0,_=0,n.mode=OS;case OS:for(;_<16;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&(M[0]=l&255,M[1]=l>>>8&255,n.check=crc32(n.check,M,2,0)),l=0,_=0,n.mode=EXLEN;case EXLEN:if(n.flags&1024){for(;_<16;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&(M[0]=l&255,M[1]=l>>>8&255,n.check=crc32(n.check,M,2,0)),l=0,_=0}else n.head&&(n.head.extra=null);n.mode=EXTRA;case EXTRA:if(n.flags&1024&&(E=n.length,E>m&&(E=m),E&&(n.head&&(y=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),arraySet(n.head.extra,i,s,E,y)),n.flags&512&&(n.check=crc32(n.check,i,E,s)),m-=E,s+=E,n.length-=E),n.length))break e;n.length=0,n.mode=NAME;case NAME:if(n.flags&2048){if(m===0)break e;E=0;do y=i[s+E++],n.head&&y&&n.length<65536&&(n.head.name+=String.fromCharCode(y));while(y&&E<m);if(n.flags&512&&(n.check=crc32(n.check,i,E,s)),m-=E,s+=E,y)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=COMMENT;case COMMENT:if(n.flags&4096){if(m===0)break e;E=0;do y=i[s+E++],n.head&&y&&n.length<65536&&(n.head.comment+=String.fromCharCode(y));while(y&&E<m);if(n.flags&512&&(n.check=crc32(n.check,i,E,s)),m-=E,s+=E,y)break e}else n.head&&(n.head.comment=null);n.mode=HCRC;case HCRC:if(n.flags&512){for(;_<16;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}if(l!==(n.check&65535)){e.msg="header crc mismatch",n.mode=BAD;break}l=0,_=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=TYPE;break;case DICTID:for(;_<32;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}e.adler=n.check=zswap32(l),l=0,_=0,n.mode=DICT;case DICT:if(n.havedict===0)return e.next_out=o,e.avail_out=A,e.next_in=s,e.avail_in=m,n.hold=l,n.bits=_,Z_NEED_DICT$1;e.adler=n.check=1,n.mode=TYPE;case TYPE:if(t===Z_BLOCK$1||t===Z_TREES$1)break e;case TYPEDO:if(n.last){l>>>=_&7,_-=_&7,n.mode=CHECK;break}for(;_<3;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}switch(n.last=l&1,l>>>=1,_-=1,l&3){case 0:n.mode=STORED;break;case 1:if(fixedtables(n),n.mode=LEN_,t===Z_TREES$1){l>>>=2,_-=2;break e}break;case 2:n.mode=TABLE;break;case 3:e.msg="invalid block type",n.mode=BAD}l>>>=2,_-=2;break;case STORED:for(l>>>=_&7,_-=_&7;_<32;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=BAD;break}if(n.length=l&65535,l=0,_=0,n.mode=COPY_,t===Z_TREES$1)break e;case COPY_:n.mode=COPY;case COPY:if(E=n.length,E){if(E>m&&(E=m),E>A&&(E=A),E===0)break e;arraySet(r,i,s,E,o),m-=E,s+=E,A-=E,o+=E,n.length-=E;break}n.mode=TYPE;break;case TABLE:for(;_<14;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}if(n.nlen=(l&31)+257,l>>>=5,_-=5,n.ndist=(l&31)+1,l>>>=5,_-=5,n.ncode=(l&15)+4,l>>>=4,_-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=BAD;break}n.have=0,n.mode=LENLENS;case LENLENS:for(;n.have<n.ncode;){for(;_<3;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}n.lens[Q[n.have++]]=l&7,l>>>=3,_-=3}for(;n.have<19;)n.lens[Q[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},O=inflate_table(CODES,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,O){e.msg="invalid code lengths set",n.mode=BAD;break}n.have=0,n.mode=CODELENS;case CODELENS:for(;n.have<n.nlen+n.ndist;){for(;h=n.lencode[l&(1<<n.lenbits)-1],d=h>>>24,R=h>>>16&255,x=h&65535,!(d<=_);){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}if(x<16)l>>>=d,_-=d,n.lens[n.have++]=x;else{if(x===16){for(F=d+2;_<F;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}if(l>>>=d,_-=d,n.have===0){e.msg="invalid bit length repeat",n.mode=BAD;break}y=n.lens[n.have-1],E=3+(l&3),l>>>=2,_-=2}else if(x===17){for(F=d+3;_<F;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}l>>>=d,_-=d,y=0,E=3+(l&7),l>>>=3,_-=3}else{for(F=d+7;_<F;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}l>>>=d,_-=d,y=0,E=11+(l&127),l>>>=7,_-=7}if(n.have+E>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=BAD;break}for(;E--;)n.lens[n.have++]=y}}if(n.mode===BAD)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=BAD;break}if(n.lenbits=9,S={bits:n.lenbits},O=inflate_table(LENS,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,O){e.msg="invalid literal/lengths set",n.mode=BAD;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},O=inflate_table(DISTS,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,O){e.msg="invalid distances set",n.mode=BAD;break}if(n.mode=LEN_,t===Z_TREES$1)break e;case LEN_:n.mode=LEN;case LEN:if(m>=6&&A>=258){e.next_out=o,e.avail_out=A,e.next_in=s,e.avail_in=m,n.hold=l,n.bits=_,inflate_fast(e,w),o=e.next_out,r=e.output,A=e.avail_out,s=e.next_in,i=e.input,m=e.avail_in,l=n.hold,_=n.bits,n.mode===TYPE&&(n.back=-1);break}for(n.back=0;h=n.lencode[l&(1<<n.lenbits)-1],d=h>>>24,R=h>>>16&255,x=h&65535,!(d<=_);){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}if(R&&!(R&240)){for(f=d,c=R,u=x;h=n.lencode[u+((l&(1<<f+c)-1)>>f)],d=h>>>24,R=h>>>16&255,x=h&65535,!(f+d<=_);){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}l>>>=f,_-=f,n.back+=f}if(l>>>=d,_-=d,n.back+=d,n.length=x,R===0){n.mode=LIT;break}if(R&32){n.back=-1,n.mode=TYPE;break}if(R&64){e.msg="invalid literal/length code",n.mode=BAD;break}n.extra=R&15,n.mode=LENEXT;case LENEXT:if(n.extra){for(F=n.extra;_<F;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,_-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=DIST;case DIST:for(;h=n.distcode[l&(1<<n.distbits)-1],d=h>>>24,R=h>>>16&255,x=h&65535,!(d<=_);){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}if(!(R&240)){for(f=d,c=R,u=x;h=n.distcode[u+((l&(1<<f+c)-1)>>f)],d=h>>>24,R=h>>>16&255,x=h&65535,!(f+d<=_);){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}l>>>=f,_-=f,n.back+=f}if(l>>>=d,_-=d,n.back+=d,R&64){e.msg="invalid distance code",n.mode=BAD;break}n.offset=x,n.extra=R&15,n.mode=DISTEXT;case DISTEXT:if(n.extra){for(F=n.extra;_<F;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,_-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=BAD;break}n.mode=MATCH;case MATCH:if(A===0)break e;if(E=w-A,n.offset>E){if(E=n.offset-E,E>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=BAD;break}E>n.wnext?(E-=n.wnext,p=n.wsize-E):p=n.wnext-E,E>n.length&&(E=n.length),a=n.window}else a=r,p=o-n.offset,E=n.length;E>A&&(E=A),A-=E,n.length-=E;do r[o++]=a[p++];while(--E);n.length===0&&(n.mode=LEN);break;case LIT:if(A===0)break e;r[o++]=n.length,A--,n.mode=LEN;break;case CHECK:if(n.wrap){for(;_<32;){if(m===0)break e;m--,l|=i[s++]<<_,_+=8}if(w-=A,e.total_out+=w,n.total+=w,w&&(e.adler=n.check=n.flags?crc32(n.check,r,w,o-w):adler32(n.check,r,w,o-w)),w=A,(n.flags?l:zswap32(l))!==n.check){e.msg="incorrect data check",n.mode=BAD;break}l=0,_=0}n.mode=LENGTH;case LENGTH:if(n.wrap&&n.flags){for(;_<32;){if(m===0)break e;m--,l+=i[s++]<<_,_+=8}if(l!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=BAD;break}l=0,_=0}n.mode=DONE;case DONE:O=Z_STREAM_END$1;break e;case BAD:O=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR$1}return e.next_out=o,e.avail_out=A,e.next_in=s,e.avail_in=m,n.hold=l,n.bits=_,(n.wsize||w!==e.avail_out&&n.mode<BAD&&(n.mode<CHECK||t!==Z_FINISH$1))&&updatewindow(e,e.output,e.next_out,w-e.avail_out),P-=e.avail_in,w-=e.avail_out,e.total_in+=P,e.total_out+=w,n.total+=w,n.wrap&&w&&(e.adler=n.check=n.flags?crc32(n.check,r,w,e.next_out-w):adler32(n.check,r,w,e.next_out-w)),e.data_type=n.bits+(n.last?64:0)+(n.mode===TYPE?128:0)+(n.mode===LEN_||n.mode===COPY_?256:0),(P===0&&w===0||t===Z_FINISH$1)&&O===Z_OK$1&&(O=Z_BUF_ERROR$1),O}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$1}var NONE=0,DEFLATE=1,INFLATE=2,GZIP=3,GUNZIP=4,DEFLATERAW=5,INFLATERAW=6,UNZIP=7,Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_SYNC_FLUSH=2,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_ERRNO=-1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_NO_COMPRESSION=0,Z_BEST_SPEED=1,Z_BEST_COMPRESSION=9,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED=4,Z_DEFAULT_STRATEGY=0,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2,Z_DEFLATED=8;function Zlib$1(e){if(e<DEFLATE||e>UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}Zlib$1.prototype.init=function(e,t,n,i,r){this.windowBits=e,this.level=t,this.memLevel=n,this.strategy=i,(this.mode===GZIP||this.mode===GUNZIP)&&(this.windowBits+=16),this.mode===UNZIP&&(this.windowBits+=32),(this.mode===DEFLATERAW||this.mode===INFLATERAW)&&(this.windowBits=-this.windowBits),this.strm=new ZStream;var s;switch(this.mode){case DEFLATE:case GZIP:case DEFLATERAW:s=deflateInit2(this.strm,this.level,Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case INFLATE:case GUNZIP:case INFLATERAW:case UNZIP:s=inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(s!==Z_OK){this._error(s);return}this.write_in_progress=!1,this.init_done=!0};Zlib$1.prototype.params=function(){throw new Error("deflateParams Not supported")};Zlib$1.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")};Zlib$1.prototype.write=function(e,t,n,i,r,s,o){this._writeCheck(),this.write_in_progress=!0;var m=this;return browser$1.nextTick(function(){m.write_in_progress=!1;var A=m._write(e,t,n,i,r,s,o);m.callback(A[0],A[1]),m.pending_close&&m.close()}),this};function bufferSet(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}Zlib$1.prototype.writeSync=function(e,t,n,i,r,s,o){return this._writeCheck(),this._write(e,t,n,i,r,s,o)};Zlib$1.prototype._write=function(e,t,n,i,r,s,o){if(this.write_in_progress=!0,e!==Z_NO_FLUSH&&e!==Z_PARTIAL_FLUSH&&e!==Z_SYNC_FLUSH&&e!==Z_FULL_FLUSH&&e!==Z_FINISH&&e!==Z_BLOCK)throw new Error("Invalid flush value");t==null&&(t=new Buffer(0),i=0,n=0),r._set?r.set=r._set:r.set=bufferSet;var m=this.strm;m.avail_in=i,m.input=t,m.next_in=n,m.avail_out=o,m.output=r,m.next_out=s;var A;switch(this.mode){case DEFLATE:case GZIP:case DEFLATERAW:A=deflate$1(m,e);break;case UNZIP:case INFLATE:case GUNZIP:case INFLATERAW:A=inflate$1(m,e);break;default:throw new Error("Unknown mode "+this.mode)}return A!==Z_STREAM_END&&A!==Z_OK&&this._error(A),this.write_in_progress=!1,[m.avail_in,m.avail_out]};Zlib$1.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===DEFLATE||this.mode===GZIP||this.mode===DEFLATERAW?deflateEnd(this.strm):inflateEnd(this.strm),this.mode=NONE};var status;Zlib$1.prototype.reset=function(){switch(this.mode){case DEFLATE:case DEFLATERAW:status=deflateReset(this.strm);break;case INFLATE:case INFLATERAW:status=inflateReset(this.strm);break}status!==Z_OK&&this._error(status)};Zlib$1.prototype._error=function(e){this.onerror(msg[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};var _binding=Object.freeze({__proto__:null,NONE,DEFLATE,INFLATE,GZIP,GUNZIP,DEFLATERAW,INFLATERAW,UNZIP,Z_NO_FLUSH,Z_PARTIAL_FLUSH,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH,Z_BLOCK,Z_TREES,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_ERRNO,Z_STREAM_ERROR,Z_DATA_ERROR,Z_BUF_ERROR,Z_NO_COMPRESSION,Z_BEST_SPEED,Z_BEST_COMPRESSION,Z_DEFAULT_COMPRESSION,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY,Z_BINARY,Z_TEXT,Z_UNKNOWN,Z_DEFLATED,Zlib:Zlib$1});function assert(e,t){if(!e)throw new Error(t)}var binding={};Object.keys(_binding).forEach(function(e){binding[e]=_binding[e]});binding.Z_MIN_WINDOWBITS=8;binding.Z_MAX_WINDOWBITS=15;binding.Z_DEFAULT_WINDOWBITS=15;binding.Z_MIN_CHUNK=64;binding.Z_MAX_CHUNK=1/0;binding.Z_DEFAULT_CHUNK=16*1024;binding.Z_MIN_MEMLEVEL=1;binding.Z_MAX_MEMLEVEL=9;binding.Z_DEFAULT_MEMLEVEL=8;binding.Z_MIN_LEVEL=-1;binding.Z_MAX_LEVEL=9;binding.Z_DEFAULT_LEVEL=binding.Z_DEFAULT_COMPRESSION;var codes={Z_OK:binding.Z_OK,Z_STREAM_END:binding.Z_STREAM_END,Z_NEED_DICT:binding.Z_NEED_DICT,Z_ERRNO:binding.Z_ERRNO,Z_STREAM_ERROR:binding.Z_STREAM_ERROR,Z_DATA_ERROR:binding.Z_DATA_ERROR,Z_MEM_ERROR:binding.Z_MEM_ERROR,Z_BUF_ERROR:binding.Z_BUF_ERROR,Z_VERSION_ERROR:binding.Z_VERSION_ERROR};Object.keys(codes).forEach(function(e){codes[codes[e]]=e});function createDeflate(e){return new Deflate(e)}function createInflate(e){return new Inflate(e)}function createDeflateRaw(e){return new DeflateRaw(e)}function createInflateRaw(e){return new InflateRaw(e)}function createGzip(e){return new Gzip(e)}function createGunzip(e){return new Gunzip(e)}function createUnzip(e){return new Unzip(e)}function deflate(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Deflate(t),e,n)}function deflateSync(e,t){return zlibBufferSync(new Deflate(t),e)}function gzip(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Gzip(t),e,n)}function gzipSync(e,t){return zlibBufferSync(new Gzip(t),e)}function deflateRaw(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new DeflateRaw(t),e,n)}function deflateRawSync(e,t){return zlibBufferSync(new DeflateRaw(t),e)}function unzip(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Unzip(t),e,n)}function unzipSync(e,t){return zlibBufferSync(new Unzip(t),e)}function inflate(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Inflate(t),e,n)}function inflateSync(e,t){return zlibBufferSync(new Inflate(t),e)}function gunzip(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Gunzip(t),e,n)}function gunzipSync(e,t){return zlibBufferSync(new Gunzip(t),e)}function inflateRaw(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new InflateRaw(t),e,n)}function inflateRawSync(e,t){return zlibBufferSync(new InflateRaw(t),e)}function zlibBuffer(e,t,n){var i=[],r=0;e.on("error",o),e.on("end",m),e.end(t),s();function s(){for(var A;(A=e.read())!==null;)i.push(A),r+=A.length;e.once("readable",s)}function o(A){e.removeListener("end",m),e.removeListener("readable",s),n(A)}function m(){var A=Buffer.concat(i,r);i=[],n(null,A),e.close()}}function zlibBufferSync(e,t){if(typeof t=="string"&&(t=new Buffer(t)),!Buffer.isBuffer(t))throw new TypeError("Not a string or buffer");var n=binding.Z_FINISH;return e._processChunk(t,n)}function Deflate(e){if(!(this instanceof Deflate))return new Deflate(e);Zlib.call(this,e,binding.DEFLATE)}function Inflate(e){if(!(this instanceof Inflate))return new Inflate(e);Zlib.call(this,e,binding.INFLATE)}function Gzip(e){if(!(this instanceof Gzip))return new Gzip(e);Zlib.call(this,e,binding.GZIP)}function Gunzip(e){if(!(this instanceof Gunzip))return new Gunzip(e);Zlib.call(this,e,binding.GUNZIP)}function DeflateRaw(e){if(!(this instanceof DeflateRaw))return new DeflateRaw(e);Zlib.call(this,e,binding.DEFLATERAW)}function InflateRaw(e){if(!(this instanceof InflateRaw))return new InflateRaw(e);Zlib.call(this,e,binding.INFLATERAW)}function Unzip(e){if(!(this instanceof Unzip))return new Unzip(e);Zlib.call(this,e,binding.UNZIP)}function Zlib(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||binding.Z_DEFAULT_CHUNK,Transform.call(this,e),e.flush&&e.flush!==binding.Z_NO_FLUSH&&e.flush!==binding.Z_PARTIAL_FLUSH&&e.flush!==binding.Z_SYNC_FLUSH&&e.flush!==binding.Z_FULL_FLUSH&&e.flush!==binding.Z_FINISH&&e.flush!==binding.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||binding.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<binding.Z_MIN_CHUNK||e.chunkSize>binding.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<binding.Z_MIN_WINDOWBITS||e.windowBits>binding.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<binding.Z_MIN_LEVEL||e.level>binding.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<binding.Z_MIN_MEMLEVEL||e.memLevel>binding.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=binding.Z_FILTERED&&e.strategy!=binding.Z_HUFFMAN_ONLY&&e.strategy!=binding.Z_RLE&&e.strategy!=binding.Z_FIXED&&e.strategy!=binding.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!Buffer.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new binding.Zlib(t);var n=this;this._hadError=!1,this._binding.onerror=function(s,o){n._binding=null,n._hadError=!0;var m=new Error(s);m.errno=o,m.code=binding.codes[o],n.emit("error",m)};var i=binding.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(i=e.level);var r=binding.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(r=e.strategy),this._binding.init(e.windowBits||binding.Z_DEFAULT_WINDOWBITS,i,e.memLevel||binding.Z_DEFAULT_MEMLEVEL,r,e.dictionary),this._buffer=new Buffer(this._chunkSize),this._offset=0,this._closed=!1,this._level=i,this._strategy=r,this.once("end",this.close)}inherits$1(Zlib,Transform);Zlib.prototype.params=function(e,t,n){if(e<binding.Z_MIN_LEVEL||e>binding.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=binding.Z_FILTERED&&t!=binding.Z_HUFFMAN_ONLY&&t!=binding.Z_RLE&&t!=binding.Z_FIXED&&t!=binding.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var i=this;this.flush(binding.Z_SYNC_FLUSH,function(){i._binding.params(e,t),i._hadError||(i._level=e,i._strategy=t,n&&n())})}else browser$1.nextTick(n)};Zlib.prototype.reset=function(){return this._binding.reset()};Zlib.prototype._flush=function(e){this._transform(new Buffer(0),"",e)};Zlib.prototype.flush=function(e,t){var n=this._writableState;if((typeof e=="function"||e===void 0&&!t)&&(t=e,e=binding.Z_FULL_FLUSH),n.ended)t&&browser$1.nextTick(t);else if(n.ending)t&&this.once("end",t);else if(n.needDrain){var i=this;this.once("drain",function(){i.flush(t)})}else this._flushFlag=e,this.write(new Buffer(0),"",t)};Zlib.prototype.close=function(e){if(e&&browser$1.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;browser$1.nextTick(function(){t.emit("close")})}};Zlib.prototype._transform=function(e,t,n){var i,r=this._writableState,s=r.ending||r.ended,o=s&&(!e||r.length===e.length);if(!e===null&&!Buffer.isBuffer(e))return n(new Error("invalid input"));o?i=binding.Z_FINISH:(i=this._flushFlag,e.length>=r.length&&(this._flushFlag=this._opts.flush||binding.Z_NO_FLUSH)),this._processChunk(e,i,n)};Zlib.prototype._processChunk=function(e,t,n){var i=e&&e.length,r=this._chunkSize-this._offset,s=0,o=this,m=typeof n=="function";if(!m){var A=[],l=0,_;this.on("error",function(a){_=a});do var P=this._binding.writeSync(t,e,s,i,this._buffer,this._offset,r);while(!this._hadError&&p(P[0],P[1]));if(this._hadError)throw _;var w=Buffer.concat(A,l);return this.close(),w}var E=this._binding.write(t,e,s,i,this._buffer,this._offset,r);E.buffer=e,E.callback=p;function p(a,h){if(!o._hadError){var d=r-h;if(assert(d>=0,"have should not go down"),d>0){var R=o._buffer.slice(o._offset,o._offset+d);o._offset+=d,m?o.push(R):(A.push(R),l+=R.length)}if((h===0||o._offset>=o._chunkSize)&&(r=o._chunkSize,o._offset=0,o._buffer=new Buffer(o._chunkSize)),h===0){if(s+=i-a,i=a,!m)return!0;var x=o._binding.write(t,e,s,i,o._buffer,o._offset,o._chunkSize);x.callback=p,x.buffer=e;return}if(!m)return!1;n()}}};inherits$1(Deflate,Zlib);inherits$1(Inflate,Zlib);inherits$1(Gzip,Zlib);inherits$1(Gunzip,Zlib);inherits$1(DeflateRaw,Zlib);inherits$1(InflateRaw,Zlib);inherits$1(Unzip,Zlib);var _polyfillNode_zlib={codes,createDeflate,createInflate,createDeflateRaw,createInflateRaw,createGzip,createGunzip,createUnzip,deflate,deflateSync,gzip,gzipSync,deflateRaw,deflateRawSync,unzip,unzipSync,inflate,inflateSync,gunzip,gunzipSync,inflateRaw,inflateRawSync,Deflate,Inflate,Gzip,Gunzip,DeflateRaw,InflateRaw,Unzip,Zlib},_polyfillNode_zlib$1=Object.freeze({__proto__:null,codes,createDeflate,createInflate,createDeflateRaw,createInflateRaw,createGzip,createGunzip,createUnzip,deflate,deflateSync,gzip,gzipSync,deflateRaw,deflateRawSync,unzip,unzipSync,inflate,inflateSync,gunzip,gunzipSync,inflateRaw,inflateRawSync,Deflate,Inflate,Gzip,Gunzip,DeflateRaw,InflateRaw,Unzip,Zlib,default:_polyfillNode_zlib}),require$$2=getAugmentedNamespace(_polyfillNode_zlib$1),hasFetch=isFunction$2(global$1.fetch)&&isFunction$2(global$1.ReadableStream),_blobConstructor;function blobConstructor(){if(typeof _blobConstructor<"u")return _blobConstructor;try{new global$1.Blob([new ArrayBuffer(1)]),_blobConstructor=!0}catch{_blobConstructor=!1}return _blobConstructor}var xhr;function checkTypeSupport(e){xhr||(xhr=new global$1.XMLHttpRequest,xhr.open("GET",global$1.location.host?"/":"https://example.com"));try{return xhr.responseType=e,xhr.responseType===e}catch{return!1}}var haveArrayBuffer=typeof global$1.ArrayBuffer<"u",haveSlice=haveArrayBuffer&&isFunction$2(global$1.ArrayBuffer.prototype.slice),arraybuffer=haveArrayBuffer&&checkTypeSupport("arraybuffer"),msstream=!hasFetch&&haveSlice&&checkTypeSupport("ms-stream"),mozchunkedarraybuffer=!hasFetch&&haveArrayBuffer&&checkTypeSupport("moz-chunked-arraybuffer"),overrideMimeType=isFunction$2(xhr.overrideMimeType),vbArray=isFunction$2(global$1.VBArray);function isFunction$2(e){return typeof e=="function"}xhr=null;var rStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};function IncomingMessage(e,t,n){var i=this;Readable.call(i),i._mode=n,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",function(){browser$1.nextTick(function(){i.emit("close")})});var r;if(n==="fetch"){i._fetchResponse=t,i.url=t.url,i.statusCode=t.status,i.statusMessage=t.statusText;for(var s,o,m=t.headers[Symbol.iterator]();s=(o=m.next()).value,!o.done;)i.headers[s[0].toLowerCase()]=s[1],i.rawHeaders.push(s[0],s[1]);var A=t.body.getReader();r=function(){A.read().then(function(w){if(!i._destroyed){if(w.done){i.push(null);return}i.push(new Buffer(w.value)),r()}})},r()}else{i._xhr=e,i._pos=0,i.url=e.responseURL,i.statusCode=e.status,i.statusMessage=e.statusText;var l=e.getAllResponseHeaders().split(/\r?\n/);if(l.forEach(function(w){var E=w.match(/^([^:]+):\s*(.*)/);if(E){var p=E[1].toLowerCase();p==="set-cookie"?(i.headers[p]===void 0&&(i.headers[p]=[]),i.headers[p].push(E[2])):i.headers[p]!==void 0?i.headers[p]+=", "+E[2]:i.headers[p]=E[2],i.rawHeaders.push(E[1],E[2])}}),i._charset="x-user-defined",!overrideMimeType){var _=i.rawHeaders["mime-type"];if(_){var P=_.match(/;\s*charset=([^;])(;|$)/);P&&(i._charset=P[1].toLowerCase())}i._charset||(i._charset="utf-8")}}}inherits$1(IncomingMessage,Readable);IncomingMessage.prototype._read=function(){};IncomingMessage.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==rStates.DONE)break;try{n=new global$1.VBArray(t.responseBody).toArray()}catch{}if(n!==null){e.push(new Buffer(n));break}case"text":try{n=t.responseText}catch{e._mode="text:vbarray";break}if(n.length>e._pos){var i=n.substr(e._pos);if(e._charset==="x-user-defined"){for(var r=new Buffer(i.length),s=0;s<i.length;s++)r[s]=i.charCodeAt(s)&255;e.push(r)}else e.push(i,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==rStates.DONE||!t.response)break;n=t.response,e.push(new Buffer(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==rStates.LOADING||!n)break;e.push(new Buffer(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==rStates.LOADING)break;var o=new global$1.MSStreamReader;o.onprogress=function(){o.result.byteLength>e._pos&&(e.push(new Buffer(new Uint8Array(o.result.slice(e._pos)))),e._pos=o.result.byteLength)},o.onload=function(){e.push(null)},o.readAsArrayBuffer(n);break}e._xhr.readyState===rStates.DONE&&e._mode!=="ms-stream"&&e.push(null)};function toArrayBuffer(e){if(e instanceof Uint8Array){if(e.byteOffset===0&&e.byteLength===e.buffer.byteLength)return e.buffer;if(typeof e.buffer.slice=="function")return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(isBuffer(e)){for(var t=new Uint8Array(e.length),n=e.length,i=0;i<n;i++)t[i]=e[i];return t.buffer}else throw new Error("Argument must be a Buffer")}function decideMode(e,t){return hasFetch&&t?"fetch":mozchunkedarraybuffer?"moz-chunked-arraybuffer":msstream?"ms-stream":arraybuffer&&e?"arraybuffer":vbArray&&e?"text:vbarray":"text"}function ClientRequest(e){var t=this;Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new Buffer(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(r){t.setHeader(r,e.headers[r])});var n,i=!0;if(e.mode==="disable-fetch")i=!1,n=!0;else if(e.mode==="prefer-streaming")n=!1;else if(e.mode==="allow-wrong-content-type")n=!overrideMimeType;else if(!e.mode||e.mode==="default"||e.mode==="prefer-fast")n=!0;else throw new Error("Invalid value for opts.mode");t._mode=decideMode(n,i),t.on("finish",function(){t._onFinish()})}inherits$1(ClientRequest,Writable);var unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];ClientRequest.prototype.setHeader=function(e,t){var n=this,i=e.toLowerCase();unsafeHeaders.indexOf(i)===-1&&(n._headers[i]={name:e,value:t})};ClientRequest.prototype.getHeader=function(e){var t=this;return t._headers[e.toLowerCase()].value};ClientRequest.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]};ClientRequest.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,n=e._headers,i;if((t.method==="POST"||t.method==="PUT"||t.method==="PATCH")&&(blobConstructor()?i=new global$1.Blob(e._body.map(function(o){return toArrayBuffer(o)}),{type:(n["content-type"]||{}).value||""}):i=Buffer.concat(e._body).toString()),e._mode==="fetch"){var r=Object.keys(n).map(function(o){return[n[o].name,n[o].value]});global$1.fetch(e._opts.url,{method:e._opts.method,headers:r,body:i,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(o){e._fetchResponse=o,e._connect()},function(o){e.emit("error",o)})}else{var s=e._xhr=new global$1.XMLHttpRequest;try{s.open(e._opts.method,e._opts.url,!0)}catch(o){browser$1.nextTick(function(){e.emit("error",o)});return}"responseType"in s&&(s.responseType=e._mode.split(":")[0]),"withCredentials"in s&&(s.withCredentials=!!t.withCredentials),e._mode==="text"&&"overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(n).forEach(function(o){s.setRequestHeader(n[o].name,n[o].value)}),e._response=null,s.onreadystatechange=function(){switch(s.readyState){case rStates.LOADING:case rStates.DONE:e._onXHRProgress();break}},e._mode==="moz-chunked-arraybuffer"&&(s.onprogress=function(){e._onXHRProgress()}),s.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{s.send(i)}catch(o){browser$1.nextTick(function(){e.emit("error",o)});return}}}};function statusValid(e){try{var t=e.status;return t!==null&&t!==0}catch{return!1}}ClientRequest.prototype._onXHRProgress=function(){var e=this;!statusValid(e._xhr)||e._destroyed||(e._response||e._connect(),e._response._onXHRProgress())};ClientRequest.prototype._connect=function(){var e=this;e._destroyed||(e._response=new IncomingMessage(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))};ClientRequest.prototype._write=function(e,t,n){var i=this;i._body.push(e),n()};ClientRequest.prototype.abort=ClientRequest.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()};ClientRequest.prototype.end=function(e,t,n){var i=this;typeof e=="function"&&(n=e,e=void 0),Writable.prototype.end.call(i,e,t,n)};ClientRequest.prototype.flushHeaders=function(){};ClientRequest.prototype.setTimeout=function(){};ClientRequest.prototype.setNoDelay=function(){};ClientRequest.prototype.setSocketKeepAlive=function(){};/*! https://mths.be/punycode v1.4.1 by @mathias */var maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(e){throw new RangeError(errors[e])}function map$1(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function mapDomain(e,t){var n=e.split("@"),i="";n.length>1&&(i=n[0]+"@",e=n[1]),e=e.replace(regexSeparators,".");var r=e.split("."),s=map$1(r,t).join(".");return i+s}function ucs2decode(e){for(var t=[],n=0,i=e.length,r,s;n<i;)r=e.charCodeAt(n++),r>=55296&&r<=56319&&n<i?(s=e.charCodeAt(n++),(s&64512)==56320?t.push(((r&1023)<<10)+(s&1023)+65536):(t.push(r),n--)):t.push(r);return t}function digitToBasic(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function adapt(e,t,n){var i=0;for(e=n?floor(e/damp):e>>1,e+=floor(e/t);e>baseMinusTMin*tMax>>1;i+=base)e=floor(e/baseMinusTMin);return floor(i+(baseMinusTMin+1)*e/(e+skew))}function encode(e){var t,n,i,r,s,o,m,A,l,_,P,w=[],E,p,a,h;for(e=ucs2decode(e),E=e.length,t=initialN,n=0,s=initialBias,o=0;o<E;++o)P=e[o],P<128&&w.push(stringFromCharCode(P));for(i=r=w.length,r&&w.push(delimiter);i<E;){for(m=maxInt,o=0;o<E;++o)P=e[o],P>=t&&P<m&&(m=P);for(p=i+1,m-t>floor((maxInt-n)/p)&&error("overflow"),n+=(m-t)*p,t=m,o=0;o<E;++o)if(P=e[o],P<t&&++n>maxInt&&error("overflow"),P==t){for(A=n,l=base;_=l<=s?tMin:l>=s+tMax?tMax:l-s,!(A<_);l+=base)h=A-_,a=base-_,w.push(stringFromCharCode(digitToBasic(_+h%a,0))),A=floor(h/a);w.push(stringFromCharCode(digitToBasic(A,0))),s=adapt(n,p,i==r),n=0,++i}++n,++t}return w.join("")}function toASCII(e){return mapDomain(e,function(t){return regexNonASCII.test(t)?"xn--"+encode(t):t})}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function stringifyPrimitive(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function stringify(e,t,n,i){return t=t||"&",n=n||"=",e===null&&(e=void 0),typeof e=="object"?map(objectKeys(e),function(r){var s=encodeURIComponent(stringifyPrimitive(r))+n;return isArray(e[r])?map(e[r],function(o){return s+encodeURIComponent(stringifyPrimitive(o))}).join(t):s+encodeURIComponent(stringifyPrimitive(e[r]))}).join(t):i?encodeURIComponent(stringifyPrimitive(i))+n+encodeURIComponent(stringifyPrimitive(e)):""}function map(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var objectKeys=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t};function parse$1(e,t,n,i){t=t||"&",n=n||"=";var r={};if(typeof e!="string"||e.length===0)return r;var s=/\+/g;e=e.split(t);var o=1e3;i&&typeof i.maxKeys=="number"&&(o=i.maxKeys);var m=e.length;o>0&&m>o&&(m=o);for(var A=0;A<m;++A){var l=e[A].replace(s,"%20"),_=l.indexOf(n),P,w,E,p;_>=0?(P=l.substr(0,_),w=l.substr(_+1)):(P=l,w=""),E=decodeURIComponent(P),p=decodeURIComponent(w),hasOwnProperty(r,E)?isArray(r[E])?r[E].push(p):r[E]=[r[E],p]:r[E]=p}return r}var _polyfillNode_url={parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject,fileURLToPath:urlFileURLToPath,format:urlFormat,Url};function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(e,t,n){if(e&&isObject(e)&&e instanceof Url)return e;var i=new Url;return i.parse(e,t,n),i}Url.prototype.parse=function(e,t,n){return parse(this,e,t,n)};function parse(e,t,n,i){if(!isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),s=r!==-1&&r<t.indexOf("#")?"?":"#",o=t.split(s),m=/\\/g;o[0]=o[0].replace(m,"/"),t=o.join(s);var A=t;if(A=A.trim(),!i&&t.split("#").length===1){var l=simplePathPattern.exec(A);if(l)return e.path=A,e.href=A,e.pathname=l[1],l[2]?(e.search=l[2],n?e.query=parse$1(e.search.substr(1)):e.query=e.search.substr(1)):n&&(e.search="",e.query={}),e}var _=protocolPattern.exec(A);if(_){_=_[0];var P=_.toLowerCase();e.protocol=P,A=A.substr(_.length)}if(i||_||A.match(/^\/\/[^@\/]+@[^@\/]+/)){var w=A.substr(0,2)==="//";w&&!(_&&hostlessProtocol[_])&&(A=A.substr(2),e.slashes=!0)}var E,p,a,h;if(!hostlessProtocol[_]&&(w||_&&!slashedProtocol[_])){var d=-1;for(E=0;E<hostEndingChars.length;E++)p=A.indexOf(hostEndingChars[E]),p!==-1&&(d===-1||p<d)&&(d=p);var R,x;for(d===-1?x=A.lastIndexOf("@"):x=A.lastIndexOf("@",d),x!==-1&&(R=A.slice(0,x),A=A.slice(x+1),e.auth=decodeURIComponent(R)),d=-1,E=0;E<nonHostChars.length;E++)p=A.indexOf(nonHostChars[E]),p!==-1&&(d===-1||p<d)&&(d=p);d===-1&&(d=A.length),e.host=A.slice(0,d),A=A.slice(d),parseHost(e),e.hostname=e.hostname||"";var f=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]";if(!f){var c=e.hostname.split(/\./);for(E=0,a=c.length;E<a;E++){var u=c[E];if(u&&!u.match(hostnamePartPattern)){for(var y="",O=0,M=u.length;O<M;O++)u.charCodeAt(O)>127?y+="x":y+=u[O];if(!y.match(hostnamePartPattern)){var S=c.slice(0,E),F=c.slice(E+1),Q=u.match(hostnamePartStart);Q&&(S.push(Q[1]),F.unshift(Q[2])),F.length&&(A="/"+F.join(".")+A),e.hostname=S.join(".");break}}}}e.hostname.length>hostnameMaxLen?e.hostname="":e.hostname=e.hostname.toLowerCase(),f||(e.hostname=toASCII(e.hostname)),h=e.port?":"+e.port:"";var re=e.hostname||"";e.host=re+h,e.href+=e.host,f&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),A[0]!=="/"&&(A="/"+A))}if(!unsafeProtocol[P])for(E=0,a=autoEscape.length;E<a;E++){var J=autoEscape[E];if(A.indexOf(J)!==-1){var V=encodeURIComponent(J);V===J&&(V=escape(J)),A=A.split(J).join(V)}}var z=A.indexOf("#");z!==-1&&(e.hash=A.substr(z),A=A.slice(0,z));var q=A.indexOf("?");if(q!==-1?(e.search=A.substr(q),e.query=A.substr(q+1),n&&(e.query=parse$1(e.query)),A=A.slice(0,q)):n&&(e.search="",e.query={}),A&&(e.pathname=A),slashedProtocol[P]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){h=e.pathname||"";var Y=e.search||"";e.path=h+Y}return e.href=format(e),e}function urlFileURLToPath(e){if(typeof e=="string")e=new Url().parse(e);else if(!(e instanceof Url))throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof e+String(e));if(e.protocol!=="file:")throw new TypeError("The URL must be of scheme file");return getPathFromURLPosix(e)}function getPathFromURLPosix(e){const t=e.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){const i=t.codePointAt(n+2)|32;if(t[n+1]==="2"&&i===102)throw new TypeError("must not include encoded / characters")}return decodeURIComponent(t)}function urlFormat(e){return isString(e)&&(e=parse({},e)),format(e)}function format(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var n=e.protocol||"",i=e.pathname||"",r=e.hash||"",s=!1,o="";e.host?s=t+e.host:e.hostname&&(s=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(s+=":"+e.port)),e.query&&isObject(e.query)&&Object.keys(e.query).length&&(o=stringify(e.query));var m=e.search||o&&"?"+o||"";return n&&n.substr(-1)!==":"&&(n+=":"),e.slashes||(!n||slashedProtocol[n])&&s!==!1?(s="//"+(s||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):s||(s=""),r&&r.charAt(0)!=="#"&&(r="#"+r),m&&m.charAt(0)!=="?"&&(m="?"+m),i=i.replace(/[?#]/g,function(A){return encodeURIComponent(A)}),m=m.replace("#","%23"),n+s+i+m+r}Url.prototype.format=function(){return format(this)};function urlResolve(e,t){return urlParse(e,!1,!0).resolve(t)}Url.prototype.resolve=function(e){return this.resolveObject(urlParse(e,!1,!0)).format()};function urlResolveObject(e,t){return e?urlParse(e,!1,!0).resolveObject(t):t}Url.prototype.resolveObject=function(e){if(isString(e)){var t=new Url;t.parse(e,!1,!0),e=t}for(var n=new Url,i=Object.keys(this),r=0;r<i.length;r++){var s=i[r];n[s]=this[s]}if(n.hash=e.hash,e.href==="")return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),m=0;m<o.length;m++){var A=o[m];A!=="protocol"&&(n[A]=e[A])}return slashedProtocol[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}var l;if(e.protocol&&e.protocol!==n.protocol){if(!slashedProtocol[e.protocol]){for(var _=Object.keys(e),P=0;P<_.length;P++){var w=_[P];n[w]=e[w]}return n.href=n.format(),n}if(n.protocol=e.protocol,!e.host&&!hostlessProtocol[e.protocol]){for(l=(e.pathname||"").split("/");l.length&&!(e.host=l.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),l[0]!==""&&l.unshift(""),l.length<2&&l.unshift(""),n.pathname=l.join("/")}else n.pathname=e.pathname;if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var E=n.pathname||"",p=n.search||"";n.path=E+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var a=n.pathname&&n.pathname.charAt(0)==="/",h=e.host||e.pathname&&e.pathname.charAt(0)==="/",d=h||a||n.host&&e.pathname,R=d,x=n.pathname&&n.pathname.split("/")||[],f=n.protocol&&!slashedProtocol[n.protocol];l=e.pathname&&e.pathname.split("/")||[],f&&(n.hostname="",n.port=null,n.host&&(x[0]===""?x[0]=n.host:x.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(l[0]===""?l[0]=e.host:l.unshift(e.host)),e.host=null),d=d&&(l[0]===""||x[0]===""));var c;if(h)n.host=e.host||e.host===""?e.host:n.host,n.hostname=e.hostname||e.hostname===""?e.hostname:n.hostname,n.search=e.search,n.query=e.query,x=l;else if(l.length)x||(x=[]),x.pop(),x=x.concat(l),n.search=e.search,n.query=e.query;else if(!isNullOrUndefined(e.search))return f&&(n.hostname=n.host=x.shift(),c=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1,c&&(n.auth=c.shift(),n.host=n.hostname=c.shift())),n.search=e.search,n.query=e.query,(!isNull(n.pathname)||!isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var u=x.slice(-1)[0],y=(n.host||e.host||x.length>1)&&(u==="."||u==="..")||u==="",O=0,M=x.length;M>=0;M--)u=x[M],u==="."?x.splice(M,1):u===".."?(x.splice(M,1),O++):O&&(x.splice(M,1),O--);if(!d&&!R)for(;O--;O)x.unshift("..");d&&x[0]!==""&&(!x[0]||x[0].charAt(0)!=="/")&&x.unshift(""),y&&x.join("/").substr(-1)!=="/"&&x.push("");var S=x[0]===""||x[0]&&x[0].charAt(0)==="/";return f&&(n.hostname=n.host=S?"":x.length?x.shift():"",c=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1,c&&(n.auth=c.shift(),n.host=n.hostname=c.shift())),d=d||n.host&&x.length,d&&!S&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),(!isNull(n.pathname)||!isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n};Url.prototype.parseHost=function(){return parseHost(this)};function parseHost(e){var t=e.host,n=portPattern.exec(t);n&&(n=n[0],n!==":"&&(e.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(e.hostname=t)}var _polyfillNode_url$1=Object.freeze({__proto__:null,parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject,fileURLToPath:urlFileURLToPath,format:urlFormat,default:_polyfillNode_url,Url});function request$1(e,t){typeof e=="string"&&(e=urlParse(e));var n=global$1.location.protocol.search(/^https?:$/)===-1?"http:":"",i=e.protocol||n,r=e.hostname||e.host,s=e.port,o=e.path||"/";r&&r.indexOf(":")!==-1&&(r="["+r+"]"),e.url=(r?i+"//"+r:"")+(s?":"+s:"")+o,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var m=new ClientRequest(e);return t&&m.on("response",t),m}function get$1(e,t){var n=request$1(e,t);return n.end(),n}function Agent$1(){}Agent$1.defaultMaxSockets=4;var METHODS$1=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],STATUS_CODES$1={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},_polyfillNode_http={request:request$1,get:get$1,Agent:Agent$1,METHODS:METHODS$1,STATUS_CODES:STATUS_CODES$1},_polyfillNode_http$1=Object.freeze({__proto__:null,request:request$1,get:get$1,Agent:Agent$1,METHODS:METHODS$1,STATUS_CODES:STATUS_CODES$1,default:_polyfillNode_http}),require$$3=getAugmentedNamespace(_polyfillNode_http$1);function request(e,t){typeof e=="string"&&(e=urlParse(e));var n=global$1.location.protocol.search(/^https?:$/)===-1?"http:":"",i=e.protocol||n,r=e.hostname||e.host,s=e.port,o=e.path||"/";r&&r.indexOf(":")!==-1&&(r="["+r+"]"),e.url=(r?i+"//"+r:"")+(s?":"+s:"")+o,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var m=new ClientRequest(e);return t&&m.on("response",t),m}function get(e,t){var n=request(e,t);return n.end(),n}function Agent(){}Agent.defaultMaxSockets=4;var METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},_polyfillNode_https={request,get,Agent,METHODS,STATUS_CODES},_polyfillNode_https$1=Object.freeze({__proto__:null,request,get,Agent,METHODS,STATUS_CODES,default:_polyfillNode_https}),require$$4=getAugmentedNamespace(_polyfillNode_https$1),require$$5=getAugmentedNamespace(_polyfillNode_url$1);(function(module,exports){(function(t,n){module.exports=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.UNSUPPORTED_FEATURES=t.TextRenderingMode=t.StreamType=t.RenderingIntentFlag=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FontType=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.arrayByteLength=se,t.arraysToBytes=de,t.assert=T,t.bytesToString=N,t.createPromiseCapability=_e,t.createValidAbsoluteUrl=I,t.escapeString=Ce,t.getModificationDate=ae,t.getVerbosityLevel=ie,t.info=oe,t.isArrayBuffer=Fe,t.isArrayEqual=Xe,t.isAscii=De,t.objectFromMap=ne,t.objectSize=le,t.setVerbosityLevel=Y,t.shadow=B,t.string32=te,t.stringToBytes=W,t.stringToPDFString=Te,t.stringToUTF16BEString=Oe,t.stringToUTF8String=ze,t.unreachable=$,t.utf8StringToString=Me,t.warn=be,n(2);const i=[1,0,0,1,0,0];t.IDENTITY_MATRIX=i;const r=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=r;const s=1.35;t.LINE_FACTOR=s;const o=.35;t.LINE_DESCENT_FACTOR=o;const m={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=m;const A={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=A;const l="pdfjs_internal_editor_";t.AnnotationEditorPrefix=l;const _={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorType=_;const P={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.AnnotationEditorParamsType=P;const w={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=w;const E={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=E;const p={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=p;const a={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=a;const h={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=h;const d={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=d;const R={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=R;const x={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=x;const f={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=f;const c={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=c;const u={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=u;const y={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=y;const O={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=O;const M={O:"PageOpen",C:"PageClose"};t.PageActionEventType=M;const S={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};t.StreamType=S;const F={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};t.FontType=F;const Q={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=Q;const re={NONE:0,BINARY:1,STREAM:2};t.CMapCompressionType=re;const J={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=J;const V={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};t.UNSUPPORTED_FEATURES=V;const z={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=z;let q=Q.WARNINGS;function Y(ee){Number.isInteger(ee)&&(q=ee)}function ie(){return q}function oe(ee){q>=Q.INFOS&&console.log(`Info: ${ee}`)}function be(ee){q>=Q.WARNINGS&&console.log(`Warning: ${ee}`)}function $(ee){throw new Error(ee)}function T(ee,G){ee||$(G)}function b(ee){if(!ee)return!1;switch(ee.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function I(ee,G=null,Z=null){if(!ee)return null;try{if(Z&&typeof ee=="string"){if(Z.addDefaultProtocol&&ee.startsWith("www.")){const Ee=ee.match(/\./g);Ee&&Ee.length>=2&&(ee=`http://${ee}`)}if(Z.tryConvertEncoding)try{ee=ze(ee)}catch{}}const ge=G?new URL(ee,G):new URL(ee);if(b(ge))return ge}catch{}return null}function B(ee,G,Z){return Object.defineProperty(ee,G,{value:Z,enumerable:!0,configurable:!0,writable:!1}),Z}const H=function(){function G(Z,ge){this.constructor===G&&$("Cannot initialize BaseException."),this.message=Z,this.name=ge}return G.prototype=new Error,G.constructor=G,G}();t.BaseException=H;class j extends H{constructor(G,Z){super(G,"PasswordException"),this.code=Z}}t.PasswordException=j;class K extends H{constructor(G,Z){super(G,"UnknownErrorException"),this.details=Z}}t.UnknownErrorException=K;class X extends H{constructor(G){super(G,"InvalidPDFException")}}t.InvalidPDFException=X;class g extends H{constructor(G){super(G,"MissingPDFException")}}t.MissingPDFException=g;class C extends H{constructor(G,Z){super(G,"UnexpectedResponseException"),this.status=Z}}t.UnexpectedResponseException=C;class k extends H{constructor(G){super(G,"FormatError")}}t.FormatError=k;class D extends H{constructor(G){super(G,"AbortException")}}t.AbortException=D;function N(ee){(typeof ee!="object"||ee===null||ee.length===void 0)&&$("Invalid argument for bytesToString");const G=ee.length,Z=8192;if(G<Z)return String.fromCharCode.apply(null,ee);const ge=[];for(let Ee=0;Ee<G;Ee+=Z){const Ae=Math.min(Ee+Z,G),Se=ee.subarray(Ee,Ae);ge.push(String.fromCharCode.apply(null,Se))}return ge.join("")}function W(ee){typeof ee!="string"&&$("Invalid argument for stringToBytes");const G=ee.length,Z=new Uint8Array(G);for(let ge=0;ge<G;++ge)Z[ge]=ee.charCodeAt(ge)&255;return Z}function se(ee){if(ee.length!==void 0)return ee.length;if(ee.byteLength!==void 0)return ee.byteLength;$("Invalid argument for arrayByteLength")}function de(ee){const G=ee.length;if(G===1&&ee[0]instanceof Uint8Array)return ee[0];let Z=0;for(let Ae=0;Ae<G;Ae++)Z+=se(ee[Ae]);let ge=0;const Ee=new Uint8Array(Z);for(let Ae=0;Ae<G;Ae++){let Se=ee[Ae];Se instanceof Uint8Array||(typeof Se=="string"?Se=W(Se):Se=new Uint8Array(Se));const Pe=Se.byteLength;Ee.set(Se,ge),ge+=Pe}return Ee}function te(ee){return String.fromCharCode(ee>>24&255,ee>>16&255,ee>>8&255,ee&255)}function le(ee){return Object.keys(ee).length}function ne(ee){const G=Object.create(null);for(const[Z,ge]of ee)G[Z]=ge;return G}function he(){const ee=new Uint8Array(4);return ee[0]=1,new Uint32Array(ee.buffer,0,1)[0]===1}function pe(){try{return new Function(""),!0}catch{return!1}}class U{static get isLittleEndian(){return B(this,"isLittleEndian",he())}static get isEvalSupported(){return B(this,"isEvalSupported",pe())}static get isOffscreenCanvasSupported(){return B(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}t.FeatureTest=U;const fe=[...Array(256).keys()].map(ee=>ee.toString(16).padStart(2,"0"));class ve{static makeHexColor(G,Z,ge){return`#${fe[G]}${fe[Z]}${fe[ge]}`}static scaleMinMax(G,Z){let ge;G[0]?(G[0]<0&&(ge=Z[0],Z[0]=Z[1],Z[1]=ge),Z[0]*=G[0],Z[1]*=G[0],G[3]<0&&(ge=Z[2],Z[2]=Z[3],Z[3]=ge),Z[2]*=G[3],Z[3]*=G[3]):(ge=Z[0],Z[0]=Z[2],Z[2]=ge,ge=Z[1],Z[1]=Z[3],Z[3]=ge,G[1]<0&&(ge=Z[2],Z[2]=Z[3],Z[3]=ge),Z[2]*=G[1],Z[3]*=G[1],G[2]<0&&(ge=Z[0],Z[0]=Z[1],Z[1]=ge),Z[0]*=G[2],Z[1]*=G[2]),Z[0]+=G[4],Z[1]+=G[4],Z[2]+=G[5],Z[3]+=G[5]}static transform(G,Z){return[G[0]*Z[0]+G[2]*Z[1],G[1]*Z[0]+G[3]*Z[1],G[0]*Z[2]+G[2]*Z[3],G[1]*Z[2]+G[3]*Z[3],G[0]*Z[4]+G[2]*Z[5]+G[4],G[1]*Z[4]+G[3]*Z[5]+G[5]]}static applyTransform(G,Z){const ge=G[0]*Z[0]+G[1]*Z[2]+Z[4],Ee=G[0]*Z[1]+G[1]*Z[3]+Z[5];return[ge,Ee]}static applyInverseTransform(G,Z){const ge=Z[0]*Z[3]-Z[1]*Z[2],Ee=(G[0]*Z[3]-G[1]*Z[2]+Z[2]*Z[5]-Z[4]*Z[3])/ge,Ae=(-G[0]*Z[1]+G[1]*Z[0]+Z[4]*Z[1]-Z[5]*Z[0])/ge;return[Ee,Ae]}static getAxialAlignedBoundingBox(G,Z){const ge=ve.applyTransform(G,Z),Ee=ve.applyTransform(G.slice(2,4),Z),Ae=ve.applyTransform([G[0],G[3]],Z),Se=ve.applyTransform([G[2],G[1]],Z);return[Math.min(ge[0],Ee[0],Ae[0],Se[0]),Math.min(ge[1],Ee[1],Ae[1],Se[1]),Math.max(ge[0],Ee[0],Ae[0],Se[0]),Math.max(ge[1],Ee[1],Ae[1],Se[1])]}static inverseTransform(G){const Z=G[0]*G[3]-G[1]*G[2];return[G[3]/Z,-G[1]/Z,-G[2]/Z,G[0]/Z,(G[2]*G[5]-G[4]*G[3])/Z,(G[4]*G[1]-G[5]*G[0])/Z]}static apply3dTransform(G,Z){return[G[0]*Z[0]+G[1]*Z[1]+G[2]*Z[2],G[3]*Z[0]+G[4]*Z[1]+G[5]*Z[2],G[6]*Z[0]+G[7]*Z[1]+G[8]*Z[2]]}static singularValueDecompose2dScale(G){const Z=[G[0],G[2],G[1],G[3]],ge=G[0]*Z[0]+G[1]*Z[2],Ee=G[0]*Z[1]+G[1]*Z[3],Ae=G[2]*Z[0]+G[3]*Z[2],Se=G[2]*Z[1]+G[3]*Z[3],Pe=(ge+Se)/2,Ie=Math.sqrt((ge+Se)**2-4*(ge*Se-Ae*Ee))/2,ke=Pe+Ie||1,Re=Pe-Ie||1;return[Math.sqrt(ke),Math.sqrt(Re)]}static normalizeRect(G){const Z=G.slice(0);return G[0]>G[2]&&(Z[0]=G[2],Z[2]=G[0]),G[1]>G[3]&&(Z[1]=G[3],Z[3]=G[1]),Z}static intersect(G,Z){const ge=Math.max(Math.min(G[0],G[2]),Math.min(Z[0],Z[2])),Ee=Math.min(Math.max(G[0],G[2]),Math.max(Z[0],Z[2]));if(ge>Ee)return null;const Ae=Math.max(Math.min(G[1],G[3]),Math.min(Z[1],Z[3])),Se=Math.min(Math.max(G[1],G[3]),Math.max(Z[1],Z[3]));return Ae>Se?null:[ge,Ae,Ee,Se]}static bezierBoundingBox(G,Z,ge,Ee,Ae,Se,Pe,Ie){const ke=[],Re=[[],[]];let Ne,Le,Be,xe,we,He,Ze,Ye;for(let Ke=0;Ke<2;++Ke){if(Ke===0?(Le=6*G-12*ge+6*Ae,Ne=-3*G+9*ge-9*Ae+3*Pe,Be=3*ge-3*G):(Le=6*Z-12*Ee+6*Se,Ne=-3*Z+9*Ee-9*Se+3*Ie,Be=3*Ee-3*Z),Math.abs(Ne)<1e-12){if(Math.abs(Le)<1e-12)continue;xe=-Be/Le,0<xe&&xe<1&&ke.push(xe);continue}Ze=Le*Le-4*Be*Ne,Ye=Math.sqrt(Ze),!(Ze<0)&&(we=(-Le+Ye)/(2*Ne),0<we&&we<1&&ke.push(we),He=(-Le-Ye)/(2*Ne),0<He&&He<1&&ke.push(He))}let qe=ke.length,Ue;const We=qe;for(;qe--;)xe=ke[qe],Ue=1-xe,Re[0][qe]=Ue*Ue*Ue*G+3*Ue*Ue*xe*ge+3*Ue*xe*xe*Ae+xe*xe*xe*Pe,Re[1][qe]=Ue*Ue*Ue*Z+3*Ue*Ue*xe*Ee+3*Ue*xe*xe*Se+xe*xe*xe*Ie;return Re[0][We]=G,Re[1][We]=Z,Re[0][We+1]=Pe,Re[1][We+1]=Ie,Re[0].length=Re[1].length=We+2,[Math.min(...Re[0]),Math.min(...Re[1]),Math.max(...Re[0]),Math.max(...Re[1])]}}t.Util=ve;const ye=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Te(ee){if(ee[0]>="ï"){let Z;if(ee[0]==="þ"&&ee[1]==="ÿ"?Z="utf-16be":ee[0]==="ÿ"&&ee[1]==="þ"?Z="utf-16le":ee[0]==="ï"&&ee[1]==="»"&&ee[2]==="¿"&&(Z="utf-8"),Z)try{const ge=new TextDecoder(Z,{fatal:!0}),Ee=W(ee);return ge.decode(Ee)}catch(ge){be(`stringToPDFString: "${ge}".`)}}const G=[];for(let Z=0,ge=ee.length;Z<ge;Z++){const Ee=ye[ee.charCodeAt(Z)];G.push(Ee?String.fromCharCode(Ee):ee.charAt(Z))}return G.join("")}function Ce(ee){return ee.replace(/([()\\\n\r])/g,G=>G===`
`?"\\n":G==="\r"?"\\r":`\\${G}`)}function De(ee){return/^[\x00-\x7F]*$/.test(ee)}function Oe(ee){const G=["þÿ"];for(let Z=0,ge=ee.length;Z<ge;Z++){const Ee=ee.charCodeAt(Z);G.push(String.fromCharCode(Ee>>8&255),String.fromCharCode(Ee&255))}return G.join("")}function ze(ee){return decodeURIComponent(escape(ee))}function Me(ee){return unescape(encodeURIComponent(ee))}function Fe(ee){return typeof ee=="object"&&ee!==null&&ee.byteLength!==void 0}function Xe(ee,G){if(ee.length!==G.length)return!1;for(let Z=0,ge=ee.length;Z<ge;Z++)if(ee[Z]!==G[Z])return!1;return!0}function ae(ee=new Date){return[ee.getUTCFullYear().toString(),(ee.getUTCMonth()+1).toString().padStart(2,"0"),ee.getUTCDate().toString().padStart(2,"0"),ee.getUTCHours().toString().padStart(2,"0"),ee.getUTCMinutes().toString().padStart(2,"0"),ee.getUTCSeconds().toString().padStart(2,"0")].join("")}function _e(){const ee=Object.create(null);let G=!1;return Object.defineProperty(ee,"settled",{get(){return G}}),ee.promise=new Promise(function(Z,ge){ee.resolve=function(Ee){G=!0,Z(Ee)},ee.reject=function(Ee){G=!0,ge(Ee)}}),ee}},(e,t,n)=>{n(3)},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const n=typeof browser$1=="object"&&browser$1+""=="[object process]"&&!browser$1.versions.nw&&!(browser$1.versions.electron&&browser$1.type&&browser$1.type!=="browser");t.isNodeJS=n},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,n,i,r,s,o,m,A,l,lt,P,w;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:p,NodeCMapReaderFactory:a,NodeStandardFontDataFactory:h}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=p,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=a,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=h}let createPDFNetworkStream;function setPDFNetworkStreamFactory(p){createPDFNetworkStream=p}function getDocument(p){const a=new PDFDocumentLoadingTask;let h;if(typeof p=="string"||p instanceof URL)h={url:p};else if((0,_util.isArrayBuffer)(p))h={data:p};else if(p instanceof PDFDataRangeTransport)h={range:p};else{if(typeof p!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!p.url&&!p.data&&!p.range)throw new Error("Invalid parameter object: need either .data, .range or .url");h=p}const d=Object.create(null);let R=null,x=null;for(const c in h){const u=h[c];switch(c){case"url":if(typeof window<"u")try{d[c]=new URL(u,window.location).href;continue}catch(y){(0,_util.warn)(`Cannot create valid URL: "${y}".`)}else if(typeof u=="string"||u instanceof URL){d[c]=u.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":R=u;continue;case"worker":x=u;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&u instanceof Buffer)d[c]=new Uint8Array(u);else{if(u instanceof Uint8Array)break;if(typeof u=="string")d[c]=(0,_util.stringToBytes)(u);else if(typeof u=="object"&&u!==null&&!isNaN(u.length))d[c]=new Uint8Array(u);else if((0,_util.isArrayBuffer)(u))d[c]=new Uint8Array(u);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}d[c]=u}if(d.CMapReaderFactory=d.CMapReaderFactory||DefaultCMapReaderFactory,d.StandardFontDataFactory=d.StandardFontDataFactory||DefaultStandardFontDataFactory,d.ignoreErrors=d.stopAtErrors!==!0,d.fontExtraProperties=d.fontExtraProperties===!0,d.pdfBug=d.pdfBug===!0,d.enableXfa=d.enableXfa===!0,(!Number.isInteger(d.rangeChunkSize)||d.rangeChunkSize<1)&&(d.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof d.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(d.docBaseUrl))&&(d.docBaseUrl=null),(!Number.isInteger(d.maxImageSize)||d.maxImageSize<-1)&&(d.maxImageSize=-1),typeof d.cMapUrl!="string"&&(d.cMapUrl=null),typeof d.standardFontDataUrl!="string"&&(d.standardFontDataUrl=null),typeof d.useWorkerFetch!="boolean"&&(d.useWorkerFetch=d.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&d.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof d.isEvalSupported!="boolean"&&(d.isEvalSupported=!0),typeof d.disableFontFace!="boolean"&&(d.disableFontFace=_is_node.isNodeJS),typeof d.useSystemFonts!="boolean"&&(d.useSystemFonts=!_is_node.isNodeJS&&!d.disableFontFace),(typeof d.ownerDocument!="object"||d.ownerDocument===null)&&(d.ownerDocument=globalThis.document),typeof d.disableRange!="boolean"&&(d.disableRange=!1),typeof d.disableStream!="boolean"&&(d.disableStream=!1),typeof d.disableAutoFetch!="boolean"&&(d.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(d.verbosity),!x){const c={verbosity:d.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};x=c.port?PDFWorker.fromPort(c):new PDFWorker(c),a._worker=x}const f=a.docId;return x.promise.then(function(){if(a.destroyed)throw new Error("Loading aborted");const c=_fetchDocument(x,d,R,f),u=new Promise(function(y){let O;R?O=new _transport_stream.PDFDataTransportStream({length:d.length,initialData:d.initialData,progressiveDone:d.progressiveDone,contentDispositionFilename:d.contentDispositionFilename,disableRange:d.disableRange,disableStream:d.disableStream},R):d.data||(O=createPDFNetworkStream({url:d.url,length:d.length,httpHeaders:d.httpHeaders,withCredentials:d.withCredentials,rangeChunkSize:d.rangeChunkSize,disableRange:d.disableRange,disableStream:d.disableStream})),y(O)});return Promise.all([c,u]).then(function([y,O]){if(a.destroyed)throw new Error("Loading aborted");const M=new _message_handler.MessageHandler(f,y,x.port),S=new WorkerTransport(M,a,O,d);a._transport=S,M.send("Ready",null)})}).catch(a._capability.reject),a}async function _fetchDocument(p,a,h,d){if(p.destroyed)throw new Error("Worker was destroyed");h&&(a.length=h.length,a.initialData=h.initialData,a.progressiveDone=h.progressiveDone,a.contentDispositionFilename=h.contentDispositionFilename);const R=await p.messageHandler.sendWithPromise("GetDocRequest",{docId:d,apiVersion:"2.16.105",source:{data:a.data,url:a.url,password:a.password,disableAutoFetch:a.disableAutoFetch,rangeChunkSize:a.rangeChunkSize,length:a.length},maxImageSize:a.maxImageSize,disableFontFace:a.disableFontFace,docBaseUrl:a.docBaseUrl,ignoreErrors:a.ignoreErrors,isEvalSupported:a.isEvalSupported,fontExtraProperties:a.fontExtraProperties,enableXfa:a.enableXfa,useSystemFonts:a.useSystemFonts,cMapUrl:a.useWorkerFetch?a.cMapUrl:null,standardFontDataUrl:a.useWorkerFetch?a.standardFontDataUrl:null});if(a.data&&(a.data=null),p.destroyed)throw new Error("Worker was destroyed");return R}const t=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${ot(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var a;this.destroyed=!0,await((a=this._transport)==null?void 0:a.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=t;e=new WeakMap,ce(PDFDocumentLoadingTask,e,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(a,h,d=!1,R=null){this.length=a,this.initialData=h,this.progressiveDone=d,this.contentDispositionFilename=R,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(a){this._rangeListeners.push(a)}addProgressListener(a){this._progressListeners.push(a)}addProgressiveReadListener(a){this._progressiveReadListeners.push(a)}addProgressiveDoneListener(a){this._progressiveDoneListeners.push(a)}onDataRange(a,h){for(const d of this._rangeListeners)d(a,h)}onDataProgress(a,h){this._readyCapability.promise.then(()=>{for(const d of this._progressListeners)d(a,h)})}onDataProgressiveRead(a){this._readyCapability.promise.then(()=>{for(const h of this._progressiveReadListeners)h(a)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const a of this._progressiveDoneListeners)a()})}transportReady(){this._readyCapability.resolve()}requestDataRange(a,h){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(a,h){this._pdfInfo=a,this._transport=h,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(a){return this._transport.getPage(a)}getPageIndex(a){return this._transport.getPageIndex(a)}getDestinations(){return this._transport.getDestinations()}getDestination(a){return this._transport.getDestination(a)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(a=!1){return this._transport.startCleanup(a||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(a,h,d,R,x=!1){this._pageIndex=a,this._pageInfo=h,this._ownerDocument=R,this._transport=d,this._stats=x?new _display_utils.StatTimer:null,this._pdfBug=x,this.commonObjs=d.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:a,rotation:h=this.rotate,offsetX:d=0,offsetY:R=0,dontFlip:x=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:a,rotation:h,offsetX:d,offsetY:R,dontFlip:x})}getAnnotations({intent:a="display"}={}){const h=this._transport.getRenderingIntent(a);let d=this._annotationPromises.get(h.cacheKey);return d||(d=this._transport.getAnnotations(this._pageIndex,h.renderingIntent),this._annotationPromises.set(h.cacheKey,d),d=d.then(R=>{for(const x of R)x.titleObj!==void 0&&Object.defineProperty(x,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),x.titleObj.str}}),x.contentsObj!==void 0&&Object.defineProperty(x,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),x.contentsObj.str}});return R})),d}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var a;return((a=this._transport._htmlForXfa)==null?void 0:a.children[this._pageIndex])||null}render({canvasContext:a,viewport:h,intent:d="display",annotationMode:R=_util.AnnotationMode.ENABLE,transform:x=null,imageLayer:f=null,canvasFactory:c=null,background:u=null,optionalContentConfigPromise:y=null,annotationCanvasMap:O=null,pageColors:M=null,printAnnotationStorage:S=null}){var Y,ie;((Y=arguments[0])==null?void 0:Y.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&R===_util.AnnotationMode.ENABLE&&(R=_util.AnnotationMode.ENABLE_FORMS)),((ie=arguments[0])==null?void 0:ie.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&R===_util.AnnotationMode.ENABLE&&(R=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const F=this._transport.getRenderingIntent(d,R,S);this.pendingCleanup=!1,y||(y=this._transport.getOptionalContentConfig());let Q=this._intentStates.get(F.cacheKey);Q||(Q=Object.create(null),this._intentStates.set(F.cacheKey,Q)),Q.streamReaderCancelTimeout&&(clearTimeout(Q.streamReaderCancelTimeout),Q.streamReaderCancelTimeout=null);const re=c||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),J=!!(F.renderingIntent&_util.RenderingIntentFlag.PRINT);Q.displayReadyCapability||(Q.displayReadyCapability=(0,_util.createPromiseCapability)(),Q.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(F));const V=oe=>{Q.renderTasks.delete(z),(this.cleanupAfterRender||J)&&(this.pendingCleanup=!0),this._tryCleanup(),oe?(z.capability.reject(oe),this._abortOperatorList({intentState:Q,reason:oe instanceof Error?oe:new Error(oe)})):z.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},z=new InternalRenderTask({callback:V,params:{canvasContext:a,viewport:h,transform:x,imageLayer:f,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:O,operatorList:Q.operatorList,pageIndex:this._pageIndex,canvasFactory:re,useRequestAnimationFrame:!J,pdfBug:this._pdfBug,pageColors:M});(Q.renderTasks||(Q.renderTasks=new Set)).add(z);const q=z.task;return Promise.all([Q.displayReadyCapability.promise,y]).then(([oe,be])=>{if(this.pendingCleanup){V();return}this._stats&&this._stats.time("Rendering"),z.initializeGraphics({transparency:oe,optionalContentConfig:be}),z.operatorListChanged()}).catch(V),q}getOperatorList({intent:a="display",annotationMode:h=_util.AnnotationMode.ENABLE,printAnnotationStorage:d=null}={}){function R(){f.operatorList.lastChunk&&(f.opListReadCapability.resolve(f.operatorList),f.renderTasks.delete(c))}const x=this._transport.getRenderingIntent(a,h,d,!0);let f=this._intentStates.get(x.cacheKey);f||(f=Object.create(null),this._intentStates.set(x.cacheKey,f));let c;return f.opListReadCapability||(c=Object.create(null),c.operatorListChanged=R,f.opListReadCapability=(0,_util.createPromiseCapability)(),(f.renderTasks||(f.renderTasks=new Set)).add(c),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(x)),f.opListReadCapability.promise}streamTextContent({disableCombineTextItems:a=!1,includeMarkedContent:h=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:a!==!0,includeMarkedContent:h===!0},{highWaterMark:100,size(R){return R.items.length}})}getTextContent(a={}){if(this._transport._htmlForXfa)return this.getXfa().then(d=>_xfa_text.XfaText.textContent(d));const h=this.streamTextContent(a);return new Promise(function(d,R){function x(){f.read().then(function({value:u,done:y}){if(y){d(c);return}Object.assign(c.styles,u.styles),c.items.push(...u.items),x()},R)}const f=h.getReader(),c={items:[],styles:Object.create(null)};x()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const a=[];for(const h of this._intentStates.values())if(this._abortOperatorList({intentState:h,reason:new Error("Page was destroyed."),force:!0}),!h.opListReadCapability)for(const d of h.renderTasks)a.push(d.completed),d.cancel();this.objs.clear();for(const h of this._bitmaps)h.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(a)}cleanup(a=!1){return this.pendingCleanup=!0,this._tryCleanup(a)}_tryCleanup(a=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:h,operatorList:d}of this._intentStates.values())if(h.size>0||!d.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,a&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const h of this._bitmaps)h.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(a,h){const d=this._intentStates.get(h);d&&(this._stats&&this._stats.timeEnd("Page Request"),d.displayReadyCapability&&d.displayReadyCapability.resolve(a))}_renderPageChunk(a,h){for(let d=0,R=a.length;d<R;d++)h.operatorList.fnArray.push(a.fnArray[d]),h.operatorList.argsArray.push(a.argsArray[d]);h.operatorList.lastChunk=a.lastChunk,h.operatorList.separateAnnots=a.separateAnnots;for(const d of h.renderTasks)d.operatorListChanged();a.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:a,cacheKey:h,annotationStorageMap:d}){const x=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:a,cacheKey:h,annotationStorage:d}).getReader(),f=this._intentStates.get(h);f.streamReader=x;const c=()=>{x.read().then(({value:u,done:y})=>{if(y){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,f),c())},u=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const y of f.renderTasks)y.operatorListChanged();this._tryCleanup()}if(f.displayReadyCapability)f.displayReadyCapability.reject(u);else if(f.opListReadCapability)f.opListReadCapability.reject(u);else throw u}})};c()}_abortOperatorList({intentState:a,reason:h,force:d=!1}){if(a.streamReader){if(!d){if(a.renderTasks.size>0)return;if(h instanceof _display_utils.RenderingCancelledException){a.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:a,reason:h,force:!0}),a.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(a.streamReader.cancel(new _util.AbortException(h.message)).catch(()=>{}),a.streamReader=null,!this._transport.destroyed){for(const[R,x]of this._intentStates)if(x===a){this._intentStates.delete(R);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(a,h){const d={data:structuredClone(a,h)};this._deferred.then(()=>{for(const R of this._listeners)R.call(this,d)})}addEventListener(a,h){this._listeners.push(h)}removeEventListener(a,h){const d=this._listeners.indexOf(h);this._listeners.splice(d,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const p=(n=document==null?void 0:document.currentScript)==null?void 0:n.src;p&&(PDFWorkerUtil.fallbackWorkerSrc=p.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(p,a){let h;try{if(h=new URL(p),!h.origin||h.origin==="null")return!1}catch{return!1}const d=new URL(a,h);return h.origin===d.origin},PDFWorkerUtil.createCDNWrapper=function(p){const a=`importScripts("${p}");`;return URL.createObjectURL(new Blob([a]))}}const _PDFWorker=class{constructor({name:p=null,port:a=null,verbosity:h=(0,_util.getVerbosityLevel)()}={}){if(a&&L(_PDFWorker,i).has(a))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=p,this.destroyed=!1,this.verbosity=h,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,a){L(_PDFWorker,i).set(a,this),this._initializeFromPort(a);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(p){this._port=p,this._messageHandler=new _message_handler.MessageHandler("main","worker",p),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:p}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,p)||(p=PDFWorkerUtil.createCDNWrapper(new URL(p,window.location).href));const a=new Worker(p),h=new _message_handler.MessageHandler("main","worker",a),d=()=>{a.removeEventListener("error",R),h.destroy(),a.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},R=()=>{this._webWorker||d()};a.addEventListener("error",R),h.on("test",f=>{if(a.removeEventListener("error",R),this.destroyed){d();return}f?(this._messageHandler=h,this._port=a,this._webWorker=a,this._readyCapability.resolve(),h.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),h.destroy(),a.terminate())}),h.on("ready",f=>{if(a.removeEventListener("error",R),this.destroyed){d();return}try{x()}catch{this._setupFakeWorker()}});const x=()=>{const f=new Uint8Array;h.send("test",f,[f.buffer])};x();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(p=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const a=new LoopbackPort;this._port=a;const h=`fake${PDFWorkerUtil.fakeWorkerId++}`,d=new _message_handler.MessageHandler(h+"_worker",h,a);p.setup(d,a);const R=new _message_handler.MessageHandler(h,h+"_worker",a);this._messageHandler=R,this._readyCapability.resolve(),R.send("configure",{verbosity:this.verbosity})}).catch(p=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${p.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),L(_PDFWorker,i).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(p){if(!(p!=null&&p.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return L(this,i).has(p.port)?L(this,i).get(p.port):new _PDFWorker(p)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var p;try{return((p=globalThis.pdfjsWorker)==null?void 0:p.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;i=new WeakMap,ce(PDFWorker,i,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(a,h,d,R){ce(this,r,null);ce(this,s,new Map);ce(this,o,new Map);ce(this,m,null);this.messageHandler=a,this.loadingTask=h,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:h.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:R.ownerDocument,styleElement:R.styleElement}),this._params=R,R.useWorkerFetch||(this.CMapReaderFactory=new R.CMapReaderFactory({baseUrl:R.cMapUrl,isCompressed:R.cMapPacked}),this.StandardFontDataFactory=new R.StandardFontDataFactory({baseUrl:R.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=d,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return L(this,r)}getRenderingIntent(a,h=_util.AnnotationMode.ENABLE,d=null,R=!1){let x=_util.RenderingIntentFlag.DISPLAY,f=null;switch(a){case"any":x=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":x=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${a}`)}switch(h){case _util.AnnotationMode.DISABLE:x+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:x+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:x+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,f=(x&_util.RenderingIntentFlag.PRINT&&d instanceof _annotation_storage.PrintAnnotationStorage?d:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${h}`)}return R&&(x+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:x,cacheKey:`${x}_${_annotation_storage.AnnotationStorage.getHash(f)}`,annotationStorageMap:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const a=[];for(const d of L(this,s).values())a.push(d._destroy());L(this,s).clear(),L(this,o).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const h=this.messageHandler.sendWithPromise("Terminate",null);return a.push(h),Promise.all(a).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),me(this,m,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:a,loadingTask:h}=this;a.on("GetReader",(d,R)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=x=>{this._lastProgress={loaded:x.loaded,total:x.total}},R.onPull=()=>{this._fullReader.read().then(function({value:x,done:f}){if(f){R.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(x),"GetReader - expected an ArrayBuffer."),R.enqueue(new Uint8Array(x),1,[x])}).catch(x=>{R.error(x)})},R.onCancel=x=>{this._fullReader.cancel(x),R.ready.catch(f=>{if(!this.destroyed)throw f})}}),a.on("ReaderHeadersReady",d=>{const R=(0,_util.createPromiseCapability)(),x=this._fullReader;return x.headersReady.then(()=>{var f;(!x.isStreamingSupported||!x.isRangeSupported)&&(this._lastProgress&&((f=h.onProgress)==null||f.call(h,this._lastProgress)),x.onProgress=c=>{var u;(u=h.onProgress)==null||u.call(h,{loaded:c.loaded,total:c.total})}),R.resolve({isStreamingSupported:x.isStreamingSupported,isRangeSupported:x.isRangeSupported,contentLength:x.contentLength})},R.reject),R.promise}),a.on("GetRangeReader",(d,R)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const x=this._networkStream.getRangeReader(d.begin,d.end);if(!x){R.close();return}R.onPull=()=>{x.read().then(function({value:f,done:c}){if(c){R.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(f),"GetRangeReader - expected an ArrayBuffer."),R.enqueue(new Uint8Array(f),1,[f])}).catch(f=>{R.error(f)})},R.onCancel=f=>{x.cancel(f),R.ready.catch(c=>{if(!this.destroyed)throw c})}}),a.on("GetDoc",({pdfInfo:d})=>{this._numPages=d.numPages,this._htmlForXfa=d.htmlForXfa,delete d.htmlForXfa,h._capability.resolve(new PDFDocumentProxy(d,this))}),a.on("DocException",function(d){let R;switch(d.name){case"PasswordException":R=new _util.PasswordException(d.message,d.code);break;case"InvalidPDFException":R=new _util.InvalidPDFException(d.message);break;case"MissingPDFException":R=new _util.MissingPDFException(d.message);break;case"UnexpectedResponseException":R=new _util.UnexpectedResponseException(d.message,d.status);break;case"UnknownErrorException":R=new _util.UnknownErrorException(d.message,d.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}h._capability.reject(R)}),a.on("PasswordRequest",d=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),h.onPassword){const R=x=>{x instanceof Error?this._passwordCapability.reject(x):this._passwordCapability.resolve({password:x})};try{h.onPassword(R,d.code)}catch(x){this._passwordCapability.reject(x)}}else this._passwordCapability.reject(new _util.PasswordException(d.message,d.code));return this._passwordCapability.promise}),a.on("DataLoaded",d=>{var R;(R=h.onProgress)==null||R.call(h,{loaded:d.length,total:d.length}),this.downloadInfoCapability.resolve(d)}),a.on("StartRenderPage",d=>{if(this.destroyed)return;L(this,s).get(d.pageIndex)._startRenderPage(d.transparency,d.cacheKey)}),a.on("commonobj",([d,R,x])=>{var f;if(!this.destroyed&&!this.commonObjs.has(d))switch(R){case"Font":const c=this._params;if("error"in x){const O=x.error;(0,_util.warn)(`Error during font loading: ${O}`),this.commonObjs.resolve(d,O);break}let u=null;c.pdfBug&&((f=globalThis.FontInspector)!=null&&f.enabled)&&(u={registerFont(O,M){globalThis.FontInspector.fontAdded(O,M)}});const y=new _font_loader.FontFaceObject(x,{isEvalSupported:c.isEvalSupported,disableFontFace:c.disableFontFace,ignoreErrors:c.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:u});this.fontLoader.bind(y).catch(O=>a.sendWithPromise("FontFallback",{id:d})).finally(()=>{!c.fontExtraProperties&&y.data&&(y.data=null),this.commonObjs.resolve(d,y)});break;case"FontPath":case"Image":this.commonObjs.resolve(d,x);break;default:throw new Error(`Got unknown common object type ${R}`)}}),a.on("obj",([d,R,x,f])=>{var u;if(this.destroyed)return;const c=L(this,s).get(R);if(!c.objs.has(d))switch(x){case"Image":c.objs.resolve(d,f);const y=8e6;if(f){let O;if(f.bitmap){const{bitmap:M,width:S,height:F}=f;O=S*F*4,c._bitmaps.add(M)}else O=((u=f.data)==null?void 0:u.length)||0;O>y&&(c.cleanupAfterRender=!0)}break;case"Pattern":c.objs.resolve(d,f);break;default:throw new Error(`Got unknown object type ${x}`)}}),a.on("DocProgress",d=>{var R;this.destroyed||(R=h.onProgress)==null||R.call(h,{loaded:d.loaded,total:d.total})}),a.on("DocStats",d=>{this.destroyed||me(this,r,Object.freeze({streamTypes:Object.freeze(d.streamTypes),fontTypes:Object.freeze(d.fontTypes)}))}),a.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),a.on("FetchBuiltInCMap",d=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(d):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),a.on("FetchStandardFontData",d=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(d):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:a}){var h,d;this.destroyed||(d=(h=this.loadingTask).onUnsupportedFeature)==null||d.call(h,a)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(a){if(!Number.isInteger(a)||a<=0||a>this._numPages)return Promise.reject(new Error("Invalid page request."));const h=a-1,d=L(this,o).get(h);if(d)return d;const R=this.messageHandler.sendWithPromise("GetPage",{pageIndex:h}).then(x=>{if(this.destroyed)throw new Error("Transport destroyed");const f=new PDFPageProxy(h,x,this,this._params.ownerDocument,this._params.pdfBug);return L(this,s).set(h,f),f});return L(this,o).set(h,R),R}getPageIndex(a){return typeof a!="object"||a===null||!Number.isInteger(a.num)||a.num<0||!Number.isInteger(a.gen)||a.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:a.num,gen:a.gen})}getAnnotations(a,h){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:a,intent:h})}saveDocument(){var a;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((a=this._fullReader)==null?void 0:a.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(a){return typeof a!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:a})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(a){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:a})}getStructTree(a){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:a})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(a=>new _optional_content_config.OptionalContentConfig(a))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return L(this,m)||me(this,m,this.messageHandler.sendWithPromise("GetMetadata",null).then(a=>{var h,d;return{info:a[0],metadata:a[1]?new _metadata.Metadata(a[1]):null,contentDispositionFilename:((h=this._fullReader)==null?void 0:h.filename)??null,contentLength:((d=this._fullReader)==null?void 0:d.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(a=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const h of L(this,s).values())if(!h.cleanup())throw new Error(`startCleanup: Page ${h.pageNumber} is currently rendering.`);this.commonObjs.clear(),a||this.fontLoader.clear(),me(this,m,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const a=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:a.disableAutoFetch,enableXfa:a.enableXfa})}}r=new WeakMap,s=new WeakMap,o=new WeakMap,m=new WeakMap;class PDFObjects{constructor(){ce(this,l);ce(this,A,Object.create(null))}get(a,h=null){if(h){const R=ue(this,l,lt).call(this,a);return R.capability.promise.then(()=>h(R.data)),null}const d=L(this,A)[a];if(!(d!=null&&d.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${a}.`);return d.data}has(a){const h=L(this,A)[a];return(h==null?void 0:h.capability.settled)||!1}resolve(a,h=null){const d=ue(this,l,lt).call(this,a);d.data=h,d.capability.resolve()}clear(){me(this,A,Object.create(null))}}A=new WeakMap,l=new WeakSet,lt=function(a){const h=L(this,A)[a];return h||(L(this,A)[a]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(a){ce(this,P,null);me(this,P,a),this.onContinue=null}get promise(){return L(this,P).capability.promise}cancel(){L(this,P).cancel()}get separateAnnots(){const{separateAnnots:a}=L(this,P).operatorList;if(!a)return!1;const{annotationCanvasMap:h}=L(this,P);return a.form||a.canvas&&(h==null?void 0:h.size)>0}}P=new WeakMap,exports.RenderTask=RenderTask;const E=class{constructor({callback:a,params:h,objs:d,commonObjs:R,annotationCanvasMap:x,operatorList:f,pageIndex:c,canvasFactory:u,useRequestAnimationFrame:y=!1,pdfBug:O=!1,pageColors:M=null}){this.callback=a,this.params=h,this.objs=d,this.commonObjs=R,this.annotationCanvasMap=x,this.operatorListIdx=null,this.operatorList=f,this._pageIndex=c,this.canvasFactory=u,this._pdfBug=O,this.pageColors=M,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=y===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=h.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:a=!1,optionalContentConfig:h}){var u;if(this.cancelled)return;if(this._canvas){if(L(E,w).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");L(E,w).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:d,viewport:R,transform:x,imageLayer:f,background:c}=this.params;this.gfx=new _canvas.CanvasGraphics(d,this.commonObjs,this.objs,this.canvasFactory,f,h,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:x,viewport:R,transparency:a,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(a=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&L(E,w).delete(this._canvas),this.callback(a||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&L(E,w).delete(this._canvas),this.callback())))}};let InternalRenderTask=E;w=new WeakMap,ce(InternalRenderTask,w,new WeakSet);const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(e,t,n)=>{var A,wt,_;Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var i=n(1),r=n(6),s=n(10);class o{constructor(){ce(this,A);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(w,E){const p=this._storage.get(w);return p===void 0?E:Object.assign(E,p)}getRawValue(w){return this._storage.get(w)}remove(w){if(this._storage.delete(w),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const E of this._storage.values())if(E instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(w,E){const p=this._storage.get(w);let a=!1;if(p!==void 0)for(const[h,d]of Object.entries(E))p[h]!==d&&(a=!0,p[h]=d);else a=!0,this._storage.set(w,E);a&&ue(this,A,wt).call(this),E instanceof r.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(E.constructor._type)}has(w){return this._storage.has(w)}getAll(){return this._storage.size>0?(0,i.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new m(this)}get serializable(){if(this._storage.size===0)return null;const w=new Map;for(const[E,p]of this._storage){const a=p instanceof r.AnnotationEditor?p.serialize():p;a&&w.set(E,a)}return w}static getHash(w){if(!w)return"";const E=new s.MurmurHash3_64;for(const[p,a]of w)E.update(`${p}:${JSON.stringify(a)}`);return E.hexdigest()}}A=new WeakSet,wt=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=o;class m extends o{constructor(E){super();ce(this,_,null);me(this,_,structuredClone(E.serializable))}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return L(this,_)}}_=new WeakMap,t.PrintAnnotationStorage=m},(e,t,n)=>{var o,m,A,l,_,P;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var i=n(7),r=n(1);const w=class{constructor(p){ce(this,o,this.focusin.bind(this));ce(this,m,this.focusout.bind(this));ce(this,A,!1);ce(this,l,!1);ce(this,_,!1);ce(this,P,w._zIndex++);this.constructor===w&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=p.parent,this.id=p.id,this.width=this.height=null,this.pageIndex=p.parent.pageIndex,this.name=p.name,this.div=null;const[a,h]=this.parent.viewportBaseDimensions;this.x=p.x/a,this.y=p.y/h,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=L(this,P)}focusin(p){L(this,A)?me(this,A,!1):this.parent.setSelected(this)}focusout(p){if(!this.isAttachedToDOM)return;const a=p.relatedTarget;a!=null&&a.closest(`#${this.id}`)||(p.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(p){const a=this.parent.div.getBoundingClientRect();this.startX=p.clientX-a.x,this.startY=p.clientY-a.y,p.dataTransfer.setData("text/plain",this.id),p.dataTransfer.effectAllowed="move"}setAt(p,a,h,d){const[R,x]=this.parent.viewportBaseDimensions;[h,d]=this.screenToPageTranslation(h,d),this.x=(p+h)/R,this.y=(a+d)/x,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(p,a){const[h,d]=this.parent.viewportBaseDimensions;[p,a]=this.screenToPageTranslation(p,a),this.x+=p/h,this.y+=a/d,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(p,a){const{rotation:h}=this.parent.viewport;switch(h){case 90:return[a,-p];case 180:return[-p,-a];case 270:return[-a,p];default:return[p,a]}}setDims(p,a){const[h,d]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*p/h}%`,this.div.style.height=`${100*a/d}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",L(this,o)),this.div.addEventListener("focusout",L(this,m));const[p,a]=this.getInitialTranslation();return this.translate(p,a),(0,i.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(p){const a=i.KeyboardManager.platform.isMac;if(p.button!==0||p.ctrlKey&&a){p.preventDefault();return}p.ctrlKey&&!a||p.shiftKey||p.metaKey&&a?this.parent.toggleSelected(this):this.parent.setSelected(this),me(this,A,!0)}getRect(p,a){const[h,d]=this.parent.viewportBaseDimensions,[R,x]=this.parent.pageDimensions,f=R*p/h,c=x*a/d,u=this.x*R,y=this.y*x,O=this.width*R,M=this.height*x;switch(this.rotation){case 0:return[u+f,x-y-c-M,u+f+O,x-y-c];case 90:return[u+c,x-y+f,u+c+M,x-y+f+O];case 180:return[u-f-O,x-y+c,u-f,x-y+c+M];case 270:return[u-c-M,x-y-f-O,u-c,x-y-f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(p,a){const[h,d,R,x]=p,f=R-h,c=x-d;switch(this.rotation){case 0:return[h,a-x,f,c];case 90:return[h,a-d,c,f];case 180:return[R,a-d,f,c];case 270:return[R,a-x,c,f];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){me(this,_,!0)}disableEditMode(){me(this,_,!1)}isInEditMode(){return L(this,_)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var p;(p=this.div)==null||p.addEventListener("focusin",L(this,o))}serialize(){(0,r.unreachable)("An editor must be serializable")}static deserialize(p,a){const h=new this.prototype.constructor({parent:a,id:a.getNextId()});h.rotation=p.rotation;const[d,R]=a.pageDimensions,[x,f,c,u]=h.getRectInCurrentCoords(p.rect,R);return h.x=x/d,h.y=f/R,h.width=c/d,h.height=u/R,h}remove(){this.div.removeEventListener("focusin",L(this,o)),this.div.removeEventListener("focusout",L(this,m)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var p;(p=this.div)==null||p.classList.add("selectedEditor")}unselect(){var p;(p=this.div)==null||p.classList.remove("selectedEditor")}updateParams(p,a){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return L(this,l)}set isEditing(p){me(this,l,p),p?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let s=w;o=new WeakMap,m=new WeakMap,A=new WeakMap,l=new WeakMap,_=new WeakMap,P=new WeakMap,je(s,"_colorManager",new i.ColorManager),je(s,"_zIndex",1),t.AnnotationEditor=s},(e,t,n)=>{var E,p,a,h,d,R,Tt,c,y,O,M,S,F,Q,re,J,V,z,q,Y,ie,oe,be,$,T,b,Rt,B,ct,j,$e,X,Je,C,Ct,D,Mt,W,ht,de,et,le,tt;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=s,t.opacityToHex=o;var i=n(1),r=n(8);function s(pe,U,fe){for(const ve of fe)U.addEventListener(ve,pe[ve].bind(pe))}function o(pe){return Math.round(Math.min(255,Math.max(1,255*pe))).toString(16).padStart(2,"0")}class m{constructor(){ce(this,E,0)}getId(){return`${i.AnnotationEditorPrefix}${ot(this,E)._++}`}}E=new WeakMap;class A{constructor(U=128){ce(this,p,[]);ce(this,a,!1);ce(this,h,void 0);ce(this,d,-1);me(this,h,U)}add({cmd:U,undo:fe,mustExec:ve,type:ye=NaN,overwriteIfSameType:Te=!1,keepUndo:Ce=!1}){if(ve&&U(),L(this,a))return;const De={cmd:U,undo:fe,type:ye};if(L(this,d)===-1){L(this,p).length>0&&(L(this,p).length=0),me(this,d,0),L(this,p).push(De);return}if(Te&&L(this,p)[L(this,d)].type===ye){Ce&&(De.undo=L(this,p)[L(this,d)].undo),L(this,p)[L(this,d)]=De;return}const Oe=L(this,d)+1;Oe===L(this,h)?L(this,p).splice(0,1):(me(this,d,Oe),Oe<L(this,p).length&&L(this,p).splice(Oe)),L(this,p).push(De)}undo(){L(this,d)!==-1&&(me(this,a,!0),L(this,p)[L(this,d)].undo(),me(this,a,!1),me(this,d,L(this,d)-1))}redo(){L(this,d)<L(this,p).length-1&&(me(this,d,L(this,d)+1),me(this,a,!0),L(this,p)[L(this,d)].cmd(),me(this,a,!1))}hasSomethingToUndo(){return L(this,d)!==-1}hasSomethingToRedo(){return L(this,d)<L(this,p).length-1}destroy(){me(this,p,null)}}p=new WeakMap,a=new WeakMap,h=new WeakMap,d=new WeakMap,t.CommandManager=A;const f=class{constructor(U){ce(this,R);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const fe=f.platform.isMac;for(const[ve,ye]of U)for(const Te of ve){const Ce=Te.startsWith("mac+");fe&&Ce?(this.callbacks.set(Te.slice(4),ye),this.allKeys.add(Te.split("+").at(-1))):!fe&&!Ce&&(this.callbacks.set(Te,ye),this.allKeys.add(Te.split("+").at(-1)))}}static get platform(){const U=typeof navigator<"u"?navigator.platform:"";return(0,i.shadow)(this,"platform",{isWin:U.includes("Win"),isMac:U.includes("Mac")})}exec(U,fe){if(!this.allKeys.has(fe.key))return;const ve=this.callbacks.get(ue(this,R,Tt).call(this,fe));ve&&(ve.bind(U)(),fe.stopPropagation(),fe.preventDefault())}};let l=f;R=new WeakSet,Tt=function(U){U.altKey&&this.buffer.push("alt"),U.ctrlKey&&this.buffer.push("ctrl"),U.metaKey&&this.buffer.push("meta"),U.shiftKey&&this.buffer.push("shift"),this.buffer.push(U.key);const fe=this.buffer.join("+");return this.buffer.length=0,fe},t.KeyboardManager=l;class _{constructor(){ce(this,c,null)}copy(U){U&&(Array.isArray(U)?me(this,c,U.map(fe=>fe.serialize())):me(this,c,[U.serialize()]),me(this,c,L(this,c).filter(fe=>!!fe)),L(this,c).length===0&&me(this,c,null))}paste(){return L(this,c)}isEmpty(){return L(this,c)===null}destroy(){me(this,c,null)}}c=new WeakMap;const u=class{get _colors(){const U=new Map([["CanvasText",null],["Canvas",null]]);return(0,r.getColorValues)(U),(0,i.shadow)(this,"_colors",U)}convert(U){const fe=(0,r.getRGB)(U);if(!window.matchMedia("(forced-colors: active)").matches)return fe;for(const[ve,ye]of this._colors)if(ye.every((Te,Ce)=>Te===fe[Ce]))return u._colorsMapping.get(ve);return fe}getHexCode(U){const fe=this._colors.get(U);return fe?i.Util.makeHexColor(...fe):U}};let P=u;je(P,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),t.ColorManager=P;const he=class{constructor(U,fe){ce(this,b);ce(this,B);ce(this,j);ce(this,X);ce(this,C);ce(this,D);ce(this,W);ce(this,de);ce(this,le);ce(this,y,null);ce(this,O,new Map);ce(this,M,new Map);ce(this,S,new _);ce(this,F,new A);ce(this,Q,0);ce(this,re,null);ce(this,J,null);ce(this,V,new m);ce(this,z,!1);ce(this,q,i.AnnotationEditorType.NONE);ce(this,Y,new Set);ce(this,ie,this.keydown.bind(this));ce(this,oe,this.onEditingAction.bind(this));ce(this,be,this.onPageChanging.bind(this));ce(this,$,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ce(this,T,null);me(this,T,U),me(this,J,fe),L(this,J)._on("editingaction",L(this,oe)),L(this,J)._on("pagechanging",L(this,be))}destroy(){ue(this,B,ct).call(this),L(this,J)._off("editingaction",L(this,oe)),L(this,J)._off("pagechanging",L(this,be));for(const U of L(this,M).values())U.destroy();L(this,M).clear(),L(this,O).clear(),me(this,y,null),L(this,Y).clear(),L(this,S).destroy(),L(this,F).destroy()}onPageChanging({pageNumber:U}){me(this,Q,U-1)}focusMainContainer(){L(this,T).focus()}keydown(U){var fe;(fe=this.getActive())!=null&&fe.shouldGetKeyboardEvents()||he._keyboardManager.exec(this,U)}onEditingAction(U){["undo","redo","cut","copy","paste","delete","selectAll"].includes(U.name)&&this[U.name]()}setEditingState(U){U?(ue(this,b,Rt).call(this),ue(this,j,$e).call(this,{isEditing:L(this,q)!==i.AnnotationEditorType.NONE,isEmpty:ue(this,de,et).call(this),hasSomethingToUndo:L(this,F).hasSomethingToUndo(),hasSomethingToRedo:L(this,F).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:L(this,S).isEmpty()})):(ue(this,B,ct).call(this),ue(this,j,$e).call(this,{isEditing:!1}))}registerEditorTypes(U){me(this,re,U);for(const fe of L(this,re))ue(this,X,Je).call(this,fe.defaultPropertiesToUpdate)}getId(){return L(this,V).getId()}addLayer(U){L(this,M).set(U.pageIndex,U),L(this,z)?U.enable():U.disable()}removeLayer(U){L(this,M).delete(U.pageIndex)}updateMode(U){if(me(this,q,U),U===i.AnnotationEditorType.NONE)this.setEditingState(!1),ue(this,D,Mt).call(this);else{this.setEditingState(!0),ue(this,C,Ct).call(this);for(const fe of L(this,M).values())fe.updateMode(U)}}updateToolbar(U){U!==L(this,q)&&L(this,J).dispatch("switchannotationeditormode",{source:this,mode:U})}updateParams(U,fe){for(const ve of L(this,Y))ve.updateParams(U,fe);for(const ve of L(this,re))ve.updateDefaultParams(U,fe)}getEditors(U){const fe=[];for(const ve of L(this,O).values())ve.pageIndex===U&&fe.push(ve);return fe}getEditor(U){return L(this,O).get(U)}addEditor(U){L(this,O).set(U.id,U)}removeEditor(U){L(this,O).delete(U.id),this.unselect(U)}setActiveEditor(U){L(this,y)!==U&&(me(this,y,U),U&&ue(this,X,Je).call(this,U.propertiesToUpdate))}toggleSelected(U){if(L(this,Y).has(U)){L(this,Y).delete(U),U.unselect(),ue(this,j,$e).call(this,{hasSelectedEditor:this.hasSelection});return}L(this,Y).add(U),U.select(),ue(this,X,Je).call(this,U.propertiesToUpdate),ue(this,j,$e).call(this,{hasSelectedEditor:!0})}setSelected(U){for(const fe of L(this,Y))fe!==U&&fe.unselect();L(this,Y).clear(),L(this,Y).add(U),U.select(),ue(this,X,Je).call(this,U.propertiesToUpdate),ue(this,j,$e).call(this,{hasSelectedEditor:!0})}isSelected(U){return L(this,Y).has(U)}unselect(U){U.unselect(),L(this,Y).delete(U),ue(this,j,$e).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return L(this,Y).size!==0}undo(){L(this,F).undo(),ue(this,j,$e).call(this,{hasSomethingToUndo:L(this,F).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ue(this,de,et).call(this)})}redo(){L(this,F).redo(),ue(this,j,$e).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:L(this,F).hasSomethingToRedo(),isEmpty:ue(this,de,et).call(this)})}addCommands(U){L(this,F).add(U),ue(this,j,$e).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ue(this,de,et).call(this)})}delete(){if(L(this,y)&&L(this,y).commitOrRemove(),!this.hasSelection)return;const U=[...L(this,Y)],fe=()=>{for(const ye of U)ye.remove()},ve=()=>{for(const ye of U)ue(this,W,ht).call(this,ye)};this.addCommands({cmd:fe,undo:ve,mustExec:!0})}copy(){if(L(this,y)&&L(this,y).commitOrRemove(),this.hasSelection){const U=[];for(const fe of L(this,Y))fe.isEmpty()||U.push(fe);if(U.length===0)return;L(this,S).copy(U),ue(this,j,$e).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(L(this,S).isEmpty())return;this.unselectAll();const U=L(this,M).get(L(this,Q)),fe=L(this,S).paste().map(Te=>U.deserialize(Te)),ve=()=>{for(const Te of fe)ue(this,W,ht).call(this,Te);ue(this,le,tt).call(this,fe)},ye=()=>{for(const Te of fe)Te.remove()};this.addCommands({cmd:ve,undo:ye,mustExec:!0})}selectAll(){for(const U of L(this,Y))U.commit();ue(this,le,tt).call(this,L(this,O).values())}unselectAll(){if(L(this,y)){L(this,y).commitOrRemove();return}if(ue(this,le,tt).size!==0){for(const U of L(this,Y))U.unselect();L(this,Y).clear(),ue(this,j,$e).call(this,{hasSelectedEditor:!1})}}isActive(U){return L(this,y)===U}getActive(){return L(this,y)}getMode(){return L(this,q)}};let w=he;y=new WeakMap,O=new WeakMap,M=new WeakMap,S=new WeakMap,F=new WeakMap,Q=new WeakMap,re=new WeakMap,J=new WeakMap,V=new WeakMap,z=new WeakMap,q=new WeakMap,Y=new WeakMap,ie=new WeakMap,oe=new WeakMap,be=new WeakMap,$=new WeakMap,T=new WeakMap,b=new WeakSet,Rt=function(){L(this,T).addEventListener("keydown",L(this,ie))},B=new WeakSet,ct=function(){L(this,T).removeEventListener("keydown",L(this,ie))},j=new WeakSet,$e=function(U){Object.entries(U).some(([ve,ye])=>L(this,$)[ve]!==ye)&&L(this,J).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(L(this,$),U)})},X=new WeakSet,Je=function(U){L(this,J).dispatch("annotationeditorparamschanged",{source:this,details:U})},C=new WeakSet,Ct=function(){if(!L(this,z)){me(this,z,!0);for(const U of L(this,M).values())U.enable()}},D=new WeakSet,Mt=function(){if(this.unselectAll(),L(this,z)){me(this,z,!1);for(const U of L(this,M).values())U.disable()}},W=new WeakSet,ht=function(U){const fe=L(this,M).get(U.pageIndex);fe?fe.addOrRebuild(U):this.addEditor(U)},de=new WeakSet,et=function(){if(L(this,O).size===0)return!0;if(L(this,O).size===1)for(const U of L(this,O).values())return U.isEmpty();return!1},le=new WeakSet,tt=function(U){L(this,Y).clear();for(const fe of U)fe.isEmpty()||(L(this,Y).add(fe),fe.select());ue(this,j,$e).call(this,{hasSelectedEditor:!0})},je(w,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],he.prototype.selectAll],[["ctrl+c","mac+meta+c"],he.prototype.copy],[["ctrl+v","mac+meta+v"],he.prototype.paste],[["ctrl+x","mac+meta+x"],he.prototype.cut],[["ctrl+z","mac+meta+z"],he.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],he.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],he.prototype.delete],[["Escape","mac+Escape"],he.prototype.unselectAll]])),t.AnnotationEditorUIManager=w},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=u,t.getColorValues=F,t.getCurrentTransform=Q,t.getCurrentTransformInverse=re,t.getFilenameFromUrl=d,t.getPdfFilenameFromUrl=R,t.getRGB=S,t.getXfaPageViewport=M,t.isDataScheme=a,t.isPdfFile=h,t.isValidFetchUrl=f,t.loadScript=c;var i=n(9),r=n(1);const s="http://www.w3.org/2000/svg",o="pdfjs_internal_id_";t.AnnotationPrefix=o;const J=class{};let m=J;je(m,"CSS",96),je(m,"PDF",72),je(m,"PDF_TO_CSS_UNITS",J.CSS/J.PDF),t.PixelsPerInch=m;class A extends i.BaseCanvasFactory{constructor({ownerDocument:z=globalThis.document}={}){super(),this._document=z}_createCanvas(z,q){const Y=this._document.createElement("canvas");return Y.width=z,Y.height=q,Y}}t.DOMCanvasFactory=A;async function l(V,z=!1){if(f(V,document.baseURI)){const q=await fetch(V);if(!q.ok)throw new Error(q.statusText);return z?new Uint8Array(await q.arrayBuffer()):(0,r.stringToBytes)(await q.text())}return new Promise((q,Y)=>{const ie=new XMLHttpRequest;ie.open("GET",V,!0),z&&(ie.responseType="arraybuffer"),ie.onreadystatechange=()=>{if(ie.readyState===XMLHttpRequest.DONE){if(ie.status===200||ie.status===0){let oe;if(z&&ie.response?oe=new Uint8Array(ie.response):!z&&ie.responseText&&(oe=(0,r.stringToBytes)(ie.responseText)),oe){q(oe);return}}Y(new Error(ie.statusText))}},ie.send(null)})}class _ extends i.BaseCMapReaderFactory{_fetchData(z,q){return l(z,this.isCompressed).then(Y=>({cMapData:Y,compressionType:q}))}}t.DOMCMapReaderFactory=_;class P extends i.BaseStandardFontDataFactory{_fetchData(z){return l(z,!0)}}t.DOMStandardFontDataFactory=P;class w extends i.BaseSVGFactory{_createSVG(z){return document.createElementNS(s,z)}}t.DOMSVGFactory=w;class E{constructor({viewBox:z,scale:q,rotation:Y,offsetX:ie=0,offsetY:oe=0,dontFlip:be=!1}){this.viewBox=z,this.scale=q,this.rotation=Y,this.offsetX=ie,this.offsetY=oe;const $=(z[2]+z[0])/2,T=(z[3]+z[1])/2;let b,I,B,H;switch(Y%=360,Y<0&&(Y+=360),Y){case 180:b=-1,I=0,B=0,H=1;break;case 90:b=0,I=1,B=1,H=0;break;case 270:b=0,I=-1,B=-1,H=0;break;case 0:b=1,I=0,B=0,H=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}be&&(B=-B,H=-H);let j,K,X,g;b===0?(j=Math.abs(T-z[1])*q+ie,K=Math.abs($-z[0])*q+oe,X=Math.abs(z[3]-z[1])*q,g=Math.abs(z[2]-z[0])*q):(j=Math.abs($-z[0])*q+ie,K=Math.abs(T-z[1])*q+oe,X=Math.abs(z[2]-z[0])*q,g=Math.abs(z[3]-z[1])*q),this.transform=[b*q,I*q,B*q,H*q,j-b*q*$-B*q*T,K-I*q*$-H*q*T],this.width=X,this.height=g}clone({scale:z=this.scale,rotation:q=this.rotation,offsetX:Y=this.offsetX,offsetY:ie=this.offsetY,dontFlip:oe=!1}={}){return new E({viewBox:this.viewBox.slice(),scale:z,rotation:q,offsetX:Y,offsetY:ie,dontFlip:oe})}convertToViewportPoint(z,q){return r.Util.applyTransform([z,q],this.transform)}convertToViewportRectangle(z){const q=r.Util.applyTransform([z[0],z[1]],this.transform),Y=r.Util.applyTransform([z[2],z[3]],this.transform);return[q[0],q[1],Y[0],Y[1]]}convertToPdfPoint(z,q){return r.Util.applyInverseTransform([z,q],this.transform)}}t.PageViewport=E;class p extends r.BaseException{constructor(z,q){super(z,"RenderingCancelledException"),this.type=q}}t.RenderingCancelledException=p;function a(V){const z=V.length;let q=0;for(;q<z&&V[q].trim()==="";)q++;return V.substring(q,q+5).toLowerCase()==="data:"}function h(V){return typeof V=="string"&&/\.pdf$/i.test(V)}function d(V){const z=V.indexOf("#"),q=V.indexOf("?"),Y=Math.min(z>0?z:V.length,q>0?q:V.length);return V.substring(V.lastIndexOf("/",Y)+1,Y)}function R(V,z="document.pdf"){if(typeof V!="string")return z;if(a(V))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),z;const q=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Y=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,ie=q.exec(V);let oe=Y.exec(ie[1])||Y.exec(ie[2])||Y.exec(ie[3]);if(oe&&(oe=oe[0],oe.includes("%")))try{oe=Y.exec(decodeURIComponent(oe))[0]}catch{}return oe||z}class x{constructor(){this.started=Object.create(null),this.times=[]}time(z){z in this.started&&(0,r.warn)(`Timer is already running for ${z}`),this.started[z]=Date.now()}timeEnd(z){z in this.started||(0,r.warn)(`Timer has not been started for ${z}`),this.times.push({name:z,start:this.started[z],end:Date.now()}),delete this.started[z]}toString(){const z=[];let q=0;for(const Y of this.times){const ie=Y.name;ie.length>q&&(q=ie.length)}for(const Y of this.times){const ie=Y.end-Y.start;z.push(`${Y.name.padEnd(q)} ${ie}ms
`)}return z.join("")}}t.StatTimer=x;function f(V,z){try{const{protocol:q}=z?new URL(V,z):new URL(V);return q==="http:"||q==="https:"}catch{return!1}}function c(V,z=!1){return new Promise((q,Y)=>{const ie=document.createElement("script");ie.src=V,ie.onload=function(oe){z&&ie.remove(),q(oe)},ie.onerror=function(){Y(new Error(`Cannot load script at: ${ie.src}`))},(document.head||document.documentElement).append(ie)})}function u(V){console.log("Deprecated API usage: "+V)}let y;class O{static toDateObject(z){if(!z||typeof z!="string")return null;y||(y=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const q=y.exec(z);if(!q)return null;const Y=parseInt(q[1],10);let ie=parseInt(q[2],10);ie=ie>=1&&ie<=12?ie-1:0;let oe=parseInt(q[3],10);oe=oe>=1&&oe<=31?oe:1;let be=parseInt(q[4],10);be=be>=0&&be<=23?be:0;let $=parseInt(q[5],10);$=$>=0&&$<=59?$:0;let T=parseInt(q[6],10);T=T>=0&&T<=59?T:0;const b=q[7]||"Z";let I=parseInt(q[8],10);I=I>=0&&I<=23?I:0;let B=parseInt(q[9],10)||0;return B=B>=0&&B<=59?B:0,b==="-"?(be+=I,$+=B):b==="+"&&(be-=I,$-=B),new Date(Date.UTC(Y,ie,oe,be,$,T))}}t.PDFDateString=O;function M(V,{scale:z=1,rotation:q=0}){const{width:Y,height:ie}=V.attributes.style,oe=[0,0,parseInt(Y),parseInt(ie)];return new E({viewBox:oe,scale:z,rotation:q})}function S(V){if(V.startsWith("#")){const z=parseInt(V.slice(1),16);return[(z&16711680)>>16,(z&65280)>>8,z&255]}return V.startsWith("rgb(")?V.slice(4,-1).split(",").map(z=>parseInt(z)):V.startsWith("rgba(")?V.slice(5,-1).split(",").map(z=>parseInt(z)).slice(0,3):((0,r.warn)(`Not a valid color format: "${V}"`),[0,0,0])}function F(V){const z=document.createElement("span");z.style.visibility="hidden",document.body.append(z);for(const q of V.keys()){z.style.color=q;const Y=window.getComputedStyle(z).color;V.set(q,S(Y))}z.remove()}function Q(V){const{a:z,b:q,c:Y,d:ie,e:oe,f:be}=V.getTransform();return[z,q,Y,ie,oe,be]}function re(V){const{a:z,b:q,c:Y,d:ie,e:oe,f:be}=V.getTransform().invertSelf();return[z,q,Y,ie,oe,be]}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var i=n(1);class r{constructor(){this.constructor===r&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(l,_){if(l<=0||_<=0)throw new Error("Invalid canvas size");const P=this._createCanvas(l,_);return{canvas:P,context:P.getContext("2d")}}reset(l,_,P){if(!l.canvas)throw new Error("Canvas is not specified");if(_<=0||P<=0)throw new Error("Invalid canvas size");l.canvas.width=_,l.canvas.height=P}destroy(l){if(!l.canvas)throw new Error("Canvas is not specified");l.canvas.width=0,l.canvas.height=0,l.canvas=null,l.context=null}_createCanvas(l,_){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=r;class s{constructor({baseUrl:l=null,isCompressed:_=!1}){this.constructor===s&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=l,this.isCompressed=_}async fetch({name:l}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!l)throw new Error("CMap name must be specified.");const _=this.baseUrl+l+(this.isCompressed?".bcmap":""),P=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(_,P).catch(w=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${_}`)})}_fetchData(l,_){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=s;class o{constructor({baseUrl:l=null}){this.constructor===o&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=l}async fetch({filename:l}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!l)throw new Error("Font filename must be specified.");const _=`${this.baseUrl}${l}`;return this._fetchData(_).catch(P=>{throw new Error(`Unable to load font data at: ${_}`)})}_fetchData(l){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=o;class m{constructor(){this.constructor===m&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(l,_,P=!1){if(l<=0||_<=0)throw new Error("Invalid SVG dimensions");const w=this._createSVG("svg:svg");return w.setAttribute("version","1.1"),P||(w.setAttribute("width",`${l}px`),w.setAttribute("height",`${_}px`)),w.setAttribute("preserveAspectRatio","none"),w.setAttribute("viewBox",`0 0 ${l} ${_}`),w}createElement(l){if(typeof l!="string")throw new Error("Invalid SVG element type");return this._createSVG(l)}_createSVG(l){(0,i.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=m},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var i=n(1);const r=3285377520,s=4294901760,o=65535;class m{constructor(l){this.h1=l?l&4294967295:r,this.h2=l?l&4294967295:r}update(l){let _,P;if(typeof l=="string"){_=new Uint8Array(l.length*2),P=0;for(let y=0,O=l.length;y<O;y++){const M=l.charCodeAt(y);M<=255?_[P++]=M:(_[P++]=M>>>8,_[P++]=M&255)}}else if((0,i.isArrayBuffer)(l))_=l.slice(),P=_.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const w=P>>2,E=P-w*4,p=new Uint32Array(_.buffer,0,w);let a=0,h=0,d=this.h1,R=this.h2;const x=3432918353,f=461845907,c=x&o,u=f&o;for(let y=0;y<w;y++)y&1?(a=p[y],a=a*x&s|a*c&o,a=a<<15|a>>>17,a=a*f&s|a*u&o,d^=a,d=d<<13|d>>>19,d=d*5+3864292196):(h=p[y],h=h*x&s|h*c&o,h=h<<15|h>>>17,h=h*f&s|h*u&o,R^=h,R=R<<13|R>>>19,R=R*5+3864292196);switch(a=0,E){case 3:a^=_[w*4+2]<<16;case 2:a^=_[w*4+1]<<8;case 1:a^=_[w*4],a=a*x&s|a*c&o,a=a<<15|a>>>17,a=a*f&s|a*u&o,w&1?d^=a:R^=a}this.h1=d,this.h2=R}hexdigest(){let l=this.h1,_=this.h2;l^=_>>>1,l=l*3981806797&s|l*36045&o,_=_*4283543511&s|((_<<16|l>>>16)*2950163797&s)>>>16,l^=_>>>1,l=l*444984403&s|l*60499&o,_=_*3301882366&s|((_<<16|l>>>16)*3120437893&s)>>>16,l^=_>>>1;const P=(l>>>0).toString(16),w=(_>>>0).toString(16);return P.padStart(8,"0")+w.padStart(8,"0")}}t.MurmurHash3_64=m},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var i=n(1);class r{constructor({docId:A,onUnsupportedFeature:l,ownerDocument:_=globalThis.document,styleElement:P=null}){this.constructor===r&&(0,i.unreachable)("Cannot initialize BaseFontLoader."),this.docId=A,this._onUnsupportedFeature=l,this._document=_,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(A){this.nativeFontFaces.push(A),this._document.fonts.add(A)}insertRule(A){let l=this.styleElement;l||(l=this.styleElement=this._document.createElement("style"),l.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(l));const _=l.sheet;_.insertRule(A,_.cssRules.length)}clear(){for(const A of this.nativeFontFaces)this._document.fonts.delete(A);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(A){if(A.attached||A.missingFile)return;if(A.attached=!0,this.isFontLoadingAPISupported){const _=A.createNativeFontFace();if(_){this.addNativeFontFace(_);try{await _.loaded}catch(P){throw this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,i.warn)(`Failed to load font '${_.family}': '${P}'.`),A.disableFontFace=!0,P}}return}const l=A.createFontFaceRule();if(l){if(this.insertRule(l),this.isSyncFontLoadingSupported)return;await new Promise(_=>{const P=this._queueLoadingCallback(_);this._prepareFontLoadEvent([l],[A],P)})}}_queueLoadingCallback(A){(0,i.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var l;const A=!!((l=this._document)!=null&&l.fonts);return(0,i.shadow)(this,"isFontLoadingAPISupported",A)}get isSyncFontLoadingSupported(){(0,i.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,i.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(A,l,_){(0,i.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let s;t.FontLoader=s,t.FontLoader=s=class extends r{constructor(A){super(A),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let A=!1;if(typeof navigator>"u")A=!0;else{const l=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(l==null?void 0:l[1])>=14&&(A=!0)}return(0,i.shadow)(this,"isSyncFontLoadingSupported",A)}_queueLoadingCallback(A){function l(){for((0,i.assert)(!P.done,"completeRequest() cannot be called twice."),P.done=!0;_.requests.length>0&&_.requests[0].done;){const w=_.requests.shift();setTimeout(w.callback,0)}}const _=this.loadingContext,P={id:`pdfjs-font-loading-${_.nextRequestId++}`,done:!1,complete:l,callback:A};return _.requests.push(P),P}get _loadTestFont(){const A=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,i.shadow)(this,"_loadTestFont",A())}_prepareFontLoadEvent(A,l,_){function P(re,J){return re.charCodeAt(J)<<24|re.charCodeAt(J+1)<<16|re.charCodeAt(J+2)<<8|re.charCodeAt(J+3)&255}function w(re,J,V,z){const q=re.substring(0,J),Y=re.substring(J+V);return q+z+Y}let E,p;const a=this._document.createElement("canvas");a.width=1,a.height=1;const h=a.getContext("2d");let d=0;function R(re,J){if(d++,d>30){(0,i.warn)("Load test font never loaded."),J();return}if(h.font="30px "+re,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){J();return}setTimeout(R.bind(null,re,J))}const x=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=w(f,976,x.length,x);const u=16,y=1482184792;let O=P(f,u);for(E=0,p=x.length-3;E<p;E+=4)O=O-y+P(x,E)|0;E<x.length&&(O=O-y+P(x+"XXX",E)|0),f=w(f,u,4,(0,i.string32)(O));const M=`url(data:font/opentype;base64,${btoa(f)});`,S=`@font-face {font-family:"${x}";src:${M}}`;this.insertRule(S);const F=[];for(const re of l)F.push(re.loadedName);F.push(x);const Q=this._document.createElement("div");Q.style.visibility="hidden",Q.style.width=Q.style.height="10px",Q.style.position="absolute",Q.style.top=Q.style.left="0px";for(const re of F){const J=this._document.createElement("span");J.textContent="Hi",J.style.fontFamily=re,Q.append(J)}this._document.body.append(Q),R(x,()=>{Q.remove(),_.complete()})}};class o{constructor(A,{isEvalSupported:l=!0,disableFontFace:_=!1,ignoreErrors:P=!1,onUnsupportedFeature:w,fontRegistry:E=null}){this.compiledGlyphs=Object.create(null);for(const p in A)this[p]=A[p];this.isEvalSupported=l!==!1,this.disableFontFace=_===!0,this.ignoreErrors=P===!0,this._onUnsupportedFeature=w,this.fontRegistry=E}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let A;if(!this.cssFontInfo)A=new FontFace(this.loadedName,this.data,{});else{const l={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(l.style=`oblique ${this.cssFontInfo.italicAngle}deg`),A=new FontFace(this.cssFontInfo.fontFamily,this.data,l)}return this.fontRegistry&&this.fontRegistry.registerFont(this),A}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const A=(0,i.bytesToString)(this.data),l=`url(data:${this.mimetype};base64,${btoa(A)});`;let _;if(!this.cssFontInfo)_=`@font-face {font-family:"${this.loadedName}";src:${l}}`;else{let P=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(P+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),_=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${P}src:${l}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,l),_}getPathGenerator(A,l){if(this.compiledGlyphs[l]!==void 0)return this.compiledGlyphs[l];let _;try{_=A.get(this.loadedName+"_path_"+l)}catch(P){if(!this.ignoreErrors)throw P;return this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,i.warn)(`getPathGenerator - ignoring character: "${P}".`),this.compiledGlyphs[l]=function(w,E){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const P=[];for(const w of _){const E=w.args!==void 0?w.args.join(","):"";P.push("c.",w.cmd,"(",E,`);
`)}return this.compiledGlyphs[l]=new Function("c","size",P.join(""))}return this.compiledGlyphs[l]=function(P,w){for(const E of _)E.cmd==="scale"&&(E.args=[w,-w]),P[E.cmd].apply(P,E.args)}}}t.FontFaceObject=o},(e,t,n)=>{var ie,ut;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var i=n(8),r=n(1),s=n(13),o=n(14),m=n(3);const A=16,l=100,_=4096,P=15,w=10,E=m.isNodeJS&&typeof Path2D>"u"?-1:1e3,p=16;function a($,T){if($._removeMirroring)throw new Error("Context is already forwarding operations.");$.__originalSave=$.save,$.__originalRestore=$.restore,$.__originalRotate=$.rotate,$.__originalScale=$.scale,$.__originalTranslate=$.translate,$.__originalTransform=$.transform,$.__originalSetTransform=$.setTransform,$.__originalResetTransform=$.resetTransform,$.__originalClip=$.clip,$.__originalMoveTo=$.moveTo,$.__originalLineTo=$.lineTo,$.__originalBezierCurveTo=$.bezierCurveTo,$.__originalRect=$.rect,$.__originalClosePath=$.closePath,$.__originalBeginPath=$.beginPath,$._removeMirroring=()=>{$.save=$.__originalSave,$.restore=$.__originalRestore,$.rotate=$.__originalRotate,$.scale=$.__originalScale,$.translate=$.__originalTranslate,$.transform=$.__originalTransform,$.setTransform=$.__originalSetTransform,$.resetTransform=$.__originalResetTransform,$.clip=$.__originalClip,$.moveTo=$.__originalMoveTo,$.lineTo=$.__originalLineTo,$.bezierCurveTo=$.__originalBezierCurveTo,$.rect=$.__originalRect,$.closePath=$.__originalClosePath,$.beginPath=$.__originalBeginPath,delete $._removeMirroring},$.save=function(){T.save(),this.__originalSave()},$.restore=function(){T.restore(),this.__originalRestore()},$.translate=function(I,B){T.translate(I,B),this.__originalTranslate(I,B)},$.scale=function(I,B){T.scale(I,B),this.__originalScale(I,B)},$.transform=function(I,B,H,j,K,X){T.transform(I,B,H,j,K,X),this.__originalTransform(I,B,H,j,K,X)},$.setTransform=function(I,B,H,j,K,X){T.setTransform(I,B,H,j,K,X),this.__originalSetTransform(I,B,H,j,K,X)},$.resetTransform=function(){T.resetTransform(),this.__originalResetTransform()},$.rotate=function(I){T.rotate(I),this.__originalRotate(I)},$.clip=function(I){T.clip(I),this.__originalClip(I)},$.moveTo=function(b,I){T.moveTo(b,I),this.__originalMoveTo(b,I)},$.lineTo=function(b,I){T.lineTo(b,I),this.__originalLineTo(b,I)},$.bezierCurveTo=function(b,I,B,H,j,K){T.bezierCurveTo(b,I,B,H,j,K),this.__originalBezierCurveTo(b,I,B,H,j,K)},$.rect=function(b,I,B,H){T.rect(b,I,B,H),this.__originalRect(b,I,B,H)},$.closePath=function(){T.closePath(),this.__originalClosePath()},$.beginPath=function(){T.beginPath(),this.__originalBeginPath()}}class h{constructor(T){this.canvasFactory=T,this.cache=Object.create(null)}getCanvas(T,b,I){let B;return this.cache[T]!==void 0?(B=this.cache[T],this.canvasFactory.reset(B,b,I)):(B=this.canvasFactory.create(b,I),this.cache[T]=B),B}delete(T){delete this.cache[T]}clear(){for(const T in this.cache){const b=this.cache[T];this.canvasFactory.destroy(b),delete this.cache[T]}}}function d($,T,b,I,B,H,j,K,X,g){const[C,k,D,N,W,se]=(0,i.getCurrentTransform)($);if(k===0&&D===0){const le=j*C+W,ne=Math.round(le),he=K*N+se,pe=Math.round(he),U=(j+X)*C+W,fe=Math.abs(Math.round(U)-ne)||1,ve=(K+g)*N+se,ye=Math.abs(Math.round(ve)-pe)||1;return $.setTransform(Math.sign(C),0,0,Math.sign(N),ne,pe),$.drawImage(T,b,I,B,H,0,0,fe,ye),$.setTransform(C,k,D,N,W,se),[fe,ye]}if(C===0&&N===0){const le=K*D+W,ne=Math.round(le),he=j*k+se,pe=Math.round(he),U=(K+g)*D+W,fe=Math.abs(Math.round(U)-ne)||1,ve=(j+X)*k+se,ye=Math.abs(Math.round(ve)-pe)||1;return $.setTransform(0,Math.sign(k),Math.sign(D),0,ne,pe),$.drawImage(T,b,I,B,H,0,0,ye,fe),$.setTransform(C,k,D,N,W,se),[ye,fe]}$.drawImage(T,b,I,B,H,j,K,X,g);const de=Math.hypot(C,k),te=Math.hypot(D,N);return[de*X,te*g]}function R($){const{width:T,height:b}=$;if(T>E||b>E)return null;const I=1e3,B=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),H=T+1;let j=new Uint8Array(H*(b+1)),K,X,g;const C=T+7&-8;let k=new Uint8Array(C*b),D=0;for(const te of $.data){let le=128;for(;le>0;)k[D++]=te&le?0:255,le>>=1}let N=0;for(D=0,k[D]!==0&&(j[0]=1,++N),X=1;X<T;X++)k[D]!==k[D+1]&&(j[X]=k[D]?2:1,++N),D++;for(k[D]!==0&&(j[X]=2,++N),K=1;K<b;K++){D=K*C,g=K*H,k[D-C]!==k[D]&&(j[g]=k[D]?1:8,++N);let te=(k[D]?4:0)+(k[D-C]?8:0);for(X=1;X<T;X++)te=(te>>2)+(k[D+1]?4:0)+(k[D-C+1]?8:0),B[te]&&(j[g+X]=B[te],++N),D++;if(k[D-C]!==k[D]&&(j[g+X]=k[D]?2:4,++N),N>I)return null}for(D=C*(b-1),g=K*H,k[D]!==0&&(j[g]=8,++N),X=1;X<T;X++)k[D]!==k[D+1]&&(j[g+X]=k[D]?4:8,++N),D++;if(k[D]!==0&&(j[g+X]=4,++N),N>I)return null;const W=new Int32Array([0,H,-1,0,-H,0,0,0,1]),se=new Path2D;for(K=0;N&&K<=b;K++){let te=K*H;const le=te+T;for(;te<le&&!j[te];)te++;if(te===le)continue;se.moveTo(te%H,K);const ne=te;let he=j[te];do{const pe=W[he];do te+=pe;while(!j[te]);const U=j[te];U!==5&&U!==10?(he=U,j[te]=0):(he=U&51*he>>4,j[te]&=he>>2|he<<2),se.lineTo(te%H,te/H|0),j[te]||--N}while(ne!==te);--K}return k=null,j=null,function(te){te.save(),te.scale(1/T,-1/b),te.translate(0,-b),te.fill(se),te.beginPath(),te.restore()}}class x{constructor(T,b){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,T,b])}clone(){const T=Object.create(this);return T.clipBox=this.clipBox.slice(),T}setCurrentPoint(T,b){this.x=T,this.y=b}updatePathMinMax(T,b,I){[b,I]=r.Util.applyTransform([b,I],T),this.minX=Math.min(this.minX,b),this.minY=Math.min(this.minY,I),this.maxX=Math.max(this.maxX,b),this.maxY=Math.max(this.maxY,I)}updateRectMinMax(T,b){const I=r.Util.applyTransform(b,T),B=r.Util.applyTransform(b.slice(2),T);this.minX=Math.min(this.minX,I[0],B[0]),this.minY=Math.min(this.minY,I[1],B[1]),this.maxX=Math.max(this.maxX,I[0],B[0]),this.maxY=Math.max(this.maxY,I[1],B[1])}updateScalingPathMinMax(T,b){r.Util.scaleMinMax(T,b),this.minX=Math.min(this.minX,b[0]),this.maxX=Math.max(this.maxX,b[1]),this.minY=Math.min(this.minY,b[2]),this.maxY=Math.max(this.maxY,b[3])}updateCurvePathMinMax(T,b,I,B,H,j,K,X,g,C){const k=r.Util.bezierBoundingBox(b,I,B,H,j,K,X,g);if(C){C[0]=Math.min(C[0],k[0],k[2]),C[1]=Math.max(C[1],k[0],k[2]),C[2]=Math.min(C[2],k[1],k[3]),C[3]=Math.max(C[3],k[1],k[3]);return}this.updateRectMinMax(T,k)}getPathBoundingBox(T=s.PathType.FILL,b=null){const I=[this.minX,this.minY,this.maxX,this.maxY];if(T===s.PathType.STROKE){b||(0,r.unreachable)("Stroke bounding box must include transform.");const B=r.Util.singularValueDecompose2dScale(b),H=B[0]*this.lineWidth/2,j=B[1]*this.lineWidth/2;I[0]-=H,I[1]-=j,I[2]+=H,I[3]+=j}return I}updateClipFromPath(){const T=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(T||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(T){this.clipBox=T,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(T=s.PathType.FILL,b=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(T,b))}}function f($,T,b=null){if(typeof ImageData<"u"&&T instanceof ImageData){$.putImageData(T,0,0);return}const I=T.height,B=T.width,H=I%p,j=(I-H)/p,K=H===0?j:j+1,X=$.createImageData(B,p);let g=0,C;const k=T.data,D=X.data;let N,W,se,de,te,le,ne,he;if(b)switch(b.length){case 1:te=b[0],le=b[0],ne=b[0],he=b[0];break;case 4:te=b[0],le=b[1],ne=b[2],he=b[3];break}if(T.kind===r.ImageKind.GRAYSCALE_1BPP){const pe=k.byteLength,U=new Uint32Array(D.buffer,0,D.byteLength>>2),fe=U.length,ve=B+7>>3;let ye=4294967295,Te=r.FeatureTest.isLittleEndian?4278190080:255;for(he&&he[0]===255&&he[255]===0&&([ye,Te]=[Te,ye]),N=0;N<K;N++){for(se=N<j?p:H,C=0,W=0;W<se;W++){const Ce=pe-g;let De=0;const Oe=Ce>ve?B:Ce*8-7,ze=Oe&-8;let Me=0,Fe=0;for(;De<ze;De+=8)Fe=k[g++],U[C++]=Fe&128?ye:Te,U[C++]=Fe&64?ye:Te,U[C++]=Fe&32?ye:Te,U[C++]=Fe&16?ye:Te,U[C++]=Fe&8?ye:Te,U[C++]=Fe&4?ye:Te,U[C++]=Fe&2?ye:Te,U[C++]=Fe&1?ye:Te;for(;De<Oe;De++)Me===0&&(Fe=k[g++],Me=128),U[C++]=Fe&Me?ye:Te,Me>>=1}for(;C<fe;)U[C++]=0;$.putImageData(X,0,N*p)}}else if(T.kind===r.ImageKind.RGBA_32BPP){const pe=!!(te||le||ne);for(W=0,de=B*p*4,N=0;N<j;N++){if(D.set(k.subarray(g,g+de)),g+=de,pe)for(let U=0;U<de;U+=4)te&&(D[U+0]=te[D[U+0]]),le&&(D[U+1]=le[D[U+1]]),ne&&(D[U+2]=ne[D[U+2]]);$.putImageData(X,0,W),W+=p}if(N<K){if(de=B*H*4,D.set(k.subarray(g,g+de)),pe)for(let U=0;U<de;U+=4)te&&(D[U+0]=te[D[U+0]]),le&&(D[U+1]=le[D[U+1]]),ne&&(D[U+2]=ne[D[U+2]]);$.putImageData(X,0,W)}}else if(T.kind===r.ImageKind.RGB_24BPP){const pe=!!(te||le||ne);for(se=p,de=B*se,N=0;N<K;N++){for(N>=j&&(se=H,de=B*se),C=0,W=de;W--;)D[C++]=k[g++],D[C++]=k[g++],D[C++]=k[g++],D[C++]=255;if(pe)for(let U=0;U<C;U+=4)te&&(D[U+0]=te[D[U+0]]),le&&(D[U+1]=le[D[U+1]]),ne&&(D[U+2]=ne[D[U+2]]);$.putImageData(X,0,N*p)}}else throw new Error(`bad image kind: ${T.kind}`)}function c($,T){if(T.bitmap){$.drawImage(T.bitmap,0,0);return}const b=T.height,I=T.width,B=b%p,H=(b-B)/p,j=B===0?H:H+1,K=$.createImageData(I,p);let X=0;const g=T.data,C=K.data;for(let k=0;k<j;k++){const D=k<H?p:B;({srcPos:X}=(0,o.applyMaskImageData)({src:g,srcPos:X,dest:C,width:I,height:D})),$.putImageData(K,0,k*p)}}function u($,T){const b=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let I=0,B=b.length;I<B;I++){const H=b[I];$[H]!==void 0&&(T[H]=$[H])}$.setLineDash!==void 0&&(T.setLineDash($.getLineDash()),T.lineDashOffset=$.lineDashOffset)}function y($,T){$.strokeStyle=$.fillStyle=T||"#000000",$.fillRule="nonzero",$.globalAlpha=1,$.lineWidth=1,$.lineCap="butt",$.lineJoin="miter",$.miterLimit=10,$.globalCompositeOperation="source-over",$.font="10px sans-serif",$.setLineDash!==void 0&&($.setLineDash([]),$.lineDashOffset=0)}function O($,T,b,I){const B=$.length;for(let H=3;H<B;H+=4){const j=$[H];if(j===0)$[H-3]=T,$[H-2]=b,$[H-1]=I;else if(j<255){const K=255-j;$[H-3]=$[H-3]*j+T*K>>8,$[H-2]=$[H-2]*j+b*K>>8,$[H-1]=$[H-1]*j+I*K>>8}}}function M($,T,b){const I=$.length,B=1/255;for(let H=3;H<I;H+=4){const j=b?b[$[H]]:$[H];T[H]=T[H]*j*B|0}}function S($,T,b){const I=$.length;for(let B=3;B<I;B+=4){const H=$[B-3]*77+$[B-2]*152+$[B-1]*28;T[B]=b?T[B]*b[H>>8]>>8:T[B]*H>>16}}function F($,T,b,I,B,H,j,K,X,g,C){const k=!!H,D=k?H[0]:0,N=k?H[1]:0,W=k?H[2]:0;let se;B==="Luminosity"?se=S:se=M;const te=Math.min(I,Math.ceil(1048576/b));for(let le=0;le<I;le+=te){const ne=Math.min(te,I-le),he=$.getImageData(K-g,le+(X-C),b,ne),pe=T.getImageData(K,le+X,b,ne);k&&O(he.data,D,N,W),se(he.data,pe.data,j),T.putImageData(pe,K,le+X)}}function Q($,T,b,I){const B=I[0],H=I[1],j=I[2]-B,K=I[3]-H;j===0||K===0||(F(T.context,b,j,K,T.subtype,T.backdrop,T.transferMap,B,H,T.offsetX,T.offsetY),$.save(),$.globalAlpha=1,$.globalCompositeOperation="source-over",$.setTransform(1,0,0,1,0,0),$.drawImage(b.canvas,0,0),$.restore())}function re($,T){const b=r.Util.singularValueDecompose2dScale($);b[0]=Math.fround(b[0]),b[1]=Math.fround(b[1]);const I=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return T!==void 0?T:b[0]<=I||b[1]<=I}const J=["butt","round","square"],V=["miter","round","bevel"],z={},q={},be=class{constructor(T,b,I,B,H,j,K,X){ce(this,ie);this.ctx=T,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=b,this.objs=I,this.canvasFactory=B,this.imageLayer=H,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=j,this.cachedCanvases=new h(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=K,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(X==null?void 0:X.background)||null,this.foregroundColor=(X==null?void 0:X.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(T,b=null){return typeof T=="string"?T.startsWith("g_")?this.commonObjs.get(T):this.objs.get(T):b}beginDrawing({transform:T,viewport:b,transparency:I=!1,background:B=null}){const H=this.ctx.canvas.width,j=this.ctx.canvas.height,K=B||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const X=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const g=this.backgroundColor=this.ctx.fillStyle;let C=!0,k=K;if(this.ctx.fillStyle=K,k=this.ctx.fillStyle,C=typeof k=="string"&&/^#[0-9A-Fa-f]{6}$/.test(k),X==="#000000"&&g==="#ffffff"||X===g||!C)this.foregroundColor=this.backgroundColor=null;else{const[D,N,W]=(0,i.getRGB)(k),se=te=>(te/=255,te<=.03928?te/12.92:((te+.055)/1.055)**2.4),de=Math.round(.2126*se(D)+.7152*se(N)+.0722*se(W));this.selectColor=(te,le,ne)=>{const he=.2126*se(te)+.7152*se(le)+.0722*se(ne);return Math.round(he)===de?g:X}}}if(this.ctx.fillStyle=this.backgroundColor||K,this.ctx.fillRect(0,0,H,j),this.ctx.restore(),I){const X=this.cachedCanvases.getCanvas("transparent",H,j);this.compositeCtx=this.ctx,this.transparentCanvas=X.canvas,this.ctx=X.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),y(this.ctx,this.foregroundColor),T&&(this.ctx.transform(...T),this.outputScaleX=T[0],this.outputScaleY=T[0]),this.ctx.transform(...b.transform),this.viewportScale=b.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx),this.imageLayer&&((0,i.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(T,b,I,B){const H=T.argsArray,j=T.fnArray;let K=b||0;const X=H.length;if(X===K)return K;const g=X-K>w&&typeof I=="function",C=g?Date.now()+P:0;let k=0;const D=this.commonObjs,N=this.objs;let W;for(;;){if(B!==void 0&&K===B.nextBreakPoint)return B.breakIt(K,I),K;if(W=j[K],W!==r.OPS.dependency)this[W].apply(this,H[K]);else for(const se of H[K]){const de=se.startsWith("g_")?D:N;if(!de.has(se))return de.get(se,I),K}if(K++,K===X)return K;if(g&&++k>w){if(Date.now()>C)return I(),K;k=0}}}endDrawing(){ue(this,ie,ut).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const T of this._cachedBitmapsMap.values()){for(const b of T.values())typeof HTMLCanvasElement<"u"&&b instanceof HTMLCanvasElement&&(b.width=b.height=0);T.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(T,b){const I=T.width,B=T.height;let H=Math.max(Math.hypot(b[0],b[1]),1),j=Math.max(Math.hypot(b[2],b[3]),1),K=I,X=B,g="prescale1",C,k;for(;H>2&&K>1||j>2&&X>1;){let D=K,N=X;H>2&&K>1&&(D=Math.ceil(K/2),H/=K/D),j>2&&X>1&&(N=Math.ceil(X/2),j/=X/N),C=this.cachedCanvases.getCanvas(g,D,N),k=C.context,k.clearRect(0,0,D,N),k.drawImage(T,0,0,K,X,0,0,D,N),T=C.canvas,K=D,X=N,g=g==="prescale1"?"prescale2":"prescale1"}return{img:T,paintWidth:K,paintHeight:X}}_createMaskCanvas(T){const b=this.ctx,{width:I,height:B}=T,H=this.current.fillColor,j=this.current.patternFill,K=(0,i.getCurrentTransform)(b);let X,g,C,k;if((T.bitmap||T.data)&&T.count>1){const fe=T.bitmap||T.data.buffer,ve=K.slice(0,4);g=JSON.stringify(j?ve:[ve,H]),X=this._cachedBitmapsMap.get(fe),X||(X=new Map,this._cachedBitmapsMap.set(fe,X));const ye=X.get(g);if(ye&&!j){const Te=Math.round(Math.min(K[0],K[2])+K[4]),Ce=Math.round(Math.min(K[1],K[3])+K[5]);return{canvas:ye,offsetX:Te,offsetY:Ce}}C=ye}C||(k=this.cachedCanvases.getCanvas("maskCanvas",I,B),c(k.context,T));let D=r.Util.transform(K,[1/I,0,0,-1/B,0,0]);D=r.Util.transform(D,[1,0,0,1,0,-B]);const N=r.Util.applyTransform([0,0],D),W=r.Util.applyTransform([I,B],D),se=r.Util.normalizeRect([N[0],N[1],W[0],W[1]]),de=Math.round(se[2]-se[0])||1,te=Math.round(se[3]-se[1])||1,le=this.cachedCanvases.getCanvas("fillCanvas",de,te),ne=le.context,he=Math.min(N[0],W[0]),pe=Math.min(N[1],W[1]);ne.translate(-he,-pe),ne.transform(...D),C||(C=this._scaleImage(k.canvas,(0,i.getCurrentTransformInverse)(ne)),C=C.img,X&&j&&X.set(g,C)),ne.imageSmoothingEnabled=re((0,i.getCurrentTransform)(ne),T.interpolate),d(ne,C,0,0,C.width,C.height,0,0,I,B),ne.globalCompositeOperation="source-in";const U=r.Util.transform((0,i.getCurrentTransformInverse)(ne),[1,0,0,1,-he,-pe]);return ne.fillStyle=j?H.getPattern(b,this,U,s.PathType.FILL):H,ne.fillRect(0,0,I,B),X&&!j&&(this.cachedCanvases.delete("fillCanvas"),X.set(g,le.canvas)),{canvas:le.canvas,offsetX:Math.round(he),offsetY:Math.round(pe)}}setLineWidth(T){T!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=T,this.ctx.lineWidth=T}setLineCap(T){this.ctx.lineCap=J[T]}setLineJoin(T){this.ctx.lineJoin=V[T]}setMiterLimit(T){this.ctx.miterLimit=T}setDash(T,b){const I=this.ctx;I.setLineDash!==void 0&&(I.setLineDash(T),I.lineDashOffset=b)}setRenderingIntent(T){}setFlatness(T){}setGState(T){for(let b=0,I=T.length;b<I;b++){const B=T[b],H=B[0],j=B[1];switch(H){case"LW":this.setLineWidth(j);break;case"LC":this.setLineCap(j);break;case"LJ":this.setLineJoin(j);break;case"ML":this.setMiterLimit(j);break;case"D":this.setDash(j[0],j[1]);break;case"RI":this.setRenderingIntent(j);break;case"FL":this.setFlatness(j);break;case"Font":this.setFont(j[0],j[1]);break;case"CA":this.current.strokeAlpha=B[1];break;case"ca":this.current.fillAlpha=B[1],this.ctx.globalAlpha=B[1];break;case"BM":this.ctx.globalCompositeOperation=j;break;case"SMask":this.current.activeSMask=j?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=j}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const T=this.inSMaskMode;this.current.activeSMask&&!T?this.beginSMaskMode():!this.current.activeSMask&&T&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const T=this.ctx.canvas.width,b=this.ctx.canvas.height,I="smaskGroupAt"+this.groupLevel,B=this.cachedCanvases.getCanvas(I,T,b);this.suspendedCtx=this.ctx,this.ctx=B.context;const H=this.ctx;H.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),u(this.suspendedCtx,H),a(H,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),u(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(T){if(!this.current.activeSMask)return;T?(T[0]=Math.floor(T[0]),T[1]=Math.floor(T[1]),T[2]=Math.ceil(T[2]),T[3]=Math.ceil(T[3])):T=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const b=this.current.activeSMask,I=this.suspendedCtx;Q(I,b,this.ctx,T),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(u(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const T=this.current;this.stateStack.push(T),this.current=T.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),u(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(T,b,I,B,H,j){this.ctx.transform(T,b,I,B,H,j),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(T,b,I){const B=this.ctx,H=this.current;let j=H.x,K=H.y,X,g;const C=(0,i.getCurrentTransform)(B),k=C[0]===0&&C[3]===0||C[1]===0&&C[2]===0,D=k?I.slice(0):null;for(let N=0,W=0,se=T.length;N<se;N++)switch(T[N]|0){case r.OPS.rectangle:j=b[W++],K=b[W++];const de=b[W++],te=b[W++],le=j+de,ne=K+te;B.moveTo(j,K),de===0||te===0?B.lineTo(le,ne):(B.lineTo(le,K),B.lineTo(le,ne),B.lineTo(j,ne)),k||H.updateRectMinMax(C,[j,K,le,ne]),B.closePath();break;case r.OPS.moveTo:j=b[W++],K=b[W++],B.moveTo(j,K),k||H.updatePathMinMax(C,j,K);break;case r.OPS.lineTo:j=b[W++],K=b[W++],B.lineTo(j,K),k||H.updatePathMinMax(C,j,K);break;case r.OPS.curveTo:X=j,g=K,j=b[W+4],K=b[W+5],B.bezierCurveTo(b[W],b[W+1],b[W+2],b[W+3],j,K),H.updateCurvePathMinMax(C,X,g,b[W],b[W+1],b[W+2],b[W+3],j,K,D),W+=6;break;case r.OPS.curveTo2:X=j,g=K,B.bezierCurveTo(j,K,b[W],b[W+1],b[W+2],b[W+3]),H.updateCurvePathMinMax(C,X,g,j,K,b[W],b[W+1],b[W+2],b[W+3],D),j=b[W+2],K=b[W+3],W+=4;break;case r.OPS.curveTo3:X=j,g=K,j=b[W+2],K=b[W+3],B.bezierCurveTo(b[W],b[W+1],j,K,j,K),H.updateCurvePathMinMax(C,X,g,b[W],b[W+1],j,K,j,K,D),W+=4;break;case r.OPS.closePath:B.closePath();break}k&&H.updateScalingPathMinMax(C,D),H.setCurrentPoint(j,K)}closePath(){this.ctx.closePath()}stroke(T){T=typeof T<"u"?T:!0;const b=this.ctx,I=this.current.strokeColor;b.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof I=="object"&&(I!=null&&I.getPattern)?(b.save(),b.strokeStyle=I.getPattern(b,this,(0,i.getCurrentTransformInverse)(b),s.PathType.STROKE),this.rescaleAndStroke(!1),b.restore()):this.rescaleAndStroke(!0)),T&&this.consumePath(this.current.getClippedPathBoundingBox()),b.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(T){T=typeof T<"u"?T:!0;const b=this.ctx,I=this.current.fillColor,B=this.current.patternFill;let H=!1;B&&(b.save(),b.fillStyle=I.getPattern(b,this,(0,i.getCurrentTransformInverse)(b),s.PathType.FILL),H=!0);const j=this.current.getClippedPathBoundingBox();this.contentVisible&&j!==null&&(this.pendingEOFill?(b.fill("evenodd"),this.pendingEOFill=!1):b.fill()),H&&b.restore(),T&&this.consumePath(j)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=z}eoClip(){this.pendingClip=q}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const T=this.pendingTextPaths,b=this.ctx;if(T===void 0){b.beginPath();return}b.save(),b.beginPath();for(const I of T)b.setTransform(...I.transform),b.translate(I.x,I.y),I.addToPath(b,I.fontSize);b.restore(),b.clip(),b.beginPath(),delete this.pendingTextPaths}setCharSpacing(T){this.current.charSpacing=T}setWordSpacing(T){this.current.wordSpacing=T}setHScale(T){this.current.textHScale=T/100}setLeading(T){this.current.leading=-T}setFont(T,b){const I=this.commonObjs.get(T),B=this.current;if(!I)throw new Error(`Can't find font for ${T}`);if(B.fontMatrix=I.fontMatrix||r.FONT_IDENTITY_MATRIX,(B.fontMatrix[0]===0||B.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+T),b<0?(b=-b,B.fontDirection=-1):B.fontDirection=1,this.current.font=I,this.current.fontSize=b,I.isType3Font)return;const H=I.loadedName||"sans-serif";let j="normal";I.black?j="900":I.bold&&(j="bold");const K=I.italic?"italic":"normal",X=`"${H}", ${I.fallbackName}`;let g=b;b<A?g=A:b>l&&(g=l),this.current.fontSizeScale=b/g,this.ctx.font=`${K} ${j} ${g}px ${X}`}setTextRenderingMode(T){this.current.textRenderingMode=T}setTextRise(T){this.current.textRise=T}moveText(T,b){this.current.x=this.current.lineX+=T,this.current.y=this.current.lineY+=b}setLeadingMoveText(T,b){this.setLeading(-b),this.moveText(T,b)}setTextMatrix(T,b,I,B,H,j){this.current.textMatrix=[T,b,I,B,H,j],this.current.textMatrixScale=Math.hypot(T,b),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(T,b,I,B){const H=this.ctx,j=this.current,K=j.font,X=j.textRenderingMode,g=j.fontSize/j.fontSizeScale,C=X&r.TextRenderingMode.FILL_STROKE_MASK,k=!!(X&r.TextRenderingMode.ADD_TO_PATH_FLAG),D=j.patternFill&&!K.missingFile;let N;(K.disableFontFace||k||D)&&(N=K.getPathGenerator(this.commonObjs,T)),K.disableFontFace||D?(H.save(),H.translate(b,I),H.beginPath(),N(H,g),B&&H.setTransform(...B),(C===r.TextRenderingMode.FILL||C===r.TextRenderingMode.FILL_STROKE)&&H.fill(),(C===r.TextRenderingMode.STROKE||C===r.TextRenderingMode.FILL_STROKE)&&H.stroke(),H.restore()):((C===r.TextRenderingMode.FILL||C===r.TextRenderingMode.FILL_STROKE)&&H.fillText(T,b,I),(C===r.TextRenderingMode.STROKE||C===r.TextRenderingMode.FILL_STROKE)&&H.strokeText(T,b,I)),k&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(H),x:b,y:I,fontSize:g,addToPath:N})}get isFontSubpixelAAEnabled(){const{context:T}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);T.scale(1.5,1),T.fillText("I",0,10);const b=T.getImageData(0,0,10,10).data;let I=!1;for(let B=3;B<b.length;B+=4)if(b[B]>0&&b[B]<255){I=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",I)}showText(T){const b=this.current,I=b.font;if(I.isType3Font)return this.showType3Text(T);const B=b.fontSize;if(B===0)return;const H=this.ctx,j=b.fontSizeScale,K=b.charSpacing,X=b.wordSpacing,g=b.fontDirection,C=b.textHScale*g,k=T.length,D=I.vertical,N=D?1:-1,W=I.defaultVMetrics,se=B*b.fontMatrix[0],de=b.textRenderingMode===r.TextRenderingMode.FILL&&!I.disableFontFace&&!b.patternFill;H.save(),H.transform(...b.textMatrix),H.translate(b.x,b.y+b.textRise),g>0?H.scale(C,-1):H.scale(C,1);let te;if(b.patternFill){H.save();const U=b.fillColor.getPattern(H,this,(0,i.getCurrentTransformInverse)(H),s.PathType.FILL);te=(0,i.getCurrentTransform)(H),H.restore(),H.fillStyle=U}let le=b.lineWidth;const ne=b.textMatrixScale;if(ne===0||le===0){const U=b.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(U===r.TextRenderingMode.STROKE||U===r.TextRenderingMode.FILL_STROKE)&&(le=this.getSinglePixelWidth())}else le/=ne;j!==1&&(H.scale(j,j),le/=j),H.lineWidth=le;let he=0,pe;for(pe=0;pe<k;++pe){const U=T[pe];if(typeof U=="number"){he+=N*U*B/1e3;continue}let fe=!1;const ve=(U.isSpace?X:0)+K,ye=U.fontChar,Te=U.accent;let Ce,De,Oe=U.width;if(D){const Me=U.vmetric||W,Fe=-(U.vmetric?Me[1]:Oe*.5)*se,Xe=Me[2]*se;Oe=Me?-Me[0]:Oe,Ce=Fe/j,De=(he+Xe)/j}else Ce=he/j,De=0;if(I.remeasure&&Oe>0){const Me=H.measureText(ye).width*1e3/B*j;if(Oe<Me&&this.isFontSubpixelAAEnabled){const Fe=Oe/Me;fe=!0,H.save(),H.scale(Fe,1),Ce/=Fe}else Oe!==Me&&(Ce+=(Oe-Me)/2e3*B/j)}if(this.contentVisible&&(U.isInFont||I.missingFile)){if(de&&!Te)H.fillText(ye,Ce,De);else if(this.paintChar(ye,Ce,De,te),Te){const Me=Ce+B*Te.offset.x/j,Fe=De-B*Te.offset.y/j;this.paintChar(Te.fontChar,Me,Fe,te)}}let ze;D?ze=Oe*se-ve*g:ze=Oe*se+ve*g,he+=ze,fe&&H.restore()}D?b.y-=he:b.x+=he*C,H.restore(),this.compose()}showType3Text(T){const b=this.ctx,I=this.current,B=I.font,H=I.fontSize,j=I.fontDirection,K=B.vertical?1:-1,X=I.charSpacing,g=I.wordSpacing,C=I.textHScale*j,k=I.fontMatrix||r.FONT_IDENTITY_MATRIX,D=T.length,N=I.textRenderingMode===r.TextRenderingMode.INVISIBLE;let W,se,de,te;if(!(N||H===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,b.save(),b.transform(...I.textMatrix),b.translate(I.x,I.y),b.scale(C,j),W=0;W<D;++W){if(se=T[W],typeof se=="number"){te=K*se*H/1e3,this.ctx.translate(te,0),I.x+=te*C;continue}const le=(se.isSpace?g:0)+X,ne=B.charProcOperatorList[se.operatorListId];if(!ne){(0,r.warn)(`Type3 character "${se.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=se,this.save(),b.scale(H,H),b.transform(...k),this.executeOperatorList(ne),this.restore()),de=r.Util.applyTransform([se.width,0],k)[0]*H+le,b.translate(de,0),I.x+=de*C}b.restore(),this.processingType3=null}}setCharWidth(T,b){}setCharWidthAndBounds(T,b,I,B,H,j){this.ctx.rect(I,B,H-I,j-B),this.ctx.clip(),this.endPath()}getColorN_Pattern(T){let b;if(T[0]==="TilingPattern"){const I=T[1],B=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),H={createCanvasGraphics:j=>new be(j,this.commonObjs,this.objs,this.canvasFactory)};b=new s.TilingPattern(T,I,this.ctx,H,B)}else b=this._getPattern(T[1],T[2]);return b}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(T,b,I){var H;const B=((H=this.selectColor)==null?void 0:H.call(this,T,b,I))||r.Util.makeHexColor(T,b,I);this.ctx.strokeStyle=B,this.current.strokeColor=B}setFillRGBColor(T,b,I){var H;const B=((H=this.selectColor)==null?void 0:H.call(this,T,b,I))||r.Util.makeHexColor(T,b,I);this.ctx.fillStyle=B,this.current.fillColor=B,this.current.patternFill=!1}_getPattern(T,b=null){let I;return this.cachedPatterns.has(T)?I=this.cachedPatterns.get(T):(I=(0,s.getShadingPattern)(this.objs.get(T)),this.cachedPatterns.set(T,I)),b&&(I.matrix=b),I}shadingFill(T){if(!this.contentVisible)return;const b=this.ctx;this.save();const I=this._getPattern(T);b.fillStyle=I.getPattern(b,this,(0,i.getCurrentTransformInverse)(b),s.PathType.SHADING);const B=(0,i.getCurrentTransformInverse)(b);if(B){const H=b.canvas,j=H.width,K=H.height,X=r.Util.applyTransform([0,0],B),g=r.Util.applyTransform([0,K],B),C=r.Util.applyTransform([j,0],B),k=r.Util.applyTransform([j,K],B),D=Math.min(X[0],g[0],C[0],k[0]),N=Math.min(X[1],g[1],C[1],k[1]),W=Math.max(X[0],g[0],C[0],k[0]),se=Math.max(X[1],g[1],C[1],k[1]);this.ctx.fillRect(D,N,W-D,se-N)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(T,b){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(T)&&T.length===6&&this.transform(...T),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),b)){const I=b[2]-b[0],B=b[3]-b[1];this.ctx.rect(b[0],b[1],I,B),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),b),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(T){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const b=this.ctx;T.isolated||(0,r.info)("TODO: Support non-isolated groups."),T.knockout&&(0,r.warn)("Knockout groups not supported.");const I=(0,i.getCurrentTransform)(b);if(T.matrix&&b.transform(...T.matrix),!T.bbox)throw new Error("Bounding box is required.");let B=r.Util.getAxialAlignedBoundingBox(T.bbox,(0,i.getCurrentTransform)(b));const H=[0,0,b.canvas.width,b.canvas.height];B=r.Util.intersect(B,H)||[0,0,0,0];const j=Math.floor(B[0]),K=Math.floor(B[1]);let X=Math.max(Math.ceil(B[2])-j,1),g=Math.max(Math.ceil(B[3])-K,1),C=1,k=1;X>_&&(C=X/_,X=_),g>_&&(k=g/_,g=_),this.current.startNewPathAndClipBox([0,0,X,g]);let D="groupAt"+this.groupLevel;T.smask&&(D+="_smask_"+this.smaskCounter++%2);const N=this.cachedCanvases.getCanvas(D,X,g),W=N.context;W.scale(1/C,1/k),W.translate(-j,-K),W.transform(...I),T.smask?this.smaskStack.push({canvas:N.canvas,context:W,offsetX:j,offsetY:K,scaleX:C,scaleY:k,subtype:T.smask.subtype,backdrop:T.smask.backdrop,transferMap:T.smask.transferMap||null,startTransformInverse:null}):(b.setTransform(1,0,0,1,0,0),b.translate(j,K),b.scale(C,k),b.save()),u(b,W),this.ctx=W,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(b),this.groupLevel++}endGroup(T){if(!this.contentVisible)return;this.groupLevel--;const b=this.ctx,I=this.groupStack.pop();if(this.ctx=I,this.ctx.imageSmoothingEnabled=!1,T.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const B=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...B);const H=r.Util.getAxialAlignedBoundingBox([0,0,b.canvas.width,b.canvas.height],B);this.ctx.drawImage(b.canvas,0,0),this.ctx.restore(),this.compose(H)}}beginAnnotation(T,b,I,B,H){if(ue(this,ie,ut).call(this),y(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(b)&&b.length===4){const j=b[2]-b[0],K=b[3]-b[1];if(H&&this.annotationCanvasMap){I=I.slice(),I[4]-=b[0],I[5]-=b[1],b=b.slice(),b[0]=b[1]=0,b[2]=j,b[3]=K;const[X,g]=r.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:C}=this,k=Math.ceil(j*this.outputScaleX*C),D=Math.ceil(K*this.outputScaleY*C);this.annotationCanvas=this.canvasFactory.create(k,D);const{canvas:N,context:W}=this.annotationCanvas;this.annotationCanvasMap.set(T,N),this.annotationCanvas.savedCtx=this.ctx,this.ctx=W,this.ctx.setTransform(X,0,0,-g,0,K*g),y(this.ctx,this.foregroundColor)}else y(this.ctx,this.foregroundColor),this.ctx.rect(b[0],b[1],j,K),this.ctx.clip(),this.endPath()}this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...I),this.transform(...B)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(T){if(!this.contentVisible)return;const b=T.count;T=this.getObject(T.data,T),T.count=b;const I=this.ctx,B=this.processingType3;if(B&&(B.compiled===void 0&&(B.compiled=R(T)),B.compiled)){B.compiled(I);return}const H=this._createMaskCanvas(T),j=H.canvas;I.save(),I.setTransform(1,0,0,1,0,0),I.drawImage(j,H.offsetX,H.offsetY),I.restore(),this.compose()}paintImageMaskXObjectRepeat(T,b,I=0,B=0,H,j){if(!this.contentVisible)return;T=this.getObject(T.data,T);const K=this.ctx;K.save();const X=(0,i.getCurrentTransform)(K);K.transform(b,I,B,H,0,0);const g=this._createMaskCanvas(T);K.setTransform(1,0,0,1,0,0);for(let C=0,k=j.length;C<k;C+=2){const D=r.Util.transform(X,[b,I,B,H,j[C],j[C+1]]),[N,W]=r.Util.applyTransform([0,0],D);K.drawImage(g.canvas,N,W)}K.restore(),this.compose()}paintImageMaskXObjectGroup(T){if(!this.contentVisible)return;const b=this.ctx,I=this.current.fillColor,B=this.current.patternFill;for(const H of T){const{data:j,width:K,height:X,transform:g}=H,C=this.cachedCanvases.getCanvas("maskCanvas",K,X),k=C.context;k.save();const D=this.getObject(j,H);c(k,D),k.globalCompositeOperation="source-in",k.fillStyle=B?I.getPattern(k,this,(0,i.getCurrentTransformInverse)(b),s.PathType.FILL):I,k.fillRect(0,0,K,X),k.restore(),b.save(),b.transform(...g),b.scale(1,-1),d(b,C.canvas,0,0,K,X,0,-1,1,1),b.restore()}this.compose()}paintImageXObject(T){if(!this.contentVisible)return;const b=this.getObject(T);if(!b){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(b)}paintImageXObjectRepeat(T,b,I,B){if(!this.contentVisible)return;const H=this.getObject(T);if(!H){(0,r.warn)("Dependent image isn't ready yet");return}const j=H.width,K=H.height,X=[];for(let g=0,C=B.length;g<C;g+=2)X.push({transform:[b,0,0,I,B[g],B[g+1]],x:0,y:0,w:j,h:K});this.paintInlineImageXObjectGroup(H,X)}paintInlineImageXObject(T){if(!this.contentVisible)return;const b=T.width,I=T.height,B=this.ctx;this.save(),B.scale(1/b,-1/I);let H;if(typeof HTMLElement=="function"&&T instanceof HTMLElement||!T.data)H=T;else{const g=this.cachedCanvases.getCanvas("inlineImage",b,I),C=g.context;f(C,T,this.current.transferMaps),H=g.canvas}const j=this._scaleImage(H,(0,i.getCurrentTransformInverse)(B));B.imageSmoothingEnabled=re((0,i.getCurrentTransform)(B),T.interpolate);const[K,X]=d(B,j.img,0,0,j.paintWidth,j.paintHeight,0,-I,b,I);if(this.imageLayer){const[g,C]=r.Util.applyTransform([0,-I],(0,i.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:T,left:g,top:C,width:K,height:X})}this.compose(),this.restore()}paintInlineImageXObjectGroup(T,b){if(!this.contentVisible)return;const I=this.ctx,B=T.width,H=T.height,j=this.cachedCanvases.getCanvas("inlineImage",B,H),K=j.context;f(K,T,this.current.transferMaps);for(const X of b){if(I.save(),I.transform(...X.transform),I.scale(1,-1),d(I,j.canvas,X.x,X.y,X.w,X.h,0,-1,1,1),this.imageLayer){const[g,C]=r.Util.applyTransform([X.x,X.y],(0,i.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:T,left:g,top:C,width:B,height:H})}I.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(T){}markPointProps(T,b){}beginMarkedContent(T){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(T,b){T==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(b)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(T){const b=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(T);const I=this.ctx;this.pendingClip&&(b||(this.pendingClip===q?I.clip("evenodd"):I.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),I.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const T=(0,i.getCurrentTransform)(this.ctx);if(T[1]===0&&T[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(T[0]),Math.abs(T[3]));else{const b=Math.abs(T[0]*T[3]-T[2]*T[1]),I=Math.hypot(T[0],T[2]),B=Math.hypot(T[1],T[3]);this._cachedGetSinglePixelWidth=Math.max(I,B)/b}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:T}=this.current,b=(0,i.getCurrentTransform)(this.ctx);let I,B;if(b[1]===0&&b[2]===0){const H=Math.abs(b[0]),j=Math.abs(b[3]);if(T===0)I=1/H,B=1/j;else{const K=H*T,X=j*T;I=K<1?1/K:1,B=X<1?1/X:1}}else{const H=Math.abs(b[0]*b[3]-b[2]*b[1]),j=Math.hypot(b[0],b[1]),K=Math.hypot(b[2],b[3]);if(T===0)I=K/H,B=j/H;else{const X=T*H;I=K>X?K/X:1,B=j>X?j/X:1}}this._cachedScaleForStroking=[I,B]}return this._cachedScaleForStroking}rescaleAndStroke(T){const{ctx:b}=this,{lineWidth:I}=this.current,[B,H]=this.getScaleForStroking();if(b.lineWidth=I||1,B===1&&H===1){b.stroke();return}let j,K,X;T&&(j=(0,i.getCurrentTransform)(b),K=b.getLineDash().slice(),X=b.lineDashOffset),b.scale(B,H);const g=Math.max(B,H);b.setLineDash(b.getLineDash().map(C=>C/g)),b.lineDashOffset/=g,b.stroke(),T&&(b.setTransform(...j),b.setLineDash(K),b.lineDashOffset=X)}isContentVisible(){for(let T=this.markedContentStack.length-1;T>=0;T--)if(!this.markedContentStack[T].visible)return!1;return!0}};let Y=be;ie=new WeakSet,ut=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},t.CanvasGraphics=Y;for(const $ in r.OPS)Y.prototype[$]!==void 0&&(Y.prototype[r.OPS[$]]=Y.prototype[$])},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=p;var i=n(1),r=n(8),s=n(3);const o={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=o;function m(d,R){if(!R||s.isNodeJS)return;const x=R[2]-R[0],f=R[3]-R[1],c=new Path2D;c.rect(R[0],R[1],x,f),d.clip(c)}class A{constructor(){this.constructor===A&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class l extends A{constructor(R){super(),this._type=R[1],this._bbox=R[2],this._colorStops=R[3],this._p0=R[4],this._p1=R[5],this._r0=R[6],this._r1=R[7],this.matrix=null}_createGradient(R){let x;this._type==="axial"?x=R.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(x=R.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const f of this._colorStops)x.addColorStop(f[0],f[1]);return x}getPattern(R,x,f,c){let u;if(c===o.STROKE||c===o.FILL){const y=x.current.getClippedPathBoundingBox(c,(0,r.getCurrentTransform)(R))||[0,0,0,0],O=Math.ceil(y[2]-y[0])||1,M=Math.ceil(y[3]-y[1])||1,S=x.cachedCanvases.getCanvas("pattern",O,M,!0),F=S.context;F.clearRect(0,0,F.canvas.width,F.canvas.height),F.beginPath(),F.rect(0,0,F.canvas.width,F.canvas.height),F.translate(-y[0],-y[1]),f=i.Util.transform(f,[1,0,0,1,y[0],y[1]]),F.transform(...x.baseTransform),this.matrix&&F.transform(...this.matrix),m(F,this._bbox),F.fillStyle=this._createGradient(F),F.fill(),u=R.createPattern(S.canvas,"no-repeat");const Q=new DOMMatrix(f);try{u.setTransform(Q)}catch(re){(0,i.warn)(`RadialAxialShadingPattern.getPattern: "${re==null?void 0:re.message}".`)}}else m(R,this._bbox),u=this._createGradient(R);return u}}function _(d,R,x,f,c,u,y,O){const M=R.coords,S=R.colors,F=d.data,Q=d.width*4;let re;M[x+1]>M[f+1]&&(re=x,x=f,f=re,re=u,u=y,y=re),M[f+1]>M[c+1]&&(re=f,f=c,c=re,re=y,y=O,O=re),M[x+1]>M[f+1]&&(re=x,x=f,f=re,re=u,u=y,y=re);const J=(M[x]+R.offsetX)*R.scaleX,V=(M[x+1]+R.offsetY)*R.scaleY,z=(M[f]+R.offsetX)*R.scaleX,q=(M[f+1]+R.offsetY)*R.scaleY,Y=(M[c]+R.offsetX)*R.scaleX,ie=(M[c+1]+R.offsetY)*R.scaleY;if(V>=ie)return;const oe=S[u],be=S[u+1],$=S[u+2],T=S[y],b=S[y+1],I=S[y+2],B=S[O],H=S[O+1],j=S[O+2],K=Math.round(V),X=Math.round(ie);let g,C,k,D,N,W,se,de;for(let te=K;te<=X;te++){if(te<q){let U;te<V?U=0:U=(V-te)/(V-q),g=J-(J-z)*U,C=oe-(oe-T)*U,k=be-(be-b)*U,D=$-($-I)*U}else{let U;te>ie?U=1:q===ie?U=0:U=(q-te)/(q-ie),g=z-(z-Y)*U,C=T-(T-B)*U,k=b-(b-H)*U,D=I-(I-j)*U}let le;te<V?le=0:te>ie?le=1:le=(V-te)/(V-ie),N=J-(J-Y)*le,W=oe-(oe-B)*le,se=be-(be-H)*le,de=$-($-j)*le;const ne=Math.round(Math.min(g,N)),he=Math.round(Math.max(g,N));let pe=Q*te+ne*4;for(let U=ne;U<=he;U++)le=(g-U)/(g-N),le<0?le=0:le>1&&(le=1),F[pe++]=C-(C-W)*le|0,F[pe++]=k-(k-se)*le|0,F[pe++]=D-(D-de)*le|0,F[pe++]=255}}function P(d,R,x){const f=R.coords,c=R.colors;let u,y;switch(R.type){case"lattice":const O=R.verticesPerRow,M=Math.floor(f.length/O)-1,S=O-1;for(u=0;u<M;u++){let F=u*O;for(let Q=0;Q<S;Q++,F++)_(d,x,f[F],f[F+1],f[F+O],c[F],c[F+1],c[F+O]),_(d,x,f[F+O+1],f[F+1],f[F+O],c[F+O+1],c[F+1],c[F+O])}break;case"triangles":for(u=0,y=f.length;u<y;u+=3)_(d,x,f[u],f[u+1],f[u+2],c[u],c[u+1],c[u+2]);break;default:throw new Error("illegal figure")}}class w extends A{constructor(R){super(),this._coords=R[2],this._colors=R[3],this._figures=R[4],this._bounds=R[5],this._bbox=R[7],this._background=R[8],this.matrix=null}_createMeshCanvas(R,x,f){const O=Math.floor(this._bounds[0]),M=Math.floor(this._bounds[1]),S=Math.ceil(this._bounds[2])-O,F=Math.ceil(this._bounds[3])-M,Q=Math.min(Math.ceil(Math.abs(S*R[0]*1.1)),3e3),re=Math.min(Math.ceil(Math.abs(F*R[1]*1.1)),3e3),J=S/Q,V=F/re,z={coords:this._coords,colors:this._colors,offsetX:-O,offsetY:-M,scaleX:1/J,scaleY:1/V},q=Q+2*2,Y=re+2*2,ie=f.getCanvas("mesh",q,Y,!1),oe=ie.context,be=oe.createImageData(Q,re);if(x){const T=be.data;for(let b=0,I=T.length;b<I;b+=4)T[b]=x[0],T[b+1]=x[1],T[b+2]=x[2],T[b+3]=255}for(const T of this._figures)P(be,T,z);return oe.putImageData(be,2,2),{canvas:ie.canvas,offsetX:O-2*J,offsetY:M-2*V,scaleX:J,scaleY:V}}getPattern(R,x,f,c){m(R,this._bbox);let u;if(c===o.SHADING)u=i.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(R));else if(u=i.Util.singularValueDecompose2dScale(x.baseTransform),this.matrix){const O=i.Util.singularValueDecompose2dScale(this.matrix);u=[u[0]*O[0],u[1]*O[1]]}const y=this._createMeshCanvas(u,c===o.SHADING?null:this._background,x.cachedCanvases);return c!==o.SHADING&&(R.setTransform(...x.baseTransform),this.matrix&&R.transform(...this.matrix)),R.translate(y.offsetX,y.offsetY),R.scale(y.scaleX,y.scaleY),R.createPattern(y.canvas,"no-repeat")}}class E extends A{getPattern(){return"hotpink"}}function p(d){switch(d[0]){case"RadialAxial":return new l(d);case"Mesh":return new w(d);case"Dummy":return new E}throw new Error(`Unknown IR type: ${d[0]}`)}const a={COLORED:1,UNCOLORED:2};class h{static get MAX_PATTERN_SIZE(){return(0,i.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(R,x,f,c,u){this.operatorList=R[2],this.matrix=R[3]||[1,0,0,1,0,0],this.bbox=R[4],this.xstep=R[5],this.ystep=R[6],this.paintType=R[7],this.tilingType=R[8],this.color=x,this.ctx=f,this.canvasGraphicsFactory=c,this.baseTransform=u}createPatternCanvas(R){const x=this.operatorList,f=this.bbox,c=this.xstep,u=this.ystep,y=this.paintType,O=this.tilingType,M=this.color,S=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+O);const F=f[0],Q=f[1],re=f[2],J=f[3],V=i.Util.singularValueDecompose2dScale(this.matrix),z=i.Util.singularValueDecompose2dScale(this.baseTransform),q=[V[0]*z[0],V[1]*z[1]],Y=this.getSizeAndScale(c,this.ctx.canvas.width,q[0]),ie=this.getSizeAndScale(u,this.ctx.canvas.height,q[1]),oe=R.cachedCanvases.getCanvas("pattern",Y.size,ie.size,!0),be=oe.context,$=S.createCanvasGraphics(be);$.groupLevel=R.groupLevel,this.setFillAndStrokeStyleToContext($,y,M);let T=F,b=Q,I=re,B=J;return F<0&&(T=0,I+=Math.abs(F)),Q<0&&(b=0,B+=Math.abs(Q)),be.translate(-(Y.scale*T),-(ie.scale*b)),$.transform(Y.scale,0,0,ie.scale,0,0),be.save(),this.clipBbox($,T,b,I,B),$.baseTransform=(0,r.getCurrentTransform)($.ctx),$.executeOperatorList(x),$.endDrawing(),{canvas:oe.canvas,scaleX:Y.scale,scaleY:ie.scale,offsetX:T,offsetY:b}}getSizeAndScale(R,x,f){R=Math.abs(R);const c=Math.max(h.MAX_PATTERN_SIZE,x);let u=Math.ceil(R*f);return u>=c?u=c:f=u/R,{scale:f,size:u}}clipBbox(R,x,f,c,u){const y=c-x,O=u-f;R.ctx.rect(x,f,y,O),R.current.updateRectMinMax((0,r.getCurrentTransform)(R.ctx),[x,f,c,u]),R.clip(),R.endPath()}setFillAndStrokeStyleToContext(R,x,f){const c=R.ctx,u=R.current;switch(x){case a.COLORED:const y=this.ctx;c.fillStyle=y.fillStyle,c.strokeStyle=y.strokeStyle,u.fillColor=y.fillStyle,u.strokeColor=y.strokeStyle;break;case a.UNCOLORED:const O=i.Util.makeHexColor(f[0],f[1],f[2]);c.fillStyle=O,c.strokeStyle=O,u.fillColor=O,u.strokeColor=O;break;default:throw new i.FormatError(`Unsupported paint type: ${x}`)}}getPattern(R,x,f,c){let u=f;c!==o.SHADING&&(u=i.Util.transform(u,x.baseTransform),this.matrix&&(u=i.Util.transform(u,this.matrix)));const y=this.createPatternCanvas(x);let O=new DOMMatrix(u);O=O.translate(y.offsetX,y.offsetY),O=O.scale(1/y.scaleX,1/y.scaleY);const M=R.createPattern(y.canvas,"repeat");try{M.setTransform(O)}catch(S){(0,i.warn)(`TilingPattern.getPattern: "${S==null?void 0:S.message}".`)}return M}}t.TilingPattern=h},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyMaskImageData=r;var i=n(1);function r({src:s,srcPos:o=0,dest:m,destPos:A=0,width:l,height:_,inverseDecode:P=!1}){const w=i.FeatureTest.isLittleEndian?4278190080:255,[E,p]=P?[0,w]:[w,0],a=l>>3,h=l&7,d=s.length;m=new Uint32Array(m.buffer);for(let R=0;R<_;R++){for(const f=o+a;o<f;o++){const c=o<d?s[o]:255;m[A++]=c&128?p:E,m[A++]=c&64?p:E,m[A++]=c&32?p:E,m[A++]=c&16?p:E,m[A++]=c&8?p:E,m[A++]=c&4?p:E,m[A++]=c&2?p:E,m[A++]=c&1?p:E}if(h===0)continue;const x=o<d?s[o++]:255;for(let f=0;f<h;f++)m[A++]=x&1<<7-f?p:E}return{srcPos:o,destPos:A}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=n.workerPort===void 0?null:n.workerPort,n.workerSrc=n.workerSrc===void 0?"":n.workerSrc},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var i=n(1);const r={UNKNOWN:0,DATA:1,ERROR:2},s={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function o(A){switch(A instanceof Error||typeof A=="object"&&A!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),A.name){case"AbortException":return new i.AbortException(A.message);case"MissingPDFException":return new i.MissingPDFException(A.message);case"PasswordException":return new i.PasswordException(A.message,A.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(A.message,A.status);case"UnknownErrorException":return new i.UnknownErrorException(A.message,A.details);default:return new i.UnknownErrorException(A.message,A.toString())}}class m{constructor(l,_,P){this.sourceName=l,this.targetName=_,this.comObj=P,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=w=>{const E=w.data;if(E.targetName!==this.sourceName)return;if(E.stream){this._processStreamMessage(E);return}if(E.callback){const a=E.callbackId,h=this.callbackCapabilities[a];if(!h)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],E.callback===r.DATA)h.resolve(E.data);else if(E.callback===r.ERROR)h.reject(o(E.reason));else throw new Error("Unexpected callback case");return}const p=this.actionHandler[E.action];if(!p)throw new Error(`Unknown action from worker: ${E.action}`);if(E.callbackId){const a=this.sourceName,h=E.sourceName;new Promise(function(d){d(p(E.data))}).then(function(d){P.postMessage({sourceName:a,targetName:h,callback:r.DATA,callbackId:E.callbackId,data:d})},function(d){P.postMessage({sourceName:a,targetName:h,callback:r.ERROR,callbackId:E.callbackId,reason:o(d)})});return}if(E.streamId){this._createStreamSink(E);return}p(E.data)},P.addEventListener("message",this._onComObjOnMessage)}on(l,_){const P=this.actionHandler;if(P[l])throw new Error(`There is already an actionName called "${l}"`);P[l]=_}send(l,_,P){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:l,data:_},P)}sendWithPromise(l,_,P){const w=this.callbackId++,E=(0,i.createPromiseCapability)();this.callbackCapabilities[w]=E;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:l,callbackId:w,data:_},P)}catch(p){E.reject(p)}return E.promise}sendWithStream(l,_,P,w){const E=this.streamId++,p=this.sourceName,a=this.targetName,h=this.comObj;return new ReadableStream({start:d=>{const R=(0,i.createPromiseCapability)();return this.streamControllers[E]={controller:d,startCall:R,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:p,targetName:a,action:l,streamId:E,data:_,desiredSize:d.desiredSize},w),R.promise},pull:d=>{const R=(0,i.createPromiseCapability)();return this.streamControllers[E].pullCall=R,h.postMessage({sourceName:p,targetName:a,stream:s.PULL,streamId:E,desiredSize:d.desiredSize}),R.promise},cancel:d=>{(0,i.assert)(d instanceof Error,"cancel must have a valid reason");const R=(0,i.createPromiseCapability)();return this.streamControllers[E].cancelCall=R,this.streamControllers[E].isClosed=!0,h.postMessage({sourceName:p,targetName:a,stream:s.CANCEL,streamId:E,reason:o(d)}),R.promise}},P)}_createStreamSink(l){const _=l.streamId,P=this.sourceName,w=l.sourceName,E=this.comObj,p=this,a=this.actionHandler[l.action],h={enqueue(d,R=1,x){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=R,f>0&&this.desiredSize<=0&&(this.sinkCapability=(0,i.createPromiseCapability)(),this.ready=this.sinkCapability.promise),E.postMessage({sourceName:P,targetName:w,stream:s.ENQUEUE,streamId:_,chunk:d},x)},close(){this.isCancelled||(this.isCancelled=!0,E.postMessage({sourceName:P,targetName:w,stream:s.CLOSE,streamId:_}),delete p.streamSinks[_])},error(d){(0,i.assert)(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,E.postMessage({sourceName:P,targetName:w,stream:s.ERROR,streamId:_,reason:o(d)}))},sinkCapability:(0,i.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:l.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[_]=h,new Promise(function(d){d(a(l.data,h))}).then(function(){E.postMessage({sourceName:P,targetName:w,stream:s.START_COMPLETE,streamId:_,success:!0})},function(d){E.postMessage({sourceName:P,targetName:w,stream:s.START_COMPLETE,streamId:_,reason:o(d)})})}_processStreamMessage(l){const _=l.streamId,P=this.sourceName,w=l.sourceName,E=this.comObj,p=this.streamControllers[_],a=this.streamSinks[_];switch(l.stream){case s.START_COMPLETE:l.success?p.startCall.resolve():p.startCall.reject(o(l.reason));break;case s.PULL_COMPLETE:l.success?p.pullCall.resolve():p.pullCall.reject(o(l.reason));break;case s.PULL:if(!a){E.postMessage({sourceName:P,targetName:w,stream:s.PULL_COMPLETE,streamId:_,success:!0});break}a.desiredSize<=0&&l.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=l.desiredSize,new Promise(function(h){h(a.onPull&&a.onPull())}).then(function(){E.postMessage({sourceName:P,targetName:w,stream:s.PULL_COMPLETE,streamId:_,success:!0})},function(h){E.postMessage({sourceName:P,targetName:w,stream:s.PULL_COMPLETE,streamId:_,reason:o(h)})});break;case s.ENQUEUE:if((0,i.assert)(p,"enqueue should have stream controller"),p.isClosed)break;p.controller.enqueue(l.chunk);break;case s.CLOSE:if((0,i.assert)(p,"close should have stream controller"),p.isClosed)break;p.isClosed=!0,p.controller.close(),this._deleteStreamController(p,_);break;case s.ERROR:(0,i.assert)(p,"error should have stream controller"),p.controller.error(o(l.reason)),this._deleteStreamController(p,_);break;case s.CANCEL_COMPLETE:l.success?p.cancelCall.resolve():p.cancelCall.reject(o(l.reason)),this._deleteStreamController(p,_);break;case s.CANCEL:if(!a)break;new Promise(function(h){h(a.onCancel&&a.onCancel(o(l.reason)))}).then(function(){E.postMessage({sourceName:P,targetName:w,stream:s.CANCEL_COMPLETE,streamId:_,success:!0})},function(h){E.postMessage({sourceName:P,targetName:w,stream:s.CANCEL_COMPLETE,streamId:_,reason:o(h)})}),a.sinkCapability.reject(o(l.reason)),a.isCancelled=!0,delete this.streamSinks[_];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(l,_){await Promise.allSettled([l.startCall&&l.startCall.promise,l.pullCall&&l.pullCall.promise,l.cancelCall&&l.cancelCall.promise]),delete this.streamControllers[_]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}t.MessageHandler=m},(e,t,n)=>{var s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var i=n(1);class r{constructor({parsedData:A,rawData:l}){ce(this,s,void 0);ce(this,o,void 0);me(this,s,A),me(this,o,l)}getRaw(){return L(this,o)}get(A){return L(this,s).get(A)??null}getAll(){return(0,i.objectFromMap)(L(this,s))}has(A){return L(this,s).has(A)}}s=new WeakMap,o=new WeakMap,t.Metadata=r},(e,t,n)=>{var m,A,l,_,P,w,dt;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var i=n(1);const r=Symbol("INTERNAL");class s{constructor(a,h){ce(this,m,!0);this.name=a,this.intent=h}get visible(){return L(this,m)}_setVisible(a,h){a!==r&&(0,i.unreachable)("Internal method `_setVisible` called."),me(this,m,h)}}m=new WeakMap;class o{constructor(a){ce(this,w);ce(this,A,!0);ce(this,l,new Map);ce(this,_,null);ce(this,P,null);if(this.name=null,this.creator=null,a!==null){this.name=a.name,this.creator=a.creator,me(this,P,a.order);for(const h of a.groups)L(this,l).set(h.id,new s(h.name,h.intent));if(a.baseState==="OFF")for(const h of L(this,l).values())h._setVisible(r,!1);for(const h of a.on)L(this,l).get(h)._setVisible(r,!0);for(const h of a.off)L(this,l).get(h)._setVisible(r,!1);me(this,_,new Map);for(const[h,d]of L(this,l))L(this,_).set(h,d.visible)}}isVisible(a){if(L(this,l).size===0)return!0;if(!a)return(0,i.warn)("Optional content group not defined."),!0;if(a.type==="OCG")return L(this,l).has(a.id)?L(this,l).get(a.id).visible:((0,i.warn)(`Optional content group not found: ${a.id}`),!0);if(a.type==="OCMD"){if(a.expression)return ue(this,w,dt).call(this,a.expression);if(!a.policy||a.policy==="AnyOn"){for(const h of a.ids){if(!L(this,l).has(h))return(0,i.warn)(`Optional content group not found: ${h}`),!0;if(L(this,l).get(h).visible)return!0}return!1}else if(a.policy==="AllOn"){for(const h of a.ids){if(!L(this,l).has(h))return(0,i.warn)(`Optional content group not found: ${h}`),!0;if(!L(this,l).get(h).visible)return!1}return!0}else if(a.policy==="AnyOff"){for(const h of a.ids){if(!L(this,l).has(h))return(0,i.warn)(`Optional content group not found: ${h}`),!0;if(!L(this,l).get(h).visible)return!0}return!1}else if(a.policy==="AllOff"){for(const h of a.ids){if(!L(this,l).has(h))return(0,i.warn)(`Optional content group not found: ${h}`),!0;if(L(this,l).get(h).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${a.policy}.`),!0}return(0,i.warn)(`Unknown group type ${a.type}.`),!0}setVisibility(a,h=!0){if(!L(this,l).has(a)){(0,i.warn)(`Optional content group not found: ${a}`);return}L(this,l).get(a)._setVisible(r,!!h),me(this,A,null)}get hasInitialVisibility(){if(L(this,A)!==null)return L(this,A);for(const[a,h]of L(this,l)){const d=L(this,_).get(a);if(h.visible!==d)return me(this,A,!1)}return me(this,A,!0)}getOrder(){return L(this,l).size?L(this,P)?L(this,P).slice():[...L(this,l).keys()]:null}getGroups(){return L(this,l).size>0?(0,i.objectFromMap)(L(this,l)):null}getGroup(a){return L(this,l).get(a)||null}}A=new WeakMap,l=new WeakMap,_=new WeakMap,P=new WeakMap,w=new WeakSet,dt=function(a){const h=a.length;if(h<2)return!0;const d=a[0];for(let R=1;R<h;R++){const x=a[R];let f;if(Array.isArray(x))f=ue(this,w,dt).call(this,x);else if(L(this,l).has(x))f=L(this,l).get(x).visible;else return(0,i.warn)(`Optional content group not found: ${x}`),!0;switch(d){case"And":if(!f)return!1;break;case"Or":if(f)return!0;break;case"Not":return!f;default:return!0}}return d==="And"},t.OptionalContentConfig=o},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var i=n(1),r=n(8);class s{constructor(l,_){(0,i.assert)(_,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=l.progressiveDone||!1,this._contentDispositionFilename=l.contentDispositionFilename||null;const P=l.initialData;if((P==null?void 0:P.length)>0){const w=new Uint8Array(P).buffer;this._queuedChunks.push(w)}this._pdfDataRangeTransport=_,this._isStreamingSupported=!l.disableStream,this._isRangeSupported=!l.disableRange,this._contentLength=l.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((w,E)=>{this._onReceiveData({begin:w,chunk:E})}),this._pdfDataRangeTransport.addProgressListener((w,E)=>{this._onProgress({loaded:w,total:E})}),this._pdfDataRangeTransport.addProgressiveReadListener(w=>{this._onReceiveData({chunk:w})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(l){const _=new Uint8Array(l.chunk).buffer;if(l.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(_):this._queuedChunks.push(_);else{const P=this._rangeReaders.some(function(w){return w._begin!==l.begin?!1:(w._enqueue(_),!0)});(0,i.assert)(P,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var l;return((l=this._fullRequestReader)==null?void 0:l._loaded)??0}_onProgress(l){if(l.total===void 0){const _=this._rangeReaders[0];_!=null&&_.onProgress&&_.onProgress({loaded:l.loaded})}else{const _=this._fullRequestReader;_!=null&&_.onProgress&&_.onProgress({loaded:l.loaded,total:l.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(l){const _=this._rangeReaders.indexOf(l);_>=0&&this._rangeReaders.splice(_,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const l=this._queuedChunks;return this._queuedChunks=null,new o(this,l,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(l,_){if(_<=this._progressiveDataLength)return null;const P=new m(this,l,_);return this._pdfDataRangeTransport.requestDataRange(l,_),this._rangeReaders.push(P),P}cancelAllRequests(l){this._fullRequestReader&&this._fullRequestReader.cancel(l);for(const _ of this._rangeReaders.slice(0))_.cancel(l);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=s;class o{constructor(l,_,P=!1,w=null){this._stream=l,this._done=P||!1,this._filename=(0,r.isPdfFile)(w)?w:null,this._queuedChunks=_||[],this._loaded=0;for(const E of this._queuedChunks)this._loaded+=E.byteLength;this._requests=[],this._headersReady=Promise.resolve(),l._fullRequestReader=this,this.onProgress=null}_enqueue(l){this._done||(this._requests.length>0?this._requests.shift().resolve({value:l,done:!1}):this._queuedChunks.push(l),this._loaded+=l.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const l=(0,i.createPromiseCapability)();return this._requests.push(l),l.promise}cancel(l){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class m{constructor(l,_,P){this._stream=l,this._begin=_,this._end=P,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(l){if(!this._done){if(this._requests.length===0)this._queuedChunk=l;else{this._requests.shift().resolve({value:l,done:!1});for(const P of this._requests)P.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const _=this._queuedChunk;return this._queuedChunk=null,{value:_,done:!1}}if(this._done)return{value:void 0,done:!0};const l=(0,i.createPromiseCapability)();return this._requests.push(l),l.promise}cancel(l){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class n{static textContent(r){const s=[],o={items:s,styles:Object.create(null)};function m(A){var P;if(!A)return;let l=null;const _=A.name;if(_==="#text")l=A.value;else if(n.shouldBuildText(_))(P=A==null?void 0:A.attributes)!=null&&P.textContent?l=A.attributes.textContent:A.value&&(l=A.value);else return;if(l!==null&&s.push({str:l}),!!A.children)for(const w of A.children)m(w)}return m(r),o}static shouldBuildText(r){return!(r==="textarea"||r==="input"||r==="option"||r==="select")}}t.XfaText=n},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var i=n(9);const r=function(A){return new Promise((l,_)=>{require$$0.readFile(A,(w,E)=>{if(w||!E){_(new Error(w));return}l(new Uint8Array(E))})})};class s extends i.BaseCanvasFactory{_createCanvas(l,_){return require$$1.createCanvas(l,_)}}t.NodeCanvasFactory=s;class o extends i.BaseCMapReaderFactory{_fetchData(l,_){return r(l).then(P=>({cMapData:P,compressionType:_}))}}t.NodeCMapReaderFactory=o;class m extends i.BaseStandardFontDataFactory{_fetchData(l){return r(l)}}t.NodeStandardFontDataFactory=m},(e,t,n)=>{var A,l,_,P,w,E,p,a,h,ft,R,Pt,f,pt,u,kt;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var i=n(7),r=n(1),s=n(23),o=n(24);const O=class{constructor(S){ce(this,h);ce(this,R);ce(this,f);ce(this,u);ce(this,A,void 0);ce(this,l,!1);ce(this,_,this.pointerup.bind(this));ce(this,P,this.pointerdown.bind(this));ce(this,w,new Map);ce(this,E,!1);ce(this,p,!1);ce(this,a,void 0);O._initialized||(O._initialized=!0,s.FreeTextEditor.initialize(S.l10n),o.InkEditor.initialize(S.l10n),S.uiManager.registerEditorTypes([s.FreeTextEditor,o.InkEditor])),me(this,a,S.uiManager),this.annotationStorage=S.annotationStorage,this.pageIndex=S.pageIndex,this.div=S.div,me(this,A,S.accessibilityManager),L(this,a).addLayer(this)}updateToolbar(S){L(this,a).updateToolbar(S)}updateMode(S=L(this,a).getMode()){ue(this,u,kt).call(this),S===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),L(this,a).unselectAll()}addInkEditorIfNeeded(S){if(!S&&L(this,a).getMode()!==r.AnnotationEditorType.INK)return;if(!S){for(const Q of L(this,w).values())if(Q.isEmpty()){Q.setInBackground();return}}ue(this,f,pt).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(S){L(this,a).setEditingState(S)}addCommands(S){L(this,a).addCommands(S)}enable(){this.div.style.pointerEvents="auto";for(const S of L(this,w).values())S.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const S of L(this,w).values())S.disableEditing()}setActiveEditor(S){L(this,a).getActive()!==S&&L(this,a).setActiveEditor(S)}enableClick(){this.div.addEventListener("pointerdown",L(this,P)),this.div.addEventListener("pointerup",L(this,_))}disableClick(){this.div.removeEventListener("pointerdown",L(this,P)),this.div.removeEventListener("pointerup",L(this,_))}attach(S){L(this,w).set(S.id,S)}detach(S){var F;L(this,w).delete(S.id),(F=L(this,A))==null||F.removePointerInTextLayer(S.contentDiv)}remove(S){L(this,a).removeEditor(S),this.detach(S),this.annotationStorage.remove(S.id),S.div.style.display="none",setTimeout(()=>{S.div.style.display="",S.div.remove(),S.isAttachedToDOM=!1,document.activeElement===document.body&&L(this,a).focusMainContainer()},0),L(this,p)||this.addInkEditorIfNeeded(!1)}add(S){if(ue(this,h,ft).call(this,S),L(this,a).addEditor(S),this.attach(S),!S.isAttachedToDOM){const F=S.render();this.div.append(F),S.isAttachedToDOM=!0}this.moveEditorInDOM(S),S.onceAdded(),this.addToAnnotationStorage(S)}moveEditorInDOM(S){var F;(F=L(this,A))==null||F.moveElementInDOM(this.div,S.div,S.contentDiv,!0)}addToAnnotationStorage(S){!S.isEmpty()&&!this.annotationStorage.has(S.id)&&this.annotationStorage.setValue(S.id,S)}addOrRebuild(S){S.needsToBeRebuilt()?S.rebuild():this.add(S)}addANewEditor(S){const F=()=>{this.addOrRebuild(S)},Q=()=>{S.remove()};this.addCommands({cmd:F,undo:Q,mustExec:!0})}addUndoableEditor(S){const F=()=>{this.addOrRebuild(S)},Q=()=>{S.remove()};this.addCommands({cmd:F,undo:Q,mustExec:!1})}getNextId(){return L(this,a).getId()}deserialize(S){switch(S.annotationType){case r.AnnotationEditorType.FREETEXT:return s.FreeTextEditor.deserialize(S,this);case r.AnnotationEditorType.INK:return o.InkEditor.deserialize(S,this)}return null}setSelected(S){L(this,a).setSelected(S)}toggleSelected(S){L(this,a).toggleSelected(S)}isSelected(S){return L(this,a).isSelected(S)}unselect(S){L(this,a).unselect(S)}pointerup(S){const F=i.KeyboardManager.platform.isMac;if(!(S.button!==0||S.ctrlKey&&F)&&S.target===this.div&&L(this,E)){if(me(this,E,!1),!L(this,l)){me(this,l,!0);return}ue(this,f,pt).call(this,S)}}pointerdown(S){const F=i.KeyboardManager.platform.isMac;if(S.button!==0||S.ctrlKey&&F||S.target!==this.div)return;me(this,E,!0);const Q=L(this,a).getActive();me(this,l,!Q||Q.isEmpty())}drop(S){const F=S.dataTransfer.getData("text/plain"),Q=L(this,a).getEditor(F);if(!Q)return;S.preventDefault(),S.dataTransfer.dropEffect="move",ue(this,h,ft).call(this,Q);const re=this.div.getBoundingClientRect(),J=S.clientX-re.x,V=S.clientY-re.y;Q.translate(J-Q.startX,V-Q.startY),this.moveEditorInDOM(Q),Q.div.focus()}dragover(S){S.preventDefault()}destroy(){var S,F;((S=L(this,a).getActive())==null?void 0:S.parent)===this&&L(this,a).setActiveEditor(null);for(const Q of L(this,w).values())(F=L(this,A))==null||F.removePointerInTextLayer(Q.contentDiv),Q.isAttachedToDOM=!1,Q.div.remove(),Q.parent=null;this.div=null,L(this,w).clear(),L(this,a).removeLayer(this)}render(S){this.viewport=S.viewport,(0,i.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const F of L(this,a).getEditors(this.pageIndex))this.add(F);this.updateMode()}update(S){this.viewport=S.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[S,F,Q,re]=this.viewport.viewBox,J=Q-S,V=re-F;return[J,V]}get viewportBaseDimensions(){const{width:S,height:F,rotation:Q}=this.viewport;return Q%180===0?[S,F]:[F,S]}setDimensions(){const{width:S,height:F,rotation:Q}=this.viewport,re=Q%180!==0,J=Math.floor(S)+"px",V=Math.floor(F)+"px";this.div.style.width=re?V:J,this.div.style.height=re?J:V,this.div.setAttribute("data-main-rotation",Q)}};let m=O;A=new WeakMap,l=new WeakMap,_=new WeakMap,P=new WeakMap,w=new WeakMap,E=new WeakMap,p=new WeakMap,a=new WeakMap,h=new WeakSet,ft=function(S){var F;S.parent!==this&&(this.attach(S),S.pageIndex=this.pageIndex,(F=S.parent)==null||F.detach(S),S.parent=this,S.div&&S.isAttachedToDOM&&(S.div.remove(),this.div.append(S.div)))},R=new WeakSet,Pt=function(S){switch(L(this,a).getMode()){case r.AnnotationEditorType.FREETEXT:return new s.FreeTextEditor(S);case r.AnnotationEditorType.INK:return new o.InkEditor(S)}return null},f=new WeakSet,pt=function(S){const F=this.getNextId(),Q=ue(this,R,Pt).call(this,{parent:this,id:F,x:S.offsetX,y:S.offsetY});return Q&&this.add(Q),Q},u=new WeakSet,kt=function(){me(this,p,!0);for(const S of L(this,w).values())S.isEmpty()&&S.remove();me(this,p,!1)},je(m,"_initialized",!1),t.AnnotationEditorLayer=m},(e,t,n)=>{var m,A,l,_,P,w,E,p,Ot,h,Dt,R,Ft,f,_t;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var i=n(1),r=n(7),s=n(6);const u=class extends s.AnnotationEditor{constructor(M){super({...M,name:"freeTextEditor"});ce(this,p);ce(this,h);ce(this,R);ce(this,f);ce(this,m,this.editorDivBlur.bind(this));ce(this,A,this.editorDivFocus.bind(this));ce(this,l,this.editorDivKeydown.bind(this));ce(this,_,void 0);ce(this,P,"");ce(this,w,!1);ce(this,E,void 0);me(this,_,M.color||u._defaultColor||s.AnnotationEditor._defaultLineColor),me(this,E,M.fontSize||u._defaultFontSize)}static initialize(M){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(F=>[F,M.get(F)]));const S=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(S.getPropertyValue("--freetext-padding"))}static updateDefaultParams(M,S){switch(M){case i.AnnotationEditorParamsType.FREETEXT_SIZE:u._defaultFontSize=S;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:u._defaultColor=S;break}}updateParams(M,S){switch(M){case i.AnnotationEditorParamsType.FREETEXT_SIZE:ue(this,p,Ot).call(this,S);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:ue(this,h,Dt).call(this,S);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,u._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,u._defaultColor||s.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,L(this,E)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,L(this,_)]]}getInitialTranslation(){return[-u._internalPadding*this.parent.scaleFactor,-(u._internalPadding+L(this,E))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",L(this,l)),this.editorDiv.addEventListener("focus",L(this,A)),this.editorDiv.addEventListener("blur",L(this,m)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",L(this,l)),this.editorDiv.removeEventListener("focus",L(this,A)),this.editorDiv.removeEventListener("blur",L(this,m)),this.div.focus(),this.isEditing=!1)}focusin(M){super.focusin(M),M.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),L(this,w)||(me(this,w,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),me(this,P,ue(this,R,Ft).call(this).trimEnd()),ue(this,f,_t).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(M){this.enableEditMode(),this.editorDiv.focus()}keydown(M){M.target===this.div&&M.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(M){u._keyboardManager.exec(this,M)}editorDivFocus(M){this.isEditing=!0}editorDivBlur(M){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let M,S;this.width&&(M=this.x,S=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),u._l10nPromise.get("editor_free_text_aria_label").then(Q=>{var re;return(re=this.editorDiv)==null?void 0:re.setAttribute("aria-label",Q)}),u._l10nPromise.get("free_text_default_content").then(Q=>{var re;return(re=this.editorDiv)==null?void 0:re.setAttribute("default-content",Q)}),this.editorDiv.contentEditable=!0;const{style:F}=this.editorDiv;if(F.fontSize=`calc(${L(this,E)}px * var(--scale-factor))`,F.color=L(this,_),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,r.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Q,re]=this.parent.viewportBaseDimensions;this.setAt(M*Q,S*re,this.width*Q,this.height*re);for(const J of L(this,P).split(`
`)){const V=document.createElement("div");V.append(J?document.createTextNode(J):document.createElement("br")),this.editorDiv.append(V)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(M,S){const F=super.deserialize(M,S);return me(F,E,M.fontSize),me(F,_,i.Util.makeHexColor(...M.color)),me(F,P,M.value),F}serialize(){if(this.isEmpty())return null;const M=u._internalPadding*this.parent.scaleFactor,S=this.getRect(M,M),F=s.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:i.AnnotationEditorType.FREETEXT,color:F,fontSize:L(this,E),value:L(this,P),pageIndex:this.parent.pageIndex,rect:S,rotation:this.rotation}}};let o=u;m=new WeakMap,A=new WeakMap,l=new WeakMap,_=new WeakMap,P=new WeakMap,w=new WeakMap,E=new WeakMap,p=new WeakSet,Ot=function(M){const S=Q=>{this.editorDiv.style.fontSize=`calc(${Q}px * var(--scale-factor))`,this.translate(0,-(Q-L(this,E))*this.parent.scaleFactor),me(this,E,Q),ue(this,f,_t).call(this)},F=L(this,E);this.parent.addCommands({cmd:()=>{S(M)},undo:()=>{S(F)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},h=new WeakSet,Dt=function(M){const S=L(this,_);this.parent.addCommands({cmd:()=>{me(this,_,M),this.editorDiv.style.color=M},undo:()=>{me(this,_,S),this.editorDiv.style.color=S},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},R=new WeakSet,Ft=function(){const M=this.editorDiv.getElementsByTagName("div");if(M.length===0)return this.editorDiv.innerText;const S=[];for(let F=0,Q=M.length;F<Q;F++){const J=M[F].firstChild;(J==null?void 0:J.nodeName)==="#text"?S.push(J.data):S.push("")}return S.join(`
`)},f=new WeakSet,_t=function(){const[M,S]=this.parent.viewportBaseDimensions,F=this.div.getBoundingClientRect();this.width=F.width/M,this.height=F.height/S},je(o,"_freeTextDefaultContent",""),je(o,"_l10nPromise"),je(o,"_internalPadding",0),je(o,"_defaultColor",null),je(o,"_defaultFontSize",10),je(o,"_keyboardManager",new r.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],u.prototype.commitOrRemove]])),je(o,"_type","freetext"),t.FreeTextEditor=o},(e,t,n)=>{var l,_,P,w,E,p,a,h,d,R,x,f,c,u,y,It,M,Lt,F,Nt,re,jt,V,gt,q,Bt,ie,Ut,be,Ht,T,Ge,I,mt,H,nt,K,it,g,Ve,k,bt,N,rt,se,Et,te,$t,ne,zt,pe,Wt,fe,vt,ye,st,Ce,Qe,Oe,At;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return s.fitCurve}});var i=n(1),r=n(6),s=n(25),o=n(7);const m=16,Me=class extends r.AnnotationEditor{constructor(ae){super({...ae,name:"inkEditor"});ce(this,y);ce(this,M);ce(this,F);ce(this,re);ce(this,V);ce(this,q);ce(this,ie);ce(this,be);ce(this,T);ce(this,I);ce(this,H);ce(this,K);ce(this,g);ce(this,k);ce(this,N);ce(this,te);ce(this,ne);ce(this,pe);ce(this,fe);ce(this,ye);ce(this,Ce);ce(this,Oe);ce(this,l,0);ce(this,_,0);ce(this,P,0);ce(this,w,this.canvasPointermove.bind(this));ce(this,E,this.canvasPointerleave.bind(this));ce(this,p,this.canvasPointerup.bind(this));ce(this,a,this.canvasPointerdown.bind(this));ce(this,h,!1);ce(this,d,!1);ce(this,R,null);ce(this,x,null);ce(this,f,0);ce(this,c,0);ce(this,u,null);this.color=ae.color||null,this.thickness=ae.thickness||null,this.opacity=ae.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(ae){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(_e=>[_e,ae.get(_e)]))}static updateDefaultParams(ae,_e){switch(ae){case i.AnnotationEditorParamsType.INK_THICKNESS:Me._defaultThickness=_e;break;case i.AnnotationEditorParamsType.INK_COLOR:Me._defaultColor=_e;break;case i.AnnotationEditorParamsType.INK_OPACITY:Me._defaultOpacity=_e/100;break}}updateParams(ae,_e){switch(ae){case i.AnnotationEditorParamsType.INK_THICKNESS:ue(this,y,It).call(this,_e);break;case i.AnnotationEditorParamsType.INK_COLOR:ue(this,M,Lt).call(this,_e);break;case i.AnnotationEditorParamsType.INK_OPACITY:ue(this,F,Nt).call(this,_e);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,Me._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,Me._defaultColor||r.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(Me._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Me._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||Me._defaultColor||r.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Me._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ue(this,H,nt).call(this),ue(this,K,it).call(this)),this.isAttachedToDOM||(this.parent.add(this),ue(this,g,Ve).call(this)),ue(this,Ce,Qe).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,L(this,x).disconnect(),me(this,x,null),super.remove())}enableEditMode(){L(this,h)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",L(this,a)),this.canvas.addEventListener("pointerup",L(this,p)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",L(this,a)),this.canvas.removeEventListener("pointerup",L(this,p)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){L(this,h)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),me(this,h,!0),this.div.classList.add("disabled"),ue(this,Ce,Qe).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(ae){super.focusin(ae),this.enableEditMode()}canvasPointerdown(ae){ae.button!==0||!this.isInEditMode()||L(this,h)||(this.setInForeground(),ae.type!=="mouse"&&this.div.focus(),ae.stopPropagation(),this.canvas.addEventListener("pointerleave",L(this,E)),this.canvas.addEventListener("pointermove",L(this,w)),ue(this,q,Bt).call(this,ae.offsetX,ae.offsetY))}canvasPointermove(ae){ae.stopPropagation(),ue(this,ie,Ut).call(this,ae.offsetX,ae.offsetY)}canvasPointerup(ae){ae.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(ae.stopPropagation(),ue(this,I,mt).call(this,ae),this.setInBackground())}canvasPointerleave(ae){ue(this,I,mt).call(this,ae),this.setInBackground()}render(){if(this.div)return this.div;let ae,_e;this.width&&(ae=this.x,_e=this.y),super.render(),Me._l10nPromise.get("editor_ink_aria_label").then(Ee=>{var Ae;return(Ae=this.div)==null?void 0:Ae.setAttribute("aria-label",Ee)});const[ee,G,Z,ge]=ue(this,re,jt).call(this);if(this.setAt(ee,G,0,0),this.setDims(Z,ge),ue(this,H,nt).call(this),this.width){const[Ee,Ae]=this.parent.viewportBaseDimensions;this.setAt(ae*Ee,_e*Ae,this.width*Ee,this.height*Ae),me(this,d,!0),ue(this,g,Ve).call(this),this.setDims(this.width*Ee,this.height*Ae),ue(this,T,Ge).call(this),ue(this,Oe,At).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ue(this,K,it).call(this),this.div}setDimensions(ae,_e){const ee=Math.round(ae),G=Math.round(_e);if(L(this,f)===ee&&L(this,c)===G)return;me(this,f,ee),me(this,c,G),this.canvas.style.visibility="hidden",L(this,l)&&Math.abs(L(this,l)-ae/_e)>.01&&(_e=Math.ceil(ae/L(this,l)),this.setDims(ae,_e));const[Z,ge]=this.parent.viewportBaseDimensions;this.width=ae/Z,this.height=_e/ge,L(this,h)&&ue(this,k,bt).call(this,ae,_e),ue(this,g,Ve).call(this),ue(this,T,Ge).call(this),this.canvas.style.visibility="visible"}static deserialize(ae,_e){var Ie,ke;const ee=super.deserialize(ae,_e);ee.thickness=ae.thickness,ee.color=i.Util.makeHexColor(...ae.color),ee.opacity=ae.opacity;const[G,Z]=_e.pageDimensions,ge=ee.width*G,Ee=ee.height*Z,Ae=_e.scaleFactor,Se=ae.thickness/2;me(ee,l,ge/Ee),me(ee,h,!0),me(ee,f,Math.round(ge)),me(ee,c,Math.round(Ee));for(const{bezier:Re}of ae.paths){const Ne=[];ee.paths.push(Ne);let Le=Ae*(Re[0]-Se),Be=Ae*(Ee-Re[1]-Se);for(let we=2,He=Re.length;we<He;we+=6){const Ze=Ae*(Re[we]-Se),Ye=Ae*(Ee-Re[we+1]-Se),qe=Ae*(Re[we+2]-Se),Ue=Ae*(Ee-Re[we+3]-Se),We=Ae*(Re[we+4]-Se),Ke=Ae*(Ee-Re[we+5]-Se);Ne.push([[Le,Be],[Ze,Ye],[qe,Ue],[We,Ke]]),Le=We,Be=Ke}const xe=ue(this,se,Et).call(this,Ne);ee.bezierPath2D.push(xe)}const Pe=ue(Ie=ee,fe,vt).call(Ie);return me(ee,P,Math.max(m,Pe[2]-Pe[0])),me(ee,_,Math.max(m,Pe[3]-Pe[1])),ue(ke=ee,k,bt).call(ke,ge,Ee),ee}serialize(){if(this.isEmpty())return null;const ae=this.getRect(0,0),_e=this.rotation%180===0?ae[3]-ae[1]:ae[2]-ae[0],ee=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:ee,thickness:this.thickness,opacity:this.opacity,paths:ue(this,te,$t).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,_e),pageIndex:this.parent.pageIndex,rect:ae,rotation:this.rotation}}};let A=Me;l=new WeakMap,_=new WeakMap,P=new WeakMap,w=new WeakMap,E=new WeakMap,p=new WeakMap,a=new WeakMap,h=new WeakMap,d=new WeakMap,R=new WeakMap,x=new WeakMap,f=new WeakMap,c=new WeakMap,u=new WeakMap,y=new WeakSet,It=function(ae){const _e=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=ae,ue(this,Ce,Qe).call(this)},undo:()=>{this.thickness=_e,ue(this,Ce,Qe).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},M=new WeakSet,Lt=function(ae){const _e=this.color;this.parent.addCommands({cmd:()=>{this.color=ae,ue(this,T,Ge).call(this)},undo:()=>{this.color=_e,ue(this,T,Ge).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},F=new WeakSet,Nt=function(ae){ae/=100;const _e=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=ae,ue(this,T,Ge).call(this)},undo:()=>{this.opacity=_e,ue(this,T,Ge).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},re=new WeakSet,jt=function(){const{width:ae,height:_e,rotation:ee}=this.parent.viewport;switch(ee){case 90:return[0,ae,ae,_e];case 180:return[ae,_e,ae,_e];case 270:return[_e,0,ae,_e];default:return[0,0,ae,_e]}},V=new WeakSet,gt=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,o.opacityToHex)(this.opacity)}`},q=new WeakSet,Bt=function(ae,_e){this.isEditing=!0,L(this,d)||(me(this,d,!0),ue(this,g,Ve).call(this),this.thickness||(this.thickness=Me._defaultThickness),this.color||(this.color=Me._defaultColor||r.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Me._defaultOpacity)),this.currentPath.push([ae,_e]),me(this,R,null),ue(this,V,gt).call(this),this.ctx.beginPath(),this.ctx.moveTo(ae,_e),me(this,u,()=>{L(this,u)&&(L(this,R)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ue(this,T,Ge).call(this),this.ctx.lineTo(...L(this,R)),me(this,R,null),this.ctx.stroke()),window.requestAnimationFrame(L(this,u)))}),window.requestAnimationFrame(L(this,u))},ie=new WeakSet,Ut=function(ae,_e){const[ee,G]=this.currentPath.at(-1);ae===ee&&_e===G||(this.currentPath.push([ae,_e]),me(this,R,[ae,_e]))},be=new WeakSet,Ht=function(ae,_e){var Se;this.ctx.closePath(),me(this,u,null),ae=Math.min(Math.max(ae,0),this.canvas.width),_e=Math.min(Math.max(_e,0),this.canvas.height);const[ee,G]=this.currentPath.at(-1);(ae!==ee||_e!==G)&&this.currentPath.push([ae,_e]);let Z;if(this.currentPath.length!==1)Z=(0,s.fitCurve)(this.currentPath,30,null);else{const Pe=[ae,_e];Z=[[Pe,Pe.slice(),Pe.slice(),Pe]]}const ge=ue(Se=Me,se,Et).call(Se,Z);this.currentPath.length=0;const Ee=()=>{this.paths.push(Z),this.bezierPath2D.push(ge),this.rebuild()},Ae=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ue(this,H,nt).call(this),ue(this,K,it).call(this)),ue(this,Ce,Qe).call(this))};this.parent.addCommands({cmd:Ee,undo:Ae,mustExec:!0})},T=new WeakSet,Ge=function(){if(this.isEmpty()){ue(this,N,rt).call(this);return}ue(this,V,gt).call(this);const{canvas:ae,ctx:_e}=this;_e.setTransform(1,0,0,1,0,0),_e.clearRect(0,0,ae.width,ae.height),ue(this,N,rt).call(this);for(const ee of this.bezierPath2D)_e.stroke(ee)},I=new WeakSet,mt=function(ae){ue(this,be,Ht).call(this,ae.offsetX,ae.offsetY),this.canvas.removeEventListener("pointerleave",L(this,E)),this.canvas.removeEventListener("pointermove",L(this,w)),this.parent.addToAnnotationStorage(this)},H=new WeakSet,nt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Me._l10nPromise.get("editor_ink_canvas_aria_label").then(ae=>{var _e;return(_e=this.canvas)==null?void 0:_e.setAttribute("aria-label",ae)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},K=new WeakSet,it=function(){me(this,x,new ResizeObserver(ae=>{const _e=ae[0].contentRect;_e.width&&_e.height&&this.setDimensions(_e.width,_e.height)})),L(this,x).observe(this.div)},g=new WeakSet,Ve=function(){if(!L(this,d))return;const[ae,_e]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*ae),this.canvas.height=Math.ceil(this.height*_e),ue(this,N,rt).call(this)},k=new WeakSet,bt=function(ae,_e){const ee=ue(this,ye,st).call(this),G=(ae-ee)/L(this,P),Z=(_e-ee)/L(this,_);this.scaleFactor=Math.min(G,Z)},N=new WeakSet,rt=function(){const ae=ue(this,ye,st).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ae,this.translationY*this.scaleFactor+ae)},se=new WeakSet,Et=function(ae){const _e=new Path2D;for(let ee=0,G=ae.length;ee<G;ee++){const[Z,ge,Ee,Ae]=ae[ee];ee===0&&_e.moveTo(...Z),_e.bezierCurveTo(ge[0],ge[1],Ee[0],Ee[1],Ae[0],Ae[1])}return _e},te=new WeakSet,$t=function(ae,_e,ee,G){const ge=[],Ee=this.thickness/2;let Ae,Se;for(const Pe of this.paths){Ae=[],Se=[];for(let Ie=0,ke=Pe.length;Ie<ke;Ie++){const[Re,Ne,Le,Be]=Pe[Ie],xe=ae*(Re[0]+_e)+Ee,we=G-ae*(Re[1]+ee)-Ee,He=ae*(Ne[0]+_e)+Ee,Ze=G-ae*(Ne[1]+ee)-Ee,Ye=ae*(Le[0]+_e)+Ee,qe=G-ae*(Le[1]+ee)-Ee,Ue=ae*(Be[0]+_e)+Ee,We=G-ae*(Be[1]+ee)-Ee;Ie===0&&(Ae.push(xe,we),Se.push(xe,we)),Ae.push(He,Ze,Ye,qe,Ue,We),ue(this,ne,zt).call(this,xe,we,He,Ze,Ye,qe,Ue,We,4,Se)}ge.push({bezier:Ae,points:Se})}return ge},ne=new WeakSet,zt=function(ae,_e,ee,G,Z,ge,Ee,Ae,Se,Pe){if(ue(this,pe,Wt).call(this,ae,_e,ee,G,Z,ge,Ee,Ae)){Pe.push(Ee,Ae);return}for(let Ie=1;Ie<Se-1;Ie++){const ke=Ie/Se,Re=1-ke;let Ne=ke*ae+Re*ee,Le=ke*_e+Re*G,Be=ke*ee+Re*Z,xe=ke*G+Re*ge;const we=ke*Z+Re*Ee,He=ke*ge+Re*Ae;Ne=ke*Ne+Re*Be,Le=ke*Le+Re*xe,Be=ke*Be+Re*we,xe=ke*xe+Re*He,Ne=ke*Ne+Re*Be,Le=ke*Le+Re*xe,Pe.push(Ne,Le)}Pe.push(Ee,Ae)},pe=new WeakSet,Wt=function(ae,_e,ee,G,Z,ge,Ee,Ae){const Pe=(3*ee-2*ae-Ee)**2,Ie=(3*G-2*_e-Ae)**2,ke=(3*Z-ae-2*Ee)**2,Re=(3*ge-_e-2*Ae)**2;return Math.max(Pe,ke)+Math.max(Ie,Re)<=10},fe=new WeakSet,vt=function(){let ae=1/0,_e=-1/0,ee=1/0,G=-1/0;for(const Z of this.paths)for(const[ge,Ee,Ae,Se]of Z){const Pe=i.Util.bezierBoundingBox(...ge,...Ee,...Ae,...Se);ae=Math.min(ae,Pe[0]),ee=Math.min(ee,Pe[1]),_e=Math.max(_e,Pe[2]),G=Math.max(G,Pe[3])}return[ae,ee,_e,G]},ye=new WeakSet,st=function(){return L(this,h)?Math.ceil(this.thickness*this.parent.scaleFactor):0},Ce=new WeakSet,Qe=function(ae=!1){if(this.isEmpty())return;if(!L(this,h)){ue(this,T,Ge).call(this);return}const _e=ue(this,fe,vt).call(this),ee=ue(this,ye,st).call(this);me(this,P,Math.max(m,_e[2]-_e[0])),me(this,_,Math.max(m,_e[3]-_e[1]));const G=Math.ceil(ee+L(this,P)*this.scaleFactor),Z=Math.ceil(ee+L(this,_)*this.scaleFactor),[ge,Ee]=this.parent.viewportBaseDimensions;this.width=G/ge,this.height=Z/Ee,me(this,l,G/Z),ue(this,Oe,At).call(this);const Ae=this.translationX,Se=this.translationY;this.translationX=-_e[0],this.translationY=-_e[1],ue(this,g,Ve).call(this),ue(this,T,Ge).call(this),me(this,f,G),me(this,c,Z),this.setDims(G,Z);const Pe=ae?ee/this.scaleFactor/2:0;this.translate(Ae-this.translationX-Pe,Se-this.translationY-Pe)},Oe=new WeakSet,At=function(){const{style:ae}=this.div;L(this,l)>=1?(ae.minHeight=`${m}px`,ae.minWidth=`${Math.round(L(this,l)*m)}px`):(ae.minWidth=`${m}px`,ae.minHeight=`${Math.round(m/L(this,l))}px`)},ce(A,se),je(A,"_defaultColor",null),je(A,"_defaultOpacity",1),je(A,"_defaultThickness",1),je(A,"_l10nPromise"),je(A,"_type","ink"),t.InkEditor=A},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const i=n(26);t.fitCurve=i},e=>{function t(p,a,h){if(!Array.isArray(p))throw new TypeError("First argument should be an array");if(p.forEach(f=>{if(!Array.isArray(f)||f.some(c=>typeof c!="number")||f.length!==p[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),p=p.filter((f,c)=>c===0||!f.every((u,y)=>u===p[c-1][y])),p.length<2)return[];const d=p.length,R=P(p[1],p[0]),x=P(p[d-2],p[d-1]);return n(p,R,x,a,h)}function n(p,a,h,d,R){var f,c,u,y,O,M,S,F,Q,re,J,V,z;if(p.length===2)return V=w.vectorLen(w.subtract(p[0],p[1]))/3,f=[p[0],w.addArrays(p[0],w.mulItems(a,V)),w.addArrays(p[1],w.mulItems(h,V)),p[1]],[f];if(c=m(p),[f,y,M]=i(p,c,c,a,h,R),y===0||y<d)return[f];if(y<d*d)for(u=c,O=y,S=M,z=0;z<20;z++){if(u=s(f,p,u),[f,y,M]=i(p,c,u,a,h,R),y<d)return[f];if(M===S){let q=y/O;if(q>.9999&&q<1.0001)break}O=y,S=M}return J=[],F=w.subtract(p[M-1],p[M+1]),F.every(q=>q===0)&&(F=w.subtract(p[M-1],p[M]),[F[0],F[1]]=[-F[1],F[0]]),Q=w.normalize(F),re=w.mulItems(Q,-1),J=J.concat(n(p.slice(0,M+1),a,Q,d,R)),J=J.concat(n(p.slice(M),re,h,d,R)),J}function i(p,a,h,d,R,x){var f,c,u;return f=r(p,h,d,R),[c,u]=A(p,f,a),x&&x({bez:f,points:p,params:a,maxErr:c,maxPoint:u}),[f,c,u]}function r(p,a,h,d){var R,x,f,c,u,y,O,M,S,F,Q,re,J,V,z,q,Y,ie=p[0],oe=p[p.length-1];for(R=[ie,null,null,oe],x=w.zeros_Xx2x2(a.length),J=0,V=a.length;J<V;J++)q=a[J],Y=1-q,f=x[J],f[0]=w.mulItems(h,3*q*(Y*Y)),f[1]=w.mulItems(d,3*Y*(q*q));for(c=[[0,0],[0,0]],u=[0,0],J=0,V=p.length;J<V;J++)q=a[J],f=x[J],c[0][0]+=w.dot(f[0],f[0]),c[0][1]+=w.dot(f[0],f[1]),c[1][0]+=w.dot(f[0],f[1]),c[1][1]+=w.dot(f[1],f[1]),z=w.subtract(p[J],E.q([ie,ie,oe,oe],q)),u[0]+=w.dot(f[0],z),u[1]+=w.dot(f[1],z);return y=c[0][0]*c[1][1]-c[1][0]*c[0][1],O=c[0][0]*u[1]-c[1][0]*u[0],M=u[0]*c[1][1]-u[1]*c[0][1],S=y===0?0:M/y,F=y===0?0:O/y,re=w.vectorLen(w.subtract(ie,oe)),Q=1e-6*re,S<Q||F<Q?(R[1]=w.addArrays(ie,w.mulItems(h,re/3)),R[2]=w.addArrays(oe,w.mulItems(d,re/3))):(R[1]=w.addArrays(ie,w.mulItems(h,S)),R[2]=w.addArrays(oe,w.mulItems(d,F))),R}function s(p,a,h){return h.map((d,R)=>o(p,a[R],d))}function o(p,a,h){var d=w.subtract(E.q(p,h),a),R=E.qprime(p,h),x=w.mulMatrix(d,R),f=w.sum(w.squareItems(R))+2*w.mulMatrix(d,E.qprimeprime(p,h));return f===0?h:h-x/f}function m(p){var a=[],h,d,R;return p.forEach((x,f)=>{h=f?d+w.vectorLen(w.subtract(x,R)):0,a.push(h),d=h,R=x}),a=a.map(x=>x/d),a}function A(p,a,h){var d,R,x,f,c,u,y,O;R=0,x=Math.floor(p.length/2);const M=l(a,10);for(c=0,u=p.length;c<u;c++)y=p[c],O=_(a,h[c],M,10),f=w.subtract(E.q(a,O),y),d=f[0]*f[0]+f[1]*f[1],d>R&&(R=d,x=c);return[R,x]}var l=function(p,a){for(var h,d=[0],R=p[0],x=0,f=1;f<=a;f++)h=E.q(p,f/a),x+=w.vectorLen(w.subtract(h,R)),d.push(x),R=h;return d=d.map(c=>c/x),d};function _(p,a,h,d){if(a<0)return 0;if(a>1)return 1;for(var R,x,f,c,u,y=1;y<=d;y++)if(a<=h[y]){c=(y-1)/d,f=y/d,x=h[y-1],R=h[y],u=(a-x)/(R-x)*(f-c)+c;break}return u}function P(p,a){return w.normalize(w.subtract(p,a))}class w{static zeros_Xx2x2(a){for(var h=[];a--;)h.push([0,0]);return h}static mulItems(a,h){return a.map(d=>d*h)}static mulMatrix(a,h){return a.reduce((d,R,x)=>d+R*h[x],0)}static subtract(a,h){return a.map((d,R)=>d-h[R])}static addArrays(a,h){return a.map((d,R)=>d+h[R])}static addItems(a,h){return a.map(d=>d+h)}static sum(a){return a.reduce((h,d)=>h+d)}static dot(a,h){return w.mulMatrix(a,h)}static vectorLen(a){return Math.hypot(...a)}static divItems(a,h){return a.map(d=>d/h)}static squareItems(a){return a.map(h=>h*h)}static normalize(a){return this.divItems(a,this.vectorLen(a))}}class E{static q(a,h){var d=1-h,R=w.mulItems(a[0],d*d*d),x=w.mulItems(a[1],3*d*d*h),f=w.mulItems(a[2],3*d*h*h),c=w.mulItems(a[3],h*h*h);return w.addArrays(w.addArrays(R,x),w.addArrays(f,c))}static qprime(a,h){var d=1-h,R=w.mulItems(w.subtract(a[1],a[0]),3*d*d),x=w.mulItems(w.subtract(a[2],a[1]),6*d*h),f=w.mulItems(w.subtract(a[3],a[2]),3*h*h);return w.addArrays(w.addArrays(R,x),f)}static qprimeprime(a,h){return w.addArrays(w.mulItems(w.addArrays(w.subtract(a[2],w.mulItems(a[1],2)),a[0]),6*(1-h)),w.mulItems(w.addArrays(w.subtract(a[3],w.mulItems(a[2],2)),a[1]),6*h))}}e.exports=t,e.exports.fitCubic=n,e.exports.createTangent=P},(e,t,n)=>{var T,yt,I,xt,H,St;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var i=n(1),r=n(8),s=n(5),o=n(28),m=n(29);const A=1e3,l=9,_=new WeakSet;function P(X){return{width:X[2]-X[0],height:X[3]-X[1]}}class w{static create(g){switch(g.data.annotationType){case i.AnnotationType.LINK:return new p(g);case i.AnnotationType.TEXT:return new a(g);case i.AnnotationType.WIDGET:switch(g.data.fieldType){case"Tx":return new d(g);case"Btn":return g.data.radioButton?new x(g):g.data.checkBox?new R(g):new f(g);case"Ch":return new c(g)}return new h(g);case i.AnnotationType.POPUP:return new u(g);case i.AnnotationType.FREETEXT:return new O(g);case i.AnnotationType.LINE:return new M(g);case i.AnnotationType.SQUARE:return new S(g);case i.AnnotationType.CIRCLE:return new F(g);case i.AnnotationType.POLYLINE:return new Q(g);case i.AnnotationType.CARET:return new J(g);case i.AnnotationType.INK:return new V(g);case i.AnnotationType.POLYGON:return new re(g);case i.AnnotationType.HIGHLIGHT:return new z(g);case i.AnnotationType.UNDERLINE:return new q(g);case i.AnnotationType.SQUIGGLY:return new Y(g);case i.AnnotationType.STRIKEOUT:return new ie(g);case i.AnnotationType.STAMP:return new oe(g);case i.AnnotationType.FILEATTACHMENT:return new be(g);default:return new E(g)}}}class E{constructor(g,{isRenderable:C=!1,ignoreBorder:k=!1,createQuadrilaterals:D=!1}={}){this.isRenderable=C,this.data=g.data,this.layer=g.layer,this.page=g.page,this.viewport=g.viewport,this.linkService=g.linkService,this.downloadManager=g.downloadManager,this.imageResourcesPath=g.imageResourcesPath,this.renderForms=g.renderForms,this.svgFactory=g.svgFactory,this.annotationStorage=g.annotationStorage,this.enableScripting=g.enableScripting,this.hasJSActions=g.hasJSActions,this._fieldObjects=g.fieldObjects,this._mouseState=g.mouseState,C&&(this.container=this._createContainer(k)),D&&(this.quadrilaterals=this._createQuadrilaterals(k))}_createContainer(g=!1){const C=this.data,k=this.page,D=this.viewport,N=document.createElement("section"),{width:W,height:se}=P(C.rect),[de,te,le,ne]=D.viewBox,he=le-de,pe=ne-te;N.setAttribute("data-annotation-id",C.id);const U=i.Util.normalizeRect([C.rect[0],k.view[3]-C.rect[1]+k.view[1],C.rect[2],k.view[3]-C.rect[3]+k.view[1]]);if(!g&&C.borderStyle.width>0){N.style.borderWidth=`${C.borderStyle.width}px`;const ve=C.borderStyle.horizontalCornerRadius,ye=C.borderStyle.verticalCornerRadius;if(ve>0||ye>0){const Ce=`calc(${ve}px * var(--scale-factor)) / calc(${ye}px * var(--scale-factor))`;N.style.borderRadius=Ce}else if(this instanceof x){const Ce=`calc(${W}px * var(--scale-factor)) / calc(${se}px * var(--scale-factor))`;N.style.borderRadius=Ce}switch(C.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:N.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:N.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:N.style.borderBottomStyle="solid";break}const Te=C.borderColor||null;Te?N.style.borderColor=i.Util.makeHexColor(Te[0]|0,Te[1]|0,Te[2]|0):N.style.borderWidth=0}N.style.left=`${100*(U[0]-de)/he}%`,N.style.top=`${100*(U[1]-te)/pe}%`;const{rotation:fe}=C;return C.hasOwnCanvas||fe===0?(N.style.width=`${100*W/he}%`,N.style.height=`${100*se/pe}%`):this.setRotation(fe,N),N}setRotation(g,C=this.container){const[k,D,N,W]=this.viewport.viewBox,se=N-k,de=W-D,{width:te,height:le}=P(this.data.rect);let ne,he;g%180===0?(ne=100*te/se,he=100*le/de):(ne=100*le/se,he=100*te/de),C.style.width=`${ne}%`,C.style.height=`${he}%`,C.setAttribute("data-main-rotation",(360-g)%360)}get _commonActions(){const g=(C,k,D)=>{const N=D.detail[C];D.target.style[k]=o.ColorConverters[`${N[0]}_HTML`](N.slice(1))};return(0,i.shadow)(this,"_commonActions",{display:C=>{const k=C.detail.display%2===1;this.container.style.visibility=k?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:k,print:C.detail.display===0||C.detail.display===3})},print:C=>{this.annotationStorage.setValue(this.data.id,{print:C.detail.print})},hidden:C=>{this.container.style.visibility=C.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:C.detail.hidden})},focus:C=>{setTimeout(()=>C.target.focus({preventScroll:!1}),0)},userName:C=>{C.target.title=C.detail.userName},readonly:C=>{C.detail.readonly?C.target.setAttribute("readonly",""):C.target.removeAttribute("readonly")},required:C=>{this._setRequired(C.target,C.detail.required)},bgColor:C=>{g("bgColor","backgroundColor",C)},fillColor:C=>{g("fillColor","backgroundColor",C)},fgColor:C=>{g("fgColor","color",C)},textColor:C=>{g("textColor","color",C)},borderColor:C=>{g("borderColor","borderColor",C)},strokeColor:C=>{g("strokeColor","borderColor",C)},rotation:C=>{const k=C.detail.rotation;this.setRotation(k),this.annotationStorage.setValue(this.data.id,{rotation:k})}})}_dispatchEventFromSandbox(g,C){const k=this._commonActions;for(const D of Object.keys(C.detail)){const N=g[D]||k[D];N&&N(C)}}_setDefaultPropertiesFromJS(g){if(!this.enableScripting)return;const C=this.annotationStorage.getRawValue(this.data.id);if(!C)return;const k=this._commonActions;for(const[D,N]of Object.entries(C)){const W=k[D];if(W){const se={detail:{[D]:N},target:g};W(se),delete C[D]}}}_createQuadrilaterals(g=!1){if(!this.data.quadPoints)return null;const C=[],k=this.data.rect;for(const D of this.data.quadPoints)this.data.rect=[D[2].x,D[2].y,D[1].x,D[1].y],C.push(this._createContainer(g));return this.data.rect=k,C}_createPopup(g,C){let k=this.container;this.quadrilaterals&&(g=g||this.quadrilaterals,k=this.quadrilaterals[0]),g||(g=document.createElement("div"),g.className="popupTriggerArea",k.append(g));const N=new y({container:k,trigger:g,color:C.color,titleObj:C.titleObj,modificationDate:C.modificationDate,contentsObj:C.contentsObj,richText:C.richText,hideWrapper:!0}).render();N.style.left="100%",k.append(N)}_renderQuadrilaterals(g){for(const C of this.quadrilaterals)C.className=g;return this.quadrilaterals}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(g,C=null){const k=[];if(this._fieldObjects){const D=this._fieldObjects[g];if(D)for(const{page:N,id:W,exportValues:se}of D){if(N===-1||W===C)continue;const de=typeof se=="string"?se:null,te=document.querySelector(`[data-element-id="${W}"]`);if(te&&!_.has(te)){(0,i.warn)(`_getElementsByName - element not allowed: ${W}`);continue}k.push({id:W,exportValue:de,domElement:te})}return k}for(const D of document.getElementsByName(g)){const{id:N,exportValue:W}=D;N!==C&&_.has(D)&&k.push({id:N,exportValue:W,domElement:D})}return k}static get platform(){const g=typeof navigator<"u"?navigator.platform:"";return(0,i.shadow)(this,"platform",{isWin:g.includes("Win"),isMac:g.includes("Mac")})}}class p extends E{constructor(g,C=null){super(g,{isRenderable:!0,ignoreBorder:!!(C!=null&&C.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=g.data.isTooltipOnly}render(){const{data:g,linkService:C}=this,k=document.createElement("a");k.setAttribute("data-element-id",g.id);let D=!1;return g.url?(C.addLinkAttributes(k,g.url,g.newWindow),D=!0):g.action?(this._bindNamedAction(k,g.action),D=!0):g.dest?(this._bindLink(k,g.dest),D=!0):(g.actions&&(g.actions.Action||g.actions["Mouse Up"]||g.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(k,g),D=!0),g.resetForm?(this._bindResetFormAction(k,g.resetForm),D=!0):this.isTooltipOnly&&!D&&(this._bindLink(k,""),D=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((N,W)=>{const se=W===0?k:k.cloneNode();return N.append(se),N}):(this.container.className="linkAnnotation",D&&this.container.append(k),this.container)}_bindLink(g,C){g.href=this.linkService.getDestinationHash(C),g.onclick=()=>(C&&this.linkService.goToDestination(C),!1),(C||C==="")&&(g.className="internalLink")}_bindNamedAction(g,C){g.href=this.linkService.getAnchorUrl(""),g.onclick=()=>(this.linkService.executeNamedAction(C),!1),g.className="internalLink"}_bindJSAction(g,C){g.href=this.linkService.getAnchorUrl("");const k=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const D of Object.keys(C.actions)){const N=k.get(D);N&&(g[N]=()=>{var W;return(W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C.id,name:D}}),!1})}g.onclick||(g.onclick=()=>!1),g.className="internalLink"}_bindResetFormAction(g,C){const k=g.onclick;if(k||(g.href=this.linkService.getAnchorUrl("")),g.className="internalLink",!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),k||(g.onclick=()=>!1);return}g.onclick=()=>{var le;k&&k();const{fields:D,refs:N,include:W}=C,se=[];if(D.length!==0||N.length!==0){const ne=new Set(N);for(const he of D){const pe=this._fieldObjects[he]||[];for(const{id:U}of pe)ne.add(U)}for(const he of Object.values(this._fieldObjects))for(const pe of he)ne.has(pe.id)===W&&se.push(pe)}else for(const ne of Object.values(this._fieldObjects))se.push(...ne);const de=this.annotationStorage,te=[];for(const ne of se){const{id:he}=ne;switch(te.push(he),ne.type){case"text":{const U=ne.defaultValue||"";de.setValue(he,{value:U});break}case"checkbox":case"radiobutton":{const U=ne.defaultValue===ne.exportValues;de.setValue(he,{value:U});break}case"combobox":case"listbox":{const U=ne.defaultValue||"";de.setValue(he,{value:U});break}default:continue}const pe=document.querySelector(`[data-element-id="${he}"]`);if(pe){if(!_.has(pe)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${he}`);continue}}else continue;pe.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((le=this.linkService.eventBus)==null||le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:te,name:"ResetForm"}})),!1}}}class a extends E{constructor(g){var k,D,N;const C=!!(g.data.hasPopup||(k=g.data.titleObj)!=null&&k.str||(D=g.data.contentsObj)!=null&&D.str||(N=g.data.richText)!=null&&N.str);super(g,{isRenderable:C})}render(){this.container.className="textAnnotation";const g=document.createElement("img");return g.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",g.alt="[{{type}} Annotation]",g.dataset.l10nId="text_annotation_type",g.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(g,this.data),this.container.append(g),this.container}}class h extends E{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(g){const{isWin:C,isMac:k}=E.platform;return C&&g.ctrlKey||k&&g.metaKey}_setEventListener(g,C,k,D){C.includes("mouse")?g.addEventListener(C,N=>{var W;(W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:k,value:D(N),shift:N.shiftKey,modifier:this._getKeyModifier(N)}})}):g.addEventListener(C,N=>{var W;(W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:k,value:D(N)}})})}_setEventListeners(g,C,k){var D;for(const[N,W]of C)(W==="Action"||(D=this.data.actions)!=null&&D[W])&&this._setEventListener(g,N,W,k)}_setBackgroundColor(g){const C=this.data.backgroundColor||null;g.style.backgroundColor=C===null?"transparent":i.Util.makeHexColor(C[0],C[1],C[2])}_setTextStyle(g){const C=["left","center","right"],{fontColor:k}=this.data.defaultAppearanceData,D=this.data.defaultAppearanceData.fontSize||l,N=g.style;let W;if(this.data.multiLine){const se=Math.abs(this.data.rect[3]-this.data.rect[1]),de=Math.round(se/(i.LINE_FACTOR*D))||1,te=se/de;W=Math.min(D,Math.round(te/i.LINE_FACTOR))}else{const se=Math.abs(this.data.rect[3]-this.data.rect[1]);W=Math.min(D,Math.round(se/i.LINE_FACTOR))}N.fontSize=`calc(${W}px * var(--scale-factor))`,N.color=i.Util.makeHexColor(k[0],k[1],k[2]),this.data.textAlignment!==null&&(N.textAlign=C[this.data.textAlignment])}_setRequired(g,C){C?g.setAttribute("required",!0):g.removeAttribute("required"),g.setAttribute("aria-required",C)}}class d extends h{constructor(g){const C=g.renderForms||!g.data.hasAppearance&&!!g.data.fieldValue;super(g,{isRenderable:C})}setPropertyOnSiblings(g,C,k,D){const N=this.annotationStorage;for(const W of this._getElementsByName(g.name,g.id))W.domElement&&(W.domElement[C]=k),N.setValue(W.id,{[D]:k})}render(){var D;const g=this.annotationStorage,C=this.data.id;this.container.className="textWidgetAnnotation";let k=null;if(this.renderForms){const N=g.getValue(C,{value:this.data.fieldValue});let W=N.formattedValue||N.value||"";const se=g.getValue(C,{charLimit:this.data.maxLen}).charLimit;se&&W.length>se&&(W=W.slice(0,se));const de={userValue:W,formattedValue:null,valueOnFocus:""};this.data.multiLine?(k=document.createElement("textarea"),k.textContent=W,this.data.doNotScroll&&(k.style.overflowY="hidden")):(k=document.createElement("input"),k.type="text",k.setAttribute("value",W),this.data.doNotScroll&&(k.style.overflowX="hidden")),_.add(k),k.setAttribute("data-element-id",C),k.disabled=this.data.readOnly,k.name=this.data.fieldName,k.tabIndex=A,this._setRequired(k,this.data.required),se&&(k.maxLength=se),k.addEventListener("input",le=>{g.setValue(C,{value:le.target.value}),this.setPropertyOnSiblings(k,"value",le.target.value,"value")}),k.addEventListener("resetform",le=>{const ne=this.data.defaultFieldValue??"";k.value=de.userValue=ne,de.formattedValue=null});let te=le=>{const{formattedValue:ne}=de;ne!=null&&(le.target.value=ne),le.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){k.addEventListener("focus",ne=>{de.userValue&&(ne.target.value=de.userValue),de.valueOnFocus=ne.target.value}),k.addEventListener("updatefromsandbox",ne=>{const he={value(pe){de.userValue=pe.detail.value??"",g.setValue(C,{value:de.userValue.toString()}),pe.target.value=de.userValue},formattedValue(pe){const{formattedValue:U}=pe.detail;de.formattedValue=U,U!=null&&pe.target!==document.activeElement&&(pe.target.value=U),g.setValue(C,{formattedValue:U})},selRange(pe){pe.target.setSelectionRange(...pe.detail.selRange)},charLimit:pe=>{var ye;const{charLimit:U}=pe.detail,{target:fe}=pe;if(U===0){fe.removeAttribute("maxLength");return}fe.setAttribute("maxLength",U);let ve=de.userValue;!ve||ve.length<=U||(ve=ve.slice(0,U),fe.value=de.userValue=ve,g.setValue(C,{value:ve}),(ye=this.linkService.eventBus)==null||ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:ve,willCommit:!0,commitKey:1,selStart:fe.selectionStart,selEnd:fe.selectionEnd}}))}};this._dispatchEventFromSandbox(he,ne)}),k.addEventListener("keydown",ne=>{var U;let he=-1;if(ne.key==="Escape"?he=0:ne.key==="Enter"?he=2:ne.key==="Tab"&&(he=3),he===-1)return;const{value:pe}=ne.target;de.valueOnFocus!==pe&&(de.userValue=pe,(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:pe,willCommit:!0,commitKey:he,selStart:ne.target.selectionStart,selEnd:ne.target.selectionEnd}}))});const le=te;te=null,k.addEventListener("blur",ne=>{var pe;const{value:he}=ne.target;de.userValue=he,this._mouseState.isDown&&de.valueOnFocus!==he&&((pe=this.linkService.eventBus)==null||pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:he,willCommit:!0,commitKey:1,selStart:ne.target.selectionStart,selEnd:ne.target.selectionEnd}})),le(ne)}),(D=this.data.actions)!=null&&D.Keystroke&&k.addEventListener("beforeinput",ne=>{var Ce;const{data:he,target:pe}=ne,{value:U,selectionStart:fe,selectionEnd:ve}=pe;let ye=fe,Te=ve;switch(ne.inputType){case"deleteWordBackward":{const De=U.substring(0,fe).match(/\w*[^\w]*$/);De&&(ye-=De[0].length);break}case"deleteWordForward":{const De=U.substring(fe).match(/^[^\w]*\w*/);De&&(Te+=De[0].length);break}case"deleteContentBackward":fe===ve&&(ye-=1);break;case"deleteContentForward":fe===ve&&(Te+=1);break}ne.preventDefault(),(Ce=this.linkService.eventBus)==null||Ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:U,change:he||"",willCommit:!1,selStart:ye,selEnd:Te}})}),this._setEventListeners(k,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ne=>ne.target.value)}if(te&&k.addEventListener("blur",te),this.data.comb){const ne=(this.data.rect[2]-this.data.rect[0])/se;k.classList.add("comb"),k.style.letterSpacing=`calc(${ne}px * var(--scale-factor) - 1ch)`}}else k=document.createElement("div"),k.textContent=this.data.fieldValue,k.style.verticalAlign="middle",k.style.display="table-cell";return this._setTextStyle(k),this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}class R extends h{constructor(g){super(g,{isRenderable:g.renderForms})}render(){const g=this.annotationStorage,C=this.data,k=C.id;let D=g.getValue(k,{value:C.exportValue===C.fieldValue}).value;typeof D=="string"&&(D=D!=="Off",g.setValue(k,{value:D})),this.container.className="buttonWidgetAnnotation checkBox";const N=document.createElement("input");return _.add(N),N.setAttribute("data-element-id",k),N.disabled=C.readOnly,this._setRequired(N,this.data.required),N.type="checkbox",N.name=C.fieldName,D&&N.setAttribute("checked",!0),N.setAttribute("exportValue",C.exportValue),N.tabIndex=A,N.addEventListener("change",W=>{const{name:se,checked:de}=W.target;for(const te of this._getElementsByName(se,k)){const le=de&&te.exportValue===C.exportValue;te.domElement&&(te.domElement.checked=le),g.setValue(te.id,{value:le})}g.setValue(k,{value:de})}),N.addEventListener("resetform",W=>{const se=C.defaultFieldValue||"Off";W.target.checked=se===C.exportValue}),this.enableScripting&&this.hasJSActions&&(N.addEventListener("updatefromsandbox",W=>{const se={value(de){de.target.checked=de.detail.value!=="Off",g.setValue(k,{value:de.target.checked})}};this._dispatchEventFromSandbox(se,W)}),this._setEventListeners(N,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],W=>W.target.checked)),this._setBackgroundColor(N),this._setDefaultPropertiesFromJS(N),this.container.append(N),this.container}}class x extends h{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const g=this.annotationStorage,C=this.data,k=C.id;let D=g.getValue(k,{value:C.fieldValue===C.buttonValue}).value;typeof D=="string"&&(D=D!==C.buttonValue,g.setValue(k,{value:D}));const N=document.createElement("input");if(_.add(N),N.setAttribute("data-element-id",k),N.disabled=C.readOnly,this._setRequired(N,this.data.required),N.type="radio",N.name=C.fieldName,D&&N.setAttribute("checked",!0),N.tabIndex=A,N.addEventListener("change",W=>{const{name:se,checked:de}=W.target;for(const te of this._getElementsByName(se,k))g.setValue(te.id,{value:!1});g.setValue(k,{value:de})}),N.addEventListener("resetform",W=>{const se=C.defaultFieldValue;W.target.checked=se!=null&&se===C.buttonValue}),this.enableScripting&&this.hasJSActions){const W=C.buttonValue;N.addEventListener("updatefromsandbox",se=>{const de={value:te=>{const le=W===te.detail.value;for(const ne of this._getElementsByName(te.target.name)){const he=le&&ne.id===k;ne.domElement&&(ne.domElement.checked=he),g.setValue(ne.id,{value:he})}}};this._dispatchEventFromSandbox(de,se)}),this._setEventListeners(N,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],se=>se.target.checked)}return this._setBackgroundColor(N),this._setDefaultPropertiesFromJS(N),this.container.append(N),this.container}}class f extends p{constructor(g){super(g,{ignoreBorder:g.data.hasAppearance})}render(){const g=super.render();g.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(g.title=this.data.alternativeText);const C=g.lastChild;return this.enableScripting&&this.hasJSActions&&C&&(this._setDefaultPropertiesFromJS(C),C.addEventListener("updatefromsandbox",k=>{this._dispatchEventFromSandbox({},k)})),g}}class c extends h{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const g=this.annotationStorage,C=this.data.id,k=g.getValue(C,{value:this.data.fieldValue}),D=document.createElement("select");_.add(D),D.setAttribute("data-element-id",C),D.disabled=this.data.readOnly,this._setRequired(D,this.data.required),D.name=this.data.fieldName,D.tabIndex=A;let N=this.data.combo&&this.data.options.length>0;this.data.combo||(D.size=this.data.options.length,this.data.multiSelect&&(D.multiple=!0)),D.addEventListener("resetform",te=>{const le=this.data.defaultFieldValue;for(const ne of D.options)ne.selected=ne.value===le});for(const te of this.data.options){const le=document.createElement("option");le.textContent=te.displayValue,le.value=te.exportValue,k.value.includes(te.exportValue)&&(le.setAttribute("selected",!0),N=!1),D.append(le)}let W=null;if(N){const te=document.createElement("option");te.value=" ",te.setAttribute("hidden",!0),te.setAttribute("selected",!0),D.prepend(te),W=()=>{te.remove(),D.removeEventListener("input",W),W=null},D.addEventListener("input",W)}const se=(te,le)=>{const ne=le?"value":"textContent",he=te.target.options;return te.target.multiple?Array.prototype.filter.call(he,pe=>pe.selected).map(pe=>pe[ne]):he.selectedIndex===-1?null:he[he.selectedIndex][ne]},de=te=>{const le=te.target.options;return Array.prototype.map.call(le,ne=>({displayValue:ne.textContent,exportValue:ne.value}))};return this.enableScripting&&this.hasJSActions?(D.addEventListener("updatefromsandbox",te=>{const le={value(ne){W==null||W();const he=ne.detail.value,pe=new Set(Array.isArray(he)?he:[he]);for(const U of D.options)U.selected=pe.has(U.value);g.setValue(C,{value:se(ne,!0)})},multipleSelection(ne){D.multiple=!0},remove(ne){const he=D.options,pe=ne.detail.remove;he[pe].selected=!1,D.remove(pe),he.length>0&&Array.prototype.findIndex.call(he,fe=>fe.selected)===-1&&(he[0].selected=!0),g.setValue(C,{value:se(ne,!0),items:de(ne)})},clear(ne){for(;D.length!==0;)D.remove(0);g.setValue(C,{value:null,items:[]})},insert(ne){const{index:he,displayValue:pe,exportValue:U}=ne.detail.insert,fe=D.children[he],ve=document.createElement("option");ve.textContent=pe,ve.value=U,fe?fe.before(ve):D.append(ve),g.setValue(C,{value:se(ne,!0),items:de(ne)})},items(ne){const{items:he}=ne.detail;for(;D.length!==0;)D.remove(0);for(const pe of he){const{displayValue:U,exportValue:fe}=pe,ve=document.createElement("option");ve.textContent=U,ve.value=fe,D.append(ve)}D.options.length>0&&(D.options[0].selected=!0),g.setValue(C,{value:se(ne,!0),items:de(ne)})},indices(ne){const he=new Set(ne.detail.indices);for(const pe of ne.target.options)pe.selected=he.has(pe.index);g.setValue(C,{value:se(ne,!0)})},editable(ne){ne.target.disabled=!ne.detail.editable}};this._dispatchEventFromSandbox(le,te)}),D.addEventListener("input",te=>{var he;const le=se(te,!0),ne=se(te,!1);g.setValue(C,{value:le}),(he=this.linkService.eventBus)==null||he.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:ne,changeEx:le,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(D,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],te=>te.target.checked)):D.addEventListener("input",function(te){g.setValue(C,{value:se(te,!0)})}),this.data.combo&&this._setTextStyle(D),this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.append(D),this.container}}class u extends E{constructor(g){var k,D,N;const C=!!((k=g.data.titleObj)!=null&&k.str||(D=g.data.contentsObj)!=null&&D.str||(N=g.data.richText)!=null&&N.str);super(g,{isRenderable:C})}render(){const g=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",g.includes(this.data.parentType))return this.container;const C=`[data-annotation-id="${this.data.parentId}"]`,k=this.layer.querySelectorAll(C);if(k.length===0)return this.container;const D=new y({container:this.container,trigger:Array.from(k),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),N=this.page,W=i.Util.normalizeRect([this.data.parentRect[0],N.view[3]-this.data.parentRect[1]+N.view[1],this.data.parentRect[2],N.view[3]-this.data.parentRect[3]+N.view[1]]),se=W[0]+this.data.parentRect[2]-this.data.parentRect[0],de=W[1],[te,le,ne,he]=this.viewport.viewBox,pe=ne-te,U=he-le;return this.container.style.left=`${100*(se-te)/pe}%`,this.container.style.top=`${100*(de-le)/U}%`,this.container.append(D.render()),this.container}}class y{constructor(g){this.container=g.container,this.trigger=g.trigger,this.color=g.color,this.titleObj=g.titleObj,this.modificationDate=g.modificationDate,this.contentsObj=g.contentsObj,this.richText=g.richText,this.hideWrapper=g.hideWrapper||!1,this.pinned=!1}render(){var se,de;const C=document.createElement("div");C.className="popupWrapper",this.hideElement=this.hideWrapper?C:this.container,this.hideElement.hidden=!0;const k=document.createElement("div");k.className="popup";const D=this.color;if(D){const te=.7*(255-D[0])+D[0],le=.7*(255-D[1])+D[1],ne=.7*(255-D[2])+D[2];k.style.backgroundColor=i.Util.makeHexColor(te|0,le|0,ne|0)}const N=document.createElement("h1");N.dir=this.titleObj.dir,N.textContent=this.titleObj.str,k.append(N);const W=r.PDFDateString.toDateObject(this.modificationDate);if(W){const te=document.createElement("span");te.className="popupDate",te.textContent="{{date}}, {{time}}",te.dataset.l10nId="annotation_date_string",te.dataset.l10nArgs=JSON.stringify({date:W.toLocaleDateString(),time:W.toLocaleTimeString()}),k.append(te)}if((se=this.richText)!=null&&se.str&&(!((de=this.contentsObj)!=null&&de.str)||this.contentsObj.str===this.richText.str))m.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:k}),k.lastChild.className="richText popupContent";else{const te=this._formatContents(this.contentsObj);k.append(te)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const te of this.trigger)te.addEventListener("click",this._toggle.bind(this)),te.addEventListener("mouseover",this._show.bind(this,!1)),te.addEventListener("mouseout",this._hide.bind(this,!1));return k.addEventListener("click",this._hide.bind(this,!0)),C.append(k),C}_formatContents({str:g,dir:C}){const k=document.createElement("p");k.className="popupContent",k.dir=C;const D=g.split(/(?:\r\n?|\n)/);for(let N=0,W=D.length;N<W;++N){const se=D[N];k.append(document.createTextNode(se)),N<W-1&&k.append(document.createElement("br"))}return k}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(g=!1){g&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(g=!0){g&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class O extends E{constructor(g){var k,D,N;const C=!!(g.data.hasPopup||(k=g.data.titleObj)!=null&&k.str||(D=g.data.contentsObj)!=null&&D.str||(N=g.data.richText)!=null&&N.str);super(g,{isRenderable:C,ignoreBorder:!0}),this.textContent=g.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const g=document.createElement("div");g.className="annotationTextContent",g.setAttribute("role","comment");for(const C of this.textContent){const k=document.createElement("span");k.textContent=C,g.append(k)}this.container.append(g)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class M extends E{constructor(g){var k,D,N;const C=!!(g.data.hasPopup||(k=g.data.titleObj)!=null&&k.str||(D=g.data.contentsObj)!=null&&D.str||(N=g.data.richText)!=null&&N.str);super(g,{isRenderable:C,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const g=this.data,{width:C,height:k}=P(g.rect),D=this.svgFactory.create(C,k,!0),N=this.svgFactory.createElement("svg:line");return N.setAttribute("x1",g.rect[2]-g.lineCoordinates[0]),N.setAttribute("y1",g.rect[3]-g.lineCoordinates[1]),N.setAttribute("x2",g.rect[2]-g.lineCoordinates[2]),N.setAttribute("y2",g.rect[3]-g.lineCoordinates[3]),N.setAttribute("stroke-width",g.borderStyle.width||1),N.setAttribute("stroke","transparent"),N.setAttribute("fill","transparent"),D.append(N),this.container.append(D),this._createPopup(N,g),this.container}}class S extends E{constructor(g){var k,D,N;const C=!!(g.data.hasPopup||(k=g.data.titleObj)!=null&&k.str||(D=g.data.contentsObj)!=null&&D.str||(N=g.data.richText)!=null&&N.str);super(g,{isRenderable:C,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const g=this.data,{width:C,height:k}=P(g.rect),D=this.svgFactory.create(C,k,!0),N=g.borderStyle.width,W=this.svgFactory.createElement("svg:rect");return W.setAttribute("x",N/2),W.setAttribute("y",N/2),W.setAttribute("width",C-N),W.setAttribute("height",k-N),W.setAttribute("stroke-width",N||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),D.append(W),this.container.append(D),this._createPopup(W,g),this.container}}class F extends E{constructor(g){var k,D,N;const C=!!(g.data.hasPopup||(k=g.data.titleObj)!=null&&k.str||(D=g.data.contentsObj)!=null&&D.str||(N=g.data.richText)!=null&&N.str);super(g,{isRenderable:C,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const g=this.data,{width:C,height:k}=P(g.rect),D=this.svgFactory.create(C,k,!0),N=g.borderStyle.width,W=this.svgFactory.createElement("svg:ellipse");return W.setAttribute("cx",C/2),W.setAttribute("cy",k/2),W.setAttribute("rx",C/2-N/2),W.setAttribute("ry",k/2-N/2),W.setAttribute("stroke-width",N||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),D.append(W),this.container.append(D),this._createPopup(W,g),this.container}}class Q extends E{constructor(g){var k,D,N;const C=!!(g.data.hasPopup||(k=g.data.titleObj)!=null&&k.str||(D=g.data.contentsObj)!=null&&D.str||(N=g.data.richText)!=null&&N.str);super(g,{isRenderable:C,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const g=this.data,{width:C,height:k}=P(g.rect),D=this.svgFactory.create(C,k,!0);let N=[];for(const se of g.vertices){const de=se.x-g.rect[0],te=g.rect[3]-se.y;N.push(de+","+te)}N=N.join(" ");const W=this.svgFactory.createElement(this.svgElementName);return W.setAttribute("points",N),W.setAttribute("stroke-width",g.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),D.append(W),this.container.append(D),this._createPopup(W,g),this.container}}class re extends Q{constructor(g){super(g),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class J extends E{constructor(g){var k,D,N;const C=!!(g.data.hasPopup||(k=g.data.titleObj)!=null&&k.str||(D=g.data.contentsObj)!=null&&D.str||(N=g.data.richText)!=null&&N.str);super(g,{isRenderable:C,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class V extends E{constructor(g){var k,D,N;const C=!!(g.data.hasPopup||(k=g.data.titleObj)!=null&&k.str||(D=g.data.contentsObj)!=null&&D.str||(N=g.data.richText)!=null&&N.str);super(g,{isRenderable:C,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const g=this.data,{width:C,height:k}=P(g.rect),D=this.svgFactory.create(C,k,!0);for(const N of g.inkLists){let W=[];for(const de of N){const te=de.x-g.rect[0],le=g.rect[3]-de.y;W.push(`${te},${le}`)}W=W.join(" ");const se=this.svgFactory.createElement(this.svgElementName);se.setAttribute("points",W),se.setAttribute("stroke-width",g.borderStyle.width||1),se.setAttribute("stroke","transparent"),se.setAttribute("fill","transparent"),this._createPopup(se,g),D.append(se)}return this.container.append(D),this.container}}class z extends E{constructor(g){var k,D,N;const C=!!(g.data.hasPopup||(k=g.data.titleObj)!=null&&k.str||(D=g.data.contentsObj)!=null&&D.str||(N=g.data.richText)!=null&&N.str);super(g,{isRenderable:C,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class q extends E{constructor(g){var k,D,N;const C=!!(g.data.hasPopup||(k=g.data.titleObj)!=null&&k.str||(D=g.data.contentsObj)!=null&&D.str||(N=g.data.richText)!=null&&N.str);super(g,{isRenderable:C,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Y extends E{constructor(g){var k,D,N;const C=!!(g.data.hasPopup||(k=g.data.titleObj)!=null&&k.str||(D=g.data.contentsObj)!=null&&D.str||(N=g.data.richText)!=null&&N.str);super(g,{isRenderable:C,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class ie extends E{constructor(g){var k,D,N;const C=!!(g.data.hasPopup||(k=g.data.titleObj)!=null&&k.str||(D=g.data.contentsObj)!=null&&D.str||(N=g.data.richText)!=null&&N.str);super(g,{isRenderable:C,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class oe extends E{constructor(g){var k,D,N;const C=!!(g.data.hasPopup||(k=g.data.titleObj)!=null&&k.str||(D=g.data.contentsObj)!=null&&D.str||(N=g.data.richText)!=null&&N.str);super(g,{isRenderable:C,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class be extends E{constructor(g){var D;super(g,{isRenderable:!0});const{filename:C,content:k}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(C),this.content=k,(D=this.linkService.eventBus)==null||D.dispatch("fileattachmentannotation",{source:this,filename:C,content:k})}render(){var C,k;this.container.className="fileAttachmentAnnotation";const g=document.createElement("div");return g.className="popupTriggerArea",g.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((C=this.data.titleObj)!=null&&C.str||(k=this.data.contentsObj)!=null&&k.str||this.data.richText)&&this._createPopup(g,this.data),this.container.append(g),this.container}_download(){var g;(g=this.downloadManager)==null||g.openOrDownloadData(this.container,this.content,this.filename)}}const K=class{static render(g){var se,de;const{annotations:C,div:k,viewport:D,accessibilityManager:N}=g;ue(this,I,xt).call(this,k,D);let W=0;for(const te of C){if(te.annotationType!==i.AnnotationType.POPUP){const{width:ne,height:he}=P(te.rect);if(ne<=0||he<=0)continue}const le=w.create({data:te,layer:k,page:g.page,viewport:D,linkService:g.linkService,downloadManager:g.downloadManager,imageResourcesPath:g.imageResourcesPath||"",renderForms:g.renderForms!==!1,svgFactory:new r.DOMSVGFactory,annotationStorage:g.annotationStorage||new s.AnnotationStorage,enableScripting:g.enableScripting,hasJSActions:g.hasJSActions,fieldObjects:g.fieldObjects,mouseState:g.mouseState||{isDown:!1}});if(le.isRenderable){const ne=le.render();if(te.hidden&&(ne.style.visibility="hidden"),Array.isArray(ne))for(const he of ne)he.style.zIndex=W++,ue(se=K,T,yt).call(se,he,te.id,k,N);else ne.style.zIndex=W++,le instanceof u?k.prepend(ne):ue(de=K,T,yt).call(de,ne,te.id,k,N)}}ue(this,H,St).call(this,k,g.annotationCanvasMap)}static update(g){const{annotationCanvasMap:C,div:k,viewport:D}=g;ue(this,I,xt).call(this,k,D),ue(this,H,St).call(this,k,C),k.hidden=!1}};let $=K;T=new WeakSet,yt=function(g,C,k,D){const N=g.firstChild||g;N.id=`${r.AnnotationPrefix}${C}`,k.append(g),D==null||D.moveElementInDOM(k,g,N,!1)},I=new WeakSet,xt=function(g,{width:C,height:k,rotation:D}){const{style:N}=g,W=D%180!==0,se=Math.floor(C)+"px",de=Math.floor(k)+"px";N.width=W?de:se,N.height=W?se:de,g.setAttribute("data-main-rotation",D)},H=new WeakSet,St=function(g,C){if(C){for(const[k,D]of C){const N=g.querySelector(`[data-annotation-id="${k}"]`);if(!N)continue;const{firstChild:W}=N;W?W.nodeName==="CANVAS"?W.replaceWith(D):W.before(D):N.append(D)}C.clear()}},ce($,T),ce($,I),ce($,H),t.AnnotationLayer=$},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function n(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}class i{static CMYK_G([s,o,m,A]){return["G",1-Math.min(1,.3*s+.59*m+.11*o+A)]}static G_CMYK([s]){return["CMYK",0,0,0,1-s]}static G_RGB([s]){return["RGB",s,s,s]}static G_HTML([s]){const o=n(s);return`#${o}${o}${o}`}static RGB_G([s,o,m]){return["G",.3*s+.59*o+.11*m]}static RGB_HTML([s,o,m]){const A=n(s),l=n(o),_=n(m);return`#${A}${l}${_}`}static T_HTML(){return"#00000000"}static CMYK_RGB([s,o,m,A]){return["RGB",1-Math.min(1,s+A),1-Math.min(1,m+A),1-Math.min(1,o+A)]}static CMYK_HTML(s){const o=this.CMYK_RGB(s).slice(1);return this.RGB_HTML(o)}static RGB_CMYK([s,o,m]){const A=1-s,l=1-o,_=1-m,P=Math.min(A,l,_);return["CMYK",A,l,_,P]}}t.ColorConverters=i},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var i=n(20);class r{static setupStorage(o,m,A,l,_){const P=l.getValue(m,{value:null});switch(A.name){case"textarea":if(P.value!==null&&(o.textContent=P.value),_==="print")break;o.addEventListener("input",w=>{l.setValue(m,{value:w.target.value})});break;case"input":if(A.attributes.type==="radio"||A.attributes.type==="checkbox"){if(P.value===A.attributes.xfaOn?o.setAttribute("checked",!0):P.value===A.attributes.xfaOff&&o.removeAttribute("checked"),_==="print")break;o.addEventListener("change",w=>{l.setValue(m,{value:w.target.checked?w.target.getAttribute("xfaOn"):w.target.getAttribute("xfaOff")})})}else{if(P.value!==null&&o.setAttribute("value",P.value),_==="print")break;o.addEventListener("input",w=>{l.setValue(m,{value:w.target.value})})}break;case"select":if(P.value!==null)for(const w of A.children)w.attributes.value===P.value&&(w.attributes.selected=!0);o.addEventListener("input",w=>{const E=w.target.options,p=E.selectedIndex===-1?"":E[E.selectedIndex].value;l.setValue(m,{value:p})});break}}static setAttributes({html:o,element:m,storage:A=null,intent:l,linkService:_}){const{attributes:P}=m,w=o instanceof HTMLAnchorElement;P.type==="radio"&&(P.name=`${P.name}-${l}`);for(const[E,p]of Object.entries(P))if(p!=null)switch(E){case"class":p.length&&o.setAttribute(E,p.join(" "));break;case"dataId":break;case"id":o.setAttribute("data-element-id",p);break;case"style":Object.assign(o.style,p);break;case"textContent":o.textContent=p;break;default:(!w||E!=="href"&&E!=="newWindow")&&o.setAttribute(E,p)}w&&_.addLinkAttributes(o,P.href,P.newWindow),A&&P.dataId&&this.setupStorage(o,P.dataId,m,A)}static render(o){var a;const m=o.annotationStorage,A=o.linkService,l=o.xfaHtml,_=o.intent||"display",P=document.createElement(l.name);l.attributes&&this.setAttributes({html:P,element:l,intent:_,linkService:A});const w=[[l,-1,P]],E=o.div;if(E.append(P),o.viewport){const h=`matrix(${o.viewport.transform.join(",")})`;E.style.transform=h}_!=="richText"&&E.setAttribute("class","xfaLayer xfaFont");const p=[];for(;w.length>0;){const[h,d,R]=w.at(-1);if(d+1===h.children.length){w.pop();continue}const x=h.children[++w.at(-1)[1]];if(x===null)continue;const{name:f}=x;if(f==="#text"){const u=document.createTextNode(x.value);p.push(u),R.append(u);continue}let c;if((a=x==null?void 0:x.attributes)!=null&&a.xmlns?c=document.createElementNS(x.attributes.xmlns,f):c=document.createElement(f),R.append(c),x.attributes&&this.setAttributes({html:c,element:x,storage:m,intent:_,linkService:A}),x.children&&x.children.length>0)w.push([x,-1,c]);else if(x.value){const u=document.createTextNode(x.value);i.XfaText.shouldBuildText(f)&&p.push(u),c.append(u)}}for(const h of E.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:p}}static update(o){const m=`matrix(${o.viewport.transform.join(",")})`;o.div.style.transform=m,o.div.hidden=!1}}t.XfaLayer=r},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=R;var i=n(1),r=n(8);const s=1e5,o=30,m=.8,A=new Map,l=/^\s+$/g;function _(x,f){const c=A.get(x);if(c)return c;f.save(),f.font=`${o}px ${x}`;const u=f.measureText("");let y=u.fontBoundingBoxAscent,O=Math.abs(u.fontBoundingBoxDescent);if(y){f.restore();const S=y/(y+O);return A.set(x,S),S}f.strokeStyle="red",f.clearRect(0,0,o,o),f.strokeText("g",0,0);let M=f.getImageData(0,0,o,o).data;O=0;for(let S=M.length-1-3;S>=0;S-=4)if(M[S]>0){O=Math.ceil(S/4/o);break}f.clearRect(0,0,o,o),f.strokeText("A",0,o),M=f.getImageData(0,0,o,o).data,y=0;for(let S=0,F=M.length;S<F;S+=4)if(M[S]>0){y=o-Math.floor(S/4/o);break}if(f.restore(),y){const S=y/(y+O);return A.set(x,S),S}return A.set(x,m),m}function P(x,f,c,u){const y=document.createElement("span"),O=x._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:f.str!=="",hasEOL:f.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:f.str!=="",hasEOL:f.hasEOL,fontSize:0};x._textDivs.push(y);const M=i.Util.transform(x._viewport.transform,f.transform);let S=Math.atan2(M[1],M[0]);const F=c[f.fontName];F.vertical&&(S+=Math.PI/2);const Q=Math.hypot(M[2],M[3]),re=Q*_(F.fontFamily,u);let J,V;S===0?(J=M[4],V=M[5]-re):(J=M[4]+re*Math.sin(S),V=M[5]-re*Math.cos(S)),y.style.left=`${J}px`,y.style.top=`${V}px`,y.style.fontSize=`${Q}px`,y.style.fontFamily=F.fontFamily,O.fontSize=Q,y.setAttribute("role","presentation"),y.textContent=f.str,y.dir=f.dir,x._fontInspectorEnabled&&(y.dataset.fontName=f.fontName),S!==0&&(O.angle=S*(180/Math.PI));let z=!1;if(f.str.length>1||x._enhanceTextSelection&&l.test(f.str))z=!0;else if(f.str!==" "&&f.transform[0]!==f.transform[3]){const q=Math.abs(f.transform[0]),Y=Math.abs(f.transform[3]);q!==Y&&Math.max(q,Y)/Math.min(q,Y)>1.5&&(z=!0)}if(z&&(F.vertical?O.canvasWidth=f.height*x._viewport.scale:O.canvasWidth=f.width*x._viewport.scale),x._textDivProperties.set(y,O),x._textContentStream&&x._layoutText(y),x._enhanceTextSelection&&O.hasText){let q=1,Y=0;S!==0&&(q=Math.cos(S),Y=Math.sin(S));const ie=(F.vertical?f.height:f.width)*x._viewport.scale,oe=Q;let be,$;S!==0?(be=[q,Y,-Y,q,J,V],$=i.Util.getAxialAlignedBoundingBox([0,0,ie,oe],be)):$=[J,V,J+ie,V+oe],x._bounds.push({left:$[0],top:$[1],right:$[2],bottom:$[3],div:y,size:[ie,oe],m:be})}}function w(x){if(x._canceled)return;const f=x._textDivs,c=x._capability,u=f.length;if(u>s){x._renderingDone=!0,c.resolve();return}if(!x._textContentStream)for(let y=0;y<u;y++)x._layoutText(f[y]);x._renderingDone=!0,c.resolve()}function E(x,f,c){let u=0;for(let y=0;y<c;y++){const O=x[f++];O>0&&(u=u?Math.min(O,u):O)}return u}function p(x){const f=x._bounds,c=x._viewport,u=a(c.width,c.height,f);for(let y=0;y<u.length;y++){const O=f[y].div,M=x._textDivProperties.get(O);if(M.angle===0){M.paddingLeft=f[y].left-u[y].left,M.paddingTop=f[y].top-u[y].top,M.paddingRight=u[y].right-f[y].right,M.paddingBottom=u[y].bottom-f[y].bottom,x._textDivProperties.set(O,M);continue}const S=u[y],F=f[y],Q=F.m,re=Q[0],J=Q[1],V=[[0,0],[0,F.size[1]],[F.size[0],0],F.size],z=new Float64Array(64);for(let Y=0,ie=V.length;Y<ie;Y++){const oe=i.Util.applyTransform(V[Y],Q);z[Y+0]=re&&(S.left-oe[0])/re,z[Y+4]=J&&(S.top-oe[1])/J,z[Y+8]=re&&(S.right-oe[0])/re,z[Y+12]=J&&(S.bottom-oe[1])/J,z[Y+16]=J&&(S.left-oe[0])/-J,z[Y+20]=re&&(S.top-oe[1])/re,z[Y+24]=J&&(S.right-oe[0])/-J,z[Y+28]=re&&(S.bottom-oe[1])/re,z[Y+32]=re&&(S.left-oe[0])/-re,z[Y+36]=J&&(S.top-oe[1])/-J,z[Y+40]=re&&(S.right-oe[0])/-re,z[Y+44]=J&&(S.bottom-oe[1])/-J,z[Y+48]=J&&(S.left-oe[0])/J,z[Y+52]=re&&(S.top-oe[1])/-re,z[Y+56]=J&&(S.right-oe[0])/J,z[Y+60]=re&&(S.bottom-oe[1])/-re}const q=1+Math.min(Math.abs(re),Math.abs(J));M.paddingLeft=E(z,32,16)/q,M.paddingTop=E(z,48,16)/q,M.paddingRight=E(z,0,16)/q,M.paddingBottom=E(z,16,16)/q,x._textDivProperties.set(O,M)}}function a(x,f,c){const u=c.map(function(O,M){return{x1:O.left,y1:O.top,x2:O.right,y2:O.bottom,index:M,x1New:void 0,x2New:void 0}});h(x,u);const y=new Array(c.length);for(const O of u){const M=O.index;y[M]={left:O.x1New,top:0,right:O.x2New,bottom:0}}c.map(function(O,M){const S=y[M],F=u[M];F.x1=O.top,F.y1=x-S.right,F.x2=O.bottom,F.y2=x-S.left,F.index=M,F.x1New=void 0,F.x2New=void 0}),h(f,u);for(const O of u){const M=O.index;y[M].top=O.x1New,y[M].bottom=O.x2New}return y}function h(x,f){f.sort(function(y,O){return y.x1-O.x1||y.index-O.index});const u=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const y of f){let O=0;for(;O<u.length&&u[O].end<=y.y1;)O++;let M=u.length-1;for(;M>=0&&u[M].start>=y.y2;)M--;let S,F,Q,re,J=-1/0;for(Q=O;Q<=M;Q++){S=u[Q],F=S.boundary;let q;F.x2>y.x1?q=F.index>y.index?F.x1New:y.x1:F.x2New===void 0?q=(F.x2+y.x1)/2:q=F.x2New,q>J&&(J=q)}for(y.x1New=J,Q=O;Q<=M;Q++)S=u[Q],F=S.boundary,F.x2New===void 0?F.x2>y.x1?F.index>y.index&&(F.x2New=F.x2):F.x2New=J:F.x2New>J&&(F.x2New=Math.max(J,F.x2));const V=[];let z=null;for(Q=O;Q<=M;Q++){S=u[Q],F=S.boundary;const q=F.x2>y.x2?F:y;z===q?V.at(-1).end=S.end:(V.push({start:S.start,end:S.end,boundary:q}),z=q)}for(u[O].start<y.y1&&(V[0].start=y.y1,V.unshift({start:u[O].start,end:y.y1,boundary:u[O].boundary})),y.y2<u[M].end&&(V.at(-1).end=y.y2,V.push({start:y.y2,end:u[M].end,boundary:u[M].boundary})),Q=O;Q<=M;Q++){if(S=u[Q],F=S.boundary,F.x2New!==void 0)continue;let q=!1;for(re=O-1;!q&&re>=0&&u[re].start>=F.y1;re--)q=u[re].boundary===F;for(re=M+1;!q&&re<u.length&&u[re].end<=F.y2;re++)q=u[re].boundary===F;for(re=0;!q&&re<V.length;re++)q=V[re].boundary===F;q||(F.x2New=J)}Array.prototype.splice.apply(u,[O,M-O+1,...V])}for(const y of u){const O=y.boundary;O.x2New===void 0&&(O.x2New=Math.max(x,O.x2))}}class d{constructor({textContent:f,textContentStream:c,container:u,viewport:y,textDivs:O,textContentItemsStr:M,enhanceTextSelection:S}){var F;S&&(0,r.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=f,this._textContentStream=c,this._container=u,this._document=u.ownerDocument,this._viewport=y,this._textDivs=O||[],this._textContentItemsStr=M||[],this._enhanceTextSelection=!!S,this._fontInspectorEnabled=!!((F=globalThis.FontInspector)!=null&&F.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,i.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(f,c){for(let u=0,y=f.length;u<y;u++){if(f[u].str===void 0){if(f[u].type==="beginMarkedContentProps"||f[u].type==="beginMarkedContent"){const O=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),f[u].id!==null&&this._container.setAttribute("id",`${f[u].id}`),O.append(this._container)}else f[u].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(f[u].str),P(this,f[u],c,this._layoutTextCtx)}}_layoutText(f){const c=this._textDivProperties.get(f);let u="";if(c.canvasWidth!==0&&c.hasText){const{fontFamily:y}=f.style,{fontSize:O}=c;(O!==this._layoutTextLastFontSize||y!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${O*this._devicePixelRatio}px ${y}`,this._layoutTextLastFontSize=O,this._layoutTextLastFontFamily=y);const{width:M}=this._layoutTextCtx.measureText(f.textContent);if(M>0){const S=this._devicePixelRatio*c.canvasWidth/M;this._enhanceTextSelection&&(c.scale=S),u=`scaleX(${S})`}}if(c.angle!==0&&(u=`rotate(${c.angle}deg) ${u}`),u.length>0&&(this._enhanceTextSelection&&(c.originalTransform=u),f.style.transform=u),c.hasText&&this._container.append(f),c.hasEOL){const y=document.createElement("br");y.setAttribute("role","presentation"),this._container.append(y)}}_render(f=0){const c=(0,i.createPromiseCapability)();let u=Object.create(null);const y=this._document.createElement("canvas");if(y.height=y.width=o,this._layoutTextCtx=y.getContext("2d",{alpha:!1}),this._textContent){const O=this._textContent.items,M=this._textContent.styles;this._processItems(O,M),c.resolve()}else if(this._textContentStream){const O=()=>{this._reader.read().then(({value:M,done:S})=>{if(S){c.resolve();return}Object.assign(u,M.styles),this._processItems(M.items,u),O()},c.reject)};this._reader=this._textContentStream.getReader(),O()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');c.promise.then(()=>{u=null,f?this._renderTimer=setTimeout(()=>{w(this),this._renderTimer=null},f):w(this)},this._capability.reject)}expandTextDivs(f=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(p(this),this._bounds=null);const c=[],u=[];for(let y=0,O=this._textDivs.length;y<O;y++){const M=this._textDivs[y],S=this._textDivProperties.get(M);S.hasText&&(f?(c.length=0,u.length=0,S.originalTransform&&c.push(S.originalTransform),S.paddingTop>0?(u.push(`${S.paddingTop}px`),c.push(`translateY(${-S.paddingTop}px)`)):u.push(0),S.paddingRight>0?u.push(`${S.paddingRight/S.scale}px`):u.push(0),S.paddingBottom>0?u.push(`${S.paddingBottom}px`):u.push(0),S.paddingLeft>0?(u.push(`${S.paddingLeft/S.scale}px`),c.push(`translateX(${-S.paddingLeft/S.scale}px)`)):u.push(0),M.style.padding=u.join(" "),c.length&&(M.style.transform=c.join(" "))):(M.style.padding=null,M.style.transform=S.originalTransform))}}}t.TextLayerRenderTask=d;function R(x){const f=new d({textContent:x.textContent,textContentStream:x.textContentStream,container:x.container,viewport:x.viewport,textDivs:x.textDivs,textContentItemsStr:x.textContentItemsStr,enhanceTextSelection:x.enhanceTextSelection});return f._render(x.timeout),f}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var i=n(8),r=n(1),s=n(3);let o=class{constructor(){(0,r.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=o;{let a=function(c){let u=[];const y=[];for(const O of c){if(O.fn==="save"){u.push({fnId:92,fn:"group",items:[]}),y.push(u),u=u.at(-1).items;continue}O.fn==="restore"?u=y.pop():u.push(O)}return u},h=function(c){if(Number.isInteger(c))return c.toString();const u=c.toFixed(10);let y=u.length-1;if(u[y]!=="0")return u;do y--;while(u[y]==="0");return u.substring(0,u[y]==="."?y:y+1)},d=function(c){if(c[4]===0&&c[5]===0){if(c[1]===0&&c[2]===0)return c[0]===1&&c[3]===1?"":`scale(${h(c[0])} ${h(c[3])})`;if(c[0]===c[3]&&c[1]===-c[2]){const u=Math.acos(c[0])*180/Math.PI;return`rotate(${h(u)})`}}else if(c[0]===1&&c[1]===0&&c[2]===0&&c[3]===1)return`translate(${h(c[4])} ${h(c[5])})`;return`matrix(${h(c[0])} ${h(c[1])} ${h(c[2])} ${h(c[3])} ${h(c[4])} ${h(c[5])})`};const m={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},A="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/1999/xlink",_=["butt","round","square"],P=["miter","round","bevel"],w=function(c,u="",y=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!y)return URL.createObjectURL(new Blob([c],{type:u}));const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let M=`data:${u};base64,`;for(let S=0,F=c.length;S<F;S+=3){const Q=c[S]&255,re=c[S+1]&255,J=c[S+2]&255,V=Q>>2,z=(Q&3)<<4|re>>4,q=S+1<F?(re&15)<<2|J>>6:64,Y=S+2<F?J&63:64;M+=O[V]+O[z]+O[q]+O[Y]}return M},E=function(){const c=new Uint8Array([137,80,78,71,13,10,26,10]),u=12,y=new Int32Array(256);for(let J=0;J<256;J++){let V=J;for(let z=0;z<8;z++)V&1?V=3988292384^V>>1&2147483647:V=V>>1&2147483647;y[J]=V}function O(J,V,z){let q=-1;for(let Y=V;Y<z;Y++){const ie=(q^J[Y])&255,oe=y[ie];q=q>>>8^oe}return q^-1}function M(J,V,z,q){let Y=q;const ie=V.length;z[Y]=ie>>24&255,z[Y+1]=ie>>16&255,z[Y+2]=ie>>8&255,z[Y+3]=ie&255,Y+=4,z[Y]=J.charCodeAt(0)&255,z[Y+1]=J.charCodeAt(1)&255,z[Y+2]=J.charCodeAt(2)&255,z[Y+3]=J.charCodeAt(3)&255,Y+=4,z.set(V,Y),Y+=V.length;const oe=O(z,q+4,Y);z[Y]=oe>>24&255,z[Y+1]=oe>>16&255,z[Y+2]=oe>>8&255,z[Y+3]=oe&255}function S(J,V,z){let q=1,Y=0;for(let ie=V;ie<z;++ie)q=(q+(J[ie]&255))%65521,Y=(Y+q)%65521;return Y<<16|q}function F(J){if(!s.isNodeJS)return Q(J);try{let V;parseInt(browser$1.versions.node)>=8?V=J:V=Buffer.from(J);const z=require$$2.deflateSync(V,{level:9});return z instanceof Uint8Array?z:new Uint8Array(z)}catch(V){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+V)}return Q(J)}function Q(J){let V=J.length;const z=65535,q=Math.ceil(V/z),Y=new Uint8Array(2+V+q*5+4);let ie=0;Y[ie++]=120,Y[ie++]=156;let oe=0;for(;V>z;)Y[ie++]=0,Y[ie++]=255,Y[ie++]=255,Y[ie++]=0,Y[ie++]=0,Y.set(J.subarray(oe,oe+z),ie),ie+=z,oe+=z,V-=z;Y[ie++]=1,Y[ie++]=V&255,Y[ie++]=V>>8&255,Y[ie++]=~V&65535&255,Y[ie++]=(~V&65535)>>8&255,Y.set(J.subarray(oe),ie),ie+=J.length-oe;const be=S(J,0,J.length);return Y[ie++]=be>>24&255,Y[ie++]=be>>16&255,Y[ie++]=be>>8&255,Y[ie++]=be&255,Y}function re(J,V,z,q){const Y=J.width,ie=J.height;let oe,be,$;const T=J.data;switch(V){case r.ImageKind.GRAYSCALE_1BPP:be=0,oe=1,$=Y+7>>3;break;case r.ImageKind.RGB_24BPP:be=2,oe=8,$=Y*3;break;case r.ImageKind.RGBA_32BPP:be=6,oe=8,$=Y*4;break;default:throw new Error("invalid format")}const b=new Uint8Array((1+$)*ie);let I=0,B=0;for(let C=0;C<ie;++C)b[I++]=0,b.set(T.subarray(B,B+$),I),B+=$,I+=$;if(V===r.ImageKind.GRAYSCALE_1BPP&&q){I=0;for(let C=0;C<ie;C++){I++;for(let k=0;k<$;k++)b[I++]^=255}}const H=new Uint8Array([Y>>24&255,Y>>16&255,Y>>8&255,Y&255,ie>>24&255,ie>>16&255,ie>>8&255,ie&255,oe,be,0,0,0]),j=F(b),K=c.length+u*3+H.length+j.length,X=new Uint8Array(K);let g=0;return X.set(c,g),g+=c.length,M("IHDR",H,X,g),g+=u+H.length,M("IDATA",j,X,g),g+=u+j.length,M("IEND",new Uint8Array(0),X,g),w(X,"image/png",z)}return function(V,z,q){const Y=V.kind===void 0?r.ImageKind.GRAYSCALE_1BPP:V.kind;return re(V,Y,z,q)}}();class p{constructor(){this.fontSizeScale=1,this.fontWeight=m.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=m.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(u,y){this.x=u,this.y=y}}let R=0,x=0,f=0;t.SVGGraphics=o=class{constructor(c,u,y=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new p,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=c,this.objs=u,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!y,this._operatorIdMapping=[];for(const O in r.OPS)this._operatorIdMapping[r.OPS[O]]=O}save(){this.transformStack.push(this.transformMatrix);const c=this.current;this.extraStack.push(c),this.current=c.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(c){this.save(),this.executeOpTree(c),this.restore()}loadDependencies(c){const u=c.fnArray,y=c.argsArray;for(let O=0,M=u.length;O<M;O++)if(u[O]===r.OPS.dependency)for(const S of y[O]){const F=S.startsWith("g_")?this.commonObjs:this.objs,Q=new Promise(re=>{F.get(S,re)});this.current.dependencies.push(Q)}return Promise.all(this.current.dependencies)}transform(c,u,y,O,M,S){const F=[c,u,y,O,M,S];this.transformMatrix=r.Util.transform(this.transformMatrix,F),this.tgrp=null}getSVG(c,u){this.viewport=u;const y=this._initialize(u);return this.loadDependencies(c).then(()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(c)),y))}convertOpList(c){const u=this._operatorIdMapping,y=c.argsArray,O=c.fnArray,M=[];for(let S=0,F=O.length;S<F;S++){const Q=O[S];M.push({fnId:Q,fn:u[Q],args:y[S]})}return a(M)}executeOpTree(c){for(const u of c){const y=u.fn,O=u.fnId,M=u.args;switch(O|0){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(M);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(M[0],M[1]);break;case r.OPS.setFont:this.setFont(M);break;case r.OPS.showText:this.showText(M[0]);break;case r.OPS.showSpacedText:this.showText(M[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(M[0],M[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(M[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(M[0]);break;case r.OPS.setHScale:this.setHScale(M[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(M[0],M[1],M[2],M[3],M[4],M[5]);break;case r.OPS.setTextRise:this.setTextRise(M[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(M[0]);break;case r.OPS.setLineWidth:this.setLineWidth(M[0]);break;case r.OPS.setLineJoin:this.setLineJoin(M[0]);break;case r.OPS.setLineCap:this.setLineCap(M[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(M[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(M[0],M[1],M[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(M[0],M[1],M[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(M);break;case r.OPS.setFillColorN:this.setFillColorN(M);break;case r.OPS.shadingFill:this.shadingFill(M[0]);break;case r.OPS.setDash:this.setDash(M[0],M[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(M[0]);break;case r.OPS.setFlatness:this.setFlatness(M[0]);break;case r.OPS.setGState:this.setGState(M[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(M[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(M[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(M[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(M[0],M[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(M[0],M[1],M[2],M[3],M[4],M[5]);break;case r.OPS.constructPath:this.constructPath(M[0],M[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(u.items);break;default:(0,r.warn)(`Unimplemented operator ${y}`);break}}}setWordSpacing(c){this.current.wordSpacing=c}setCharSpacing(c){this.current.charSpacing=c}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(c,u,y,O,M,S){const F=this.current;F.textMatrix=F.lineMatrix=[c,u,y,O,M,S],F.textMatrixScale=Math.hypot(c,u),F.x=F.lineX=0,F.y=F.lineY=0,F.xcoords=[],F.ycoords=[],F.tspan=this.svgFactory.createElement("svg:tspan"),F.tspan.setAttributeNS(null,"font-family",F.fontFamily),F.tspan.setAttributeNS(null,"font-size",`${h(F.fontSize)}px`),F.tspan.setAttributeNS(null,"y",h(-F.y)),F.txtElement=this.svgFactory.createElement("svg:text"),F.txtElement.append(F.tspan)}beginText(){const c=this.current;c.x=c.lineX=0,c.y=c.lineY=0,c.textMatrix=r.IDENTITY_MATRIX,c.lineMatrix=r.IDENTITY_MATRIX,c.textMatrixScale=1,c.tspan=this.svgFactory.createElement("svg:tspan"),c.txtElement=this.svgFactory.createElement("svg:text"),c.txtgrp=this.svgFactory.createElement("svg:g"),c.xcoords=[],c.ycoords=[]}moveText(c,u){const y=this.current;y.x=y.lineX+=c,y.y=y.lineY+=u,y.xcoords=[],y.ycoords=[],y.tspan=this.svgFactory.createElement("svg:tspan"),y.tspan.setAttributeNS(null,"font-family",y.fontFamily),y.tspan.setAttributeNS(null,"font-size",`${h(y.fontSize)}px`),y.tspan.setAttributeNS(null,"y",h(-y.y))}showText(c){const u=this.current,y=u.font,O=u.fontSize;if(O===0)return;const M=u.fontSizeScale,S=u.charSpacing,F=u.wordSpacing,Q=u.fontDirection,re=u.textHScale*Q,J=y.vertical,V=J?1:-1,z=y.defaultVMetrics,q=O*u.fontMatrix[0];let Y=0;for(const be of c){if(be===null){Y+=Q*F;continue}else if(typeof be=="number"){Y+=V*be*O/1e3;continue}const $=(be.isSpace?F:0)+S,T=be.fontChar;let b,I,B=be.width;if(J){let j;const K=be.vmetric||z;j=be.vmetric?K[1]:B*.5,j=-j*q;const X=K[2]*q;B=K?-K[0]:B,b=j/M,I=(Y+X)/M}else b=Y/M,I=0;(be.isInFont||y.missingFile)&&(u.xcoords.push(u.x+b),J&&u.ycoords.push(-u.y+I),u.tspan.textContent+=T);let H;J?H=B*q-$*Q:H=B*q+$*Q,Y+=H}u.tspan.setAttributeNS(null,"x",u.xcoords.map(h).join(" ")),J?u.tspan.setAttributeNS(null,"y",u.ycoords.map(h).join(" ")):u.tspan.setAttributeNS(null,"y",h(-u.y)),J?u.y-=Y:u.x+=Y*re,u.tspan.setAttributeNS(null,"font-family",u.fontFamily),u.tspan.setAttributeNS(null,"font-size",`${h(u.fontSize)}px`),u.fontStyle!==m.fontStyle&&u.tspan.setAttributeNS(null,"font-style",u.fontStyle),u.fontWeight!==m.fontWeight&&u.tspan.setAttributeNS(null,"font-weight",u.fontWeight);const ie=u.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(ie===r.TextRenderingMode.FILL||ie===r.TextRenderingMode.FILL_STROKE?(u.fillColor!==m.fillColor&&u.tspan.setAttributeNS(null,"fill",u.fillColor),u.fillAlpha<1&&u.tspan.setAttributeNS(null,"fill-opacity",u.fillAlpha)):u.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?u.tspan.setAttributeNS(null,"fill","transparent"):u.tspan.setAttributeNS(null,"fill","none"),ie===r.TextRenderingMode.STROKE||ie===r.TextRenderingMode.FILL_STROKE){const be=1/(u.textMatrixScale||1);this._setStrokeAttributes(u.tspan,be)}let oe=u.textMatrix;u.textRise!==0&&(oe=oe.slice(),oe[5]+=u.textRise),u.txtElement.setAttributeNS(null,"transform",`${d(oe)} scale(${h(re)}, -1)`),u.txtElement.setAttributeNS(A,"xml:space","preserve"),u.txtElement.append(u.tspan),u.txtgrp.append(u.txtElement),this._ensureTransformGroup().append(u.txtElement)}setLeadingMoveText(c,u){this.setLeading(-u),this.moveText(c,u)}addFontStyle(c){if(!c.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const u=w(c.data,c.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${c.loadedName}"; src: url(${u}); }
`}setFont(c){const u=this.current,y=this.commonObjs.get(c[0]);let O=c[1];u.font=y,this.embedFonts&&!y.missingFile&&!this.embeddedFonts[y.loadedName]&&(this.addFontStyle(y),this.embeddedFonts[y.loadedName]=y),u.fontMatrix=y.fontMatrix||r.FONT_IDENTITY_MATRIX;let M="normal";y.black?M="900":y.bold&&(M="bold");const S=y.italic?"italic":"normal";O<0?(O=-O,u.fontDirection=-1):u.fontDirection=1,u.fontSize=O,u.fontFamily=y.loadedName,u.fontWeight=M,u.fontStyle=S,u.tspan=this.svgFactory.createElement("svg:tspan"),u.tspan.setAttributeNS(null,"y",h(-u.y)),u.xcoords=[],u.ycoords=[]}endText(){var u;const c=this.current;c.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&((u=c.txtElement)!=null&&u.hasChildNodes())&&(c.element=c.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(c){c>0&&(this.current.lineWidth=c)}setLineCap(c){this.current.lineCap=_[c]}setLineJoin(c){this.current.lineJoin=P[c]}setMiterLimit(c){this.current.miterLimit=c}setStrokeAlpha(c){this.current.strokeAlpha=c}setStrokeRGBColor(c,u,y){this.current.strokeColor=r.Util.makeHexColor(c,u,y)}setFillAlpha(c){this.current.fillAlpha=c}setFillRGBColor(c,u,y){this.current.fillColor=r.Util.makeHexColor(c,u,y),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(c){this.current.strokeColor=this._makeColorN_Pattern(c)}setFillColorN(c){this.current.fillColor=this._makeColorN_Pattern(c)}shadingFill(c){const u=this.viewport.width,y=this.viewport.height,O=r.Util.inverseTransform(this.transformMatrix),M=r.Util.applyTransform([0,0],O),S=r.Util.applyTransform([0,y],O),F=r.Util.applyTransform([u,0],O),Q=r.Util.applyTransform([u,y],O),re=Math.min(M[0],S[0],F[0],Q[0]),J=Math.min(M[1],S[1],F[1],Q[1]),V=Math.max(M[0],S[0],F[0],Q[0]),z=Math.max(M[1],S[1],F[1],Q[1]),q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x",re),q.setAttributeNS(null,"y",J),q.setAttributeNS(null,"width",V-re),q.setAttributeNS(null,"height",z-J),q.setAttributeNS(null,"fill",this._makeShadingPattern(c)),this.current.fillAlpha<1&&q.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(q)}_makeColorN_Pattern(c){return c[0]==="TilingPattern"?this._makeTilingPattern(c):this._makeShadingPattern(c)}_makeTilingPattern(c){const u=c[1],y=c[2],O=c[3]||r.IDENTITY_MATRIX,[M,S,F,Q]=c[4],re=c[5],J=c[6],V=c[7],z=`shading${f++}`,[q,Y,ie,oe]=r.Util.normalizeRect([...r.Util.applyTransform([M,S],O),...r.Util.applyTransform([F,Q],O)]),[be,$]=r.Util.singularValueDecompose2dScale(O),T=re*be,b=J*$,I=this.svgFactory.createElement("svg:pattern");I.setAttributeNS(null,"id",z),I.setAttributeNS(null,"patternUnits","userSpaceOnUse"),I.setAttributeNS(null,"width",T),I.setAttributeNS(null,"height",b),I.setAttributeNS(null,"x",`${q}`),I.setAttributeNS(null,"y",`${Y}`);const B=this.svg,H=this.transformMatrix,j=this.current.fillColor,K=this.current.strokeColor,X=this.svgFactory.create(ie-q,oe-Y);if(this.svg=X,this.transformMatrix=O,V===2){const g=r.Util.makeHexColor(...u);this.current.fillColor=g,this.current.strokeColor=g}return this.executeOpTree(this.convertOpList(y)),this.svg=B,this.transformMatrix=H,this.current.fillColor=j,this.current.strokeColor=K,I.append(X.childNodes[0]),this.defs.append(I),`url(#${z})`}_makeShadingPattern(c){switch(typeof c=="string"&&(c=this.objs.get(c)),c[0]){case"RadialAxial":const u=`shading${f++}`,y=c[3];let O;switch(c[1]){case"axial":const M=c[4],S=c[5];O=this.svgFactory.createElement("svg:linearGradient"),O.setAttributeNS(null,"id",u),O.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),O.setAttributeNS(null,"x1",M[0]),O.setAttributeNS(null,"y1",M[1]),O.setAttributeNS(null,"x2",S[0]),O.setAttributeNS(null,"y2",S[1]);break;case"radial":const F=c[4],Q=c[5],re=c[6],J=c[7];O=this.svgFactory.createElement("svg:radialGradient"),O.setAttributeNS(null,"id",u),O.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),O.setAttributeNS(null,"cx",Q[0]),O.setAttributeNS(null,"cy",Q[1]),O.setAttributeNS(null,"r",J),O.setAttributeNS(null,"fx",F[0]),O.setAttributeNS(null,"fy",F[1]),O.setAttributeNS(null,"fr",re);break;default:throw new Error(`Unknown RadialAxial type: ${c[1]}`)}for(const M of y){const S=this.svgFactory.createElement("svg:stop");S.setAttributeNS(null,"offset",M[0]),S.setAttributeNS(null,"stop-color",M[1]),O.append(S)}return this.defs.append(O),`url(#${u})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${c[0]}`)}}setDash(c,u){this.current.dashArray=c,this.current.dashPhase=u}constructPath(c,u){const y=this.current;let O=y.x,M=y.y,S=[],F=0;for(const Q of c)switch(Q|0){case r.OPS.rectangle:O=u[F++],M=u[F++];const re=u[F++],J=u[F++],V=O+re,z=M+J;S.push("M",h(O),h(M),"L",h(V),h(M),"L",h(V),h(z),"L",h(O),h(z),"Z");break;case r.OPS.moveTo:O=u[F++],M=u[F++],S.push("M",h(O),h(M));break;case r.OPS.lineTo:O=u[F++],M=u[F++],S.push("L",h(O),h(M));break;case r.OPS.curveTo:O=u[F+4],M=u[F+5],S.push("C",h(u[F]),h(u[F+1]),h(u[F+2]),h(u[F+3]),h(O),h(M)),F+=6;break;case r.OPS.curveTo2:S.push("C",h(O),h(M),h(u[F]),h(u[F+1]),h(u[F+2]),h(u[F+3])),O=u[F+2],M=u[F+3],F+=4;break;case r.OPS.curveTo3:O=u[F+2],M=u[F+3],S.push("C",h(u[F]),h(u[F+1]),h(O),h(M),h(O),h(M)),F+=4;break;case r.OPS.closePath:S.push("Z");break}S=S.join(" "),y.path&&c.length>0&&c[0]!==r.OPS.rectangle&&c[0]!==r.OPS.moveTo?S=y.path.getAttributeNS(null,"d")+S:(y.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(y.path)),y.path.setAttributeNS(null,"d",S),y.path.setAttributeNS(null,"fill","none"),y.element=y.path,y.setCurrentPoint(O,M)}endPath(){const c=this.current;if(c.path=null,!this.pendingClip)return;if(!c.element){this.pendingClip=null;return}const u=`clippath${R++}`,y=this.svgFactory.createElement("svg:clipPath");y.setAttributeNS(null,"id",u),y.setAttributeNS(null,"transform",d(this.transformMatrix));const O=c.element.cloneNode(!0);if(this.pendingClip==="evenodd"?O.setAttributeNS(null,"clip-rule","evenodd"):O.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,y.append(O),this.defs.append(y),c.activeClipUrl){c.clipGroup=null;for(const M of this.extraStack)M.clipGroup=null;y.setAttributeNS(null,"clip-path",c.activeClipUrl)}c.activeClipUrl=`url(#${u})`,this.tgrp=null}clip(c){this.pendingClip=c}closePath(){const c=this.current;if(c.path){const u=`${c.path.getAttributeNS(null,"d")}Z`;c.path.setAttributeNS(null,"d",u)}}setLeading(c){this.current.leading=-c}setTextRise(c){this.current.textRise=c}setTextRenderingMode(c){this.current.textRenderingMode=c}setHScale(c){this.current.textHScale=c/100}setRenderingIntent(c){}setFlatness(c){}setGState(c){for(const[u,y]of c)switch(u){case"LW":this.setLineWidth(y);break;case"LC":this.setLineCap(y);break;case"LJ":this.setLineJoin(y);break;case"ML":this.setMiterLimit(y);break;case"D":this.setDash(y[0],y[1]);break;case"RI":this.setRenderingIntent(y);break;case"FL":this.setFlatness(y);break;case"Font":this.setFont(y);break;case"CA":this.setStrokeAlpha(y);break;case"ca":this.setFillAlpha(y);break;default:(0,r.warn)(`Unimplemented graphic state operator ${u}`);break}}fill(){const c=this.current;c.element&&(c.element.setAttributeNS(null,"fill",c.fillColor),c.element.setAttributeNS(null,"fill-opacity",c.fillAlpha),this.endPath())}stroke(){const c=this.current;c.element&&(this._setStrokeAttributes(c.element),c.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(c,u=1){const y=this.current;let O=y.dashArray;u!==1&&O.length>0&&(O=O.map(function(M){return u*M})),c.setAttributeNS(null,"stroke",y.strokeColor),c.setAttributeNS(null,"stroke-opacity",y.strokeAlpha),c.setAttributeNS(null,"stroke-miterlimit",h(y.miterLimit)),c.setAttributeNS(null,"stroke-linecap",y.lineCap),c.setAttributeNS(null,"stroke-linejoin",y.lineJoin),c.setAttributeNS(null,"stroke-width",h(u*y.lineWidth)+"px"),c.setAttributeNS(null,"stroke-dasharray",O.map(h).join(" ")),c.setAttributeNS(null,"stroke-dashoffset",h(u*y.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y","0"),c.setAttributeNS(null,"width","1px"),c.setAttributeNS(null,"height","1px"),c.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(c)}paintImageXObject(c){const u=c.startsWith("g_")?this.commonObjs.get(c):this.objs.get(c);if(!u){(0,r.warn)(`Dependent image with object ID ${c} is not ready yet`);return}this.paintInlineImageXObject(u)}paintInlineImageXObject(c,u){const y=c.width,O=c.height,M=E(c,this.forceDataSchema,!!u),S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x","0"),S.setAttributeNS(null,"y","0"),S.setAttributeNS(null,"width",h(y)),S.setAttributeNS(null,"height",h(O)),this.current.element=S,this.clip("nonzero");const F=this.svgFactory.createElement("svg:image");F.setAttributeNS(l,"xlink:href",M),F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y",h(-O)),F.setAttributeNS(null,"width",h(y)+"px"),F.setAttributeNS(null,"height",h(O)+"px"),F.setAttributeNS(null,"transform",`scale(${h(1/y)} ${h(-1/O)})`),u?u.append(F):this._ensureTransformGroup().append(F)}paintImageMaskXObject(c){const u=this.current,y=c.width,O=c.height,M=u.fillColor;u.maskId=`mask${x++}`;const S=this.svgFactory.createElement("svg:mask");S.setAttributeNS(null,"id",u.maskId);const F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y","0"),F.setAttributeNS(null,"width",h(y)),F.setAttributeNS(null,"height",h(O)),F.setAttributeNS(null,"fill",M),F.setAttributeNS(null,"mask",`url(#${u.maskId})`),this.defs.append(S),this._ensureTransformGroup().append(F),this.paintInlineImageXObject(c,S)}paintFormXObjectBegin(c,u){if(Array.isArray(c)&&c.length===6&&this.transform(c[0],c[1],c[2],c[3],c[4],c[5]),u){const y=u[2]-u[0],O=u[3]-u[1],M=this.svgFactory.createElement("svg:rect");M.setAttributeNS(null,"x",u[0]),M.setAttributeNS(null,"y",u[1]),M.setAttributeNS(null,"width",h(y)),M.setAttributeNS(null,"height",h(O)),this.current.element=M,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(c){const u=this.svgFactory.create(c.width,c.height),y=this.svgFactory.createElement("svg:defs");u.append(y),this.defs=y;const O=this.svgFactory.createElement("svg:g");return O.setAttributeNS(null,"transform",d(c.transform)),u.append(O),this.svg=O,u}_ensureClipGroup(){if(!this.current.clipGroup){const c=this.svgFactory.createElement("svg:g");c.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(c),this.current.clipGroup=c}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",d(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var i=n(1),r=n(33);const s=require$$0,o=require$$3,m=require$$4,A=require$$5,l=/^file:\/\/\/[a-zA-Z]:\//;function _(x){const f=A.parse(x);return f.protocol==="file:"||f.host?f:/^[a-z]:[/\\]/i.test(x)?A.parse(`file:///${x}`):(f.host||(f.protocol="file:"),f)}class P{constructor(f){this.source=f,this.url=_(f.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var f;return((f=this._fullRequestReader)==null?void 0:f._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new d(this):new a(this),this._fullRequestReader}getRangeReader(f,c){if(c<=this._progressiveDataLength)return null;const u=this.isFsUrl?new R(this,f,c):new h(this,f,c);return this._rangeRequestReaders.push(u),u}cancelAllRequests(f){this._fullRequestReader&&this._fullRequestReader.cancel(f);for(const c of this._rangeRequestReaders.slice(0))c.cancel(f)}}t.PDFNodeStream=P;class w{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null;const c=f.source;this._contentLength=c.length,this._loaded=0,this._filename=null,this._disableRange=c.disableRange||!1,this._rangeChunkSize=c.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!c.disableStream,this._isRangeSupported=!c.disableRange,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._headersCapability=(0,i.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=(0,i.createPromiseCapability)(),this.read()):(this._loaded+=f.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",c=>{this._error(c)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class E{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)();const c=f.source;this._isStreamingSupported=!c.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=(0,i.createPromiseCapability)(),this.read()):(this._loaded+=f.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",c=>{this._error(c)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function p(x,f){return{protocol:x.protocol,auth:x.auth,host:x.hostname,port:x.port,path:x.path,method:"GET",headers:f}}class a extends w{constructor(f){super(f);const c=u=>{if(u.statusCode===404){const S=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=S,this._headersCapability.reject(S);return}this._headersCapability.resolve(),this._setReadableStream(u);const y=S=>this._readableStream.headers[S.toLowerCase()],{allowRangeRequests:O,suggestedLength:M}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:y,isHttp:f.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=O,this._contentLength=M||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(y)};this._request=null,this._url.protocol==="http:"?this._request=o.request(p(this._url,f.httpHeaders),c):this._request=m.request(p(this._url,f.httpHeaders),c),this._request.on("error",u=>{this._storedError=u,this._headersCapability.reject(u)}),this._request.end()}}class h extends E{constructor(f,c,u){super(f),this._httpHeaders={};for(const O in f.httpHeaders){const M=f.httpHeaders[O];typeof M>"u"||(this._httpHeaders[O]=M)}this._httpHeaders.Range=`bytes=${c}-${u-1}`;const y=O=>{if(O.statusCode===404){const M=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=M;return}this._setReadableStream(O)};this._request=null,this._url.protocol==="http:"?this._request=o.request(p(this._url,this._httpHeaders),y):this._request=m.request(p(this._url,this._httpHeaders),y),this._request.on("error",O=>{this._storedError=O}),this._request.end()}}class d extends w{constructor(f){super(f);let c=decodeURIComponent(this._url.path);l.test(this._url.href)&&(c=c.replace(/^\//,"")),s.lstat(c,(u,y)=>{if(u){u.code==="ENOENT"&&(u=new i.MissingPDFException(`Missing PDF "${c}".`)),this._storedError=u,this._headersCapability.reject(u);return}this._contentLength=y.size,this._setReadableStream(s.createReadStream(c)),this._headersCapability.resolve()})}}class R extends E{constructor(f,c,u){super(f);let y=decodeURIComponent(this._url.path);l.test(this._url.href)&&(y=y.replace(/^\//,"")),this._setReadableStream(s.createReadStream(y,{start:c,end:u-1}))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=A,t.extractFilenameFromHeader=m,t.validateRangeRequestCapabilities=o,t.validateResponseStatus=l;var i=n(1),r=n(34),s=n(8);function o({getResponseHeader:_,isHttp:P,rangeChunkSize:w,disableRange:E}){const p={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(_("Content-Length"),10);return!Number.isInteger(a)||(p.suggestedLength=a,a<=2*w)||E||!P||_("Accept-Ranges")!=="bytes"||(_("Content-Encoding")||"identity")!=="identity"||(p.allowRangeRequests=!0),p}function m(_){const P=_("Content-Disposition");if(P){let w=(0,r.getFilenameFromContentDispositionHeader)(P);if(w.includes("%"))try{w=decodeURIComponent(w)}catch{}if((0,s.isPdfFile)(w))return w}return null}function A(_,P){return _===404||_===0&&P.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+P+'".'):new i.UnexpectedResponseException(`Unexpected server response (${_}) while retrieving PDF "${P}".`,_)}function l(_){return _===200||_===206}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=r;var i=n(1);function r(s){let o=!0,m=A("filename\\*","i").exec(s);if(m){m=m[1];let a=w(m);return a=unescape(a),a=E(a),a=p(a),_(a)}if(m=P(s),m){const a=p(m);return _(a)}if(m=A("filename","i").exec(s),m){m=m[1];let a=w(m);return a=p(a),_(a)}function A(a,h){return new RegExp("(?:^|;)\\s*"+a+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function l(a,h){if(a){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const d=new TextDecoder(a,{fatal:!0}),R=(0,i.stringToBytes)(h);h=d.decode(R),o=!1}catch{}}return h}function _(a){return o&&/[\x80-\xff]/.test(a)&&(a=l("utf-8",a),o&&(a=l("iso-8859-1",a))),a}function P(a){const h=[];let d;const R=A("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=R.exec(a))!==null;){let[,f,c,u]=d;if(f=parseInt(f,10),f in h){if(f===0)break;continue}h[f]=[c,u]}const x=[];for(let f=0;f<h.length&&f in h;++f){let[c,u]=h[f];u=w(u),c&&(u=unescape(u),f===0&&(u=E(u))),x.push(u)}return x.join("")}function w(a){if(a.startsWith('"')){const h=a.slice(1).split('\\"');for(let d=0;d<h.length;++d){const R=h[d].indexOf('"');R!==-1&&(h[d]=h[d].slice(0,R),h.length=d+1),h[d]=h[d].replace(/\\(.)/g,"$1")}a=h.join('"')}return a}function E(a){const h=a.indexOf("'");if(h===-1)return a;const d=a.slice(0,h),x=a.slice(h+1).replace(/^[^']*'/,"");return l(d,x)}function p(a){return!a.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(a)?a:a.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,d,R,x){if(R==="q"||R==="Q")return x=x.replace(/_/g," "),x=x.replace(/=([0-9a-fA-F]{2})/g,function(f,c){return String.fromCharCode(parseInt(c,16))}),l(d,x);try{x=atob(x)}catch{}return l(d,x)})}return""}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var i=n(1),r=n(33);const s=200,o=206;function m(w){const E=w.response;return typeof E!="string"?E:(0,i.stringToBytes)(E).buffer}class A{constructor(E,p={}){this.url=E,this.isHttp=/^https?:/i.test(E),this.httpHeaders=this.isHttp&&p.httpHeaders||Object.create(null),this.withCredentials=p.withCredentials||!1,this.getXhr=p.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(E,p,a){const h={begin:E,end:p};for(const d in a)h[d]=a[d];return this.request(h)}requestFull(E){return this.request(E)}request(E){const p=this.getXhr(),a=this.currXhrId++,h=this.pendingRequests[a]={xhr:p};p.open("GET",this.url),p.withCredentials=this.withCredentials;for(const d in this.httpHeaders){const R=this.httpHeaders[d];typeof R>"u"||p.setRequestHeader(d,R)}return this.isHttp&&"begin"in E&&"end"in E?(p.setRequestHeader("Range",`bytes=${E.begin}-${E.end-1}`),h.expectedStatus=o):h.expectedStatus=s,p.responseType="arraybuffer",E.onError&&(p.onerror=function(d){E.onError(p.status)}),p.onreadystatechange=this.onStateChange.bind(this,a),p.onprogress=this.onProgress.bind(this,a),h.onHeadersReceived=E.onHeadersReceived,h.onDone=E.onDone,h.onError=E.onError,h.onProgress=E.onProgress,p.send(null),a}onProgress(E,p){var h;const a=this.pendingRequests[E];a&&((h=a.onProgress)==null||h.call(a,p))}onStateChange(E,p){var f,c,u;const a=this.pendingRequests[E];if(!a)return;const h=a.xhr;if(h.readyState>=2&&a.onHeadersReceived&&(a.onHeadersReceived(),delete a.onHeadersReceived),h.readyState!==4||!(E in this.pendingRequests))return;if(delete this.pendingRequests[E],h.status===0&&this.isHttp){(f=a.onError)==null||f.call(a,h.status);return}const d=h.status||s;if(!(d===s&&a.expectedStatus===o)&&d!==a.expectedStatus){(c=a.onError)==null||c.call(a,h.status);return}const x=m(h);if(d===o){const y=h.getResponseHeader("Content-Range"),O=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);a.onDone({begin:parseInt(O[1],10),chunk:x})}else x?a.onDone({begin:0,chunk:x}):(u=a.onError)==null||u.call(a,h.status)}getRequestXhr(E){return this.pendingRequests[E].xhr}isPendingRequest(E){return E in this.pendingRequests}abortRequest(E){const p=this.pendingRequests[E].xhr;delete this.pendingRequests[E],p.abort()}}class l{constructor(E){this._source=E,this._manager=new A(E.url,{httpHeaders:E.httpHeaders,withCredentials:E.withCredentials}),this._rangeChunkSize=E.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(E){const p=this._rangeRequestReaders.indexOf(E);p>=0&&this._rangeRequestReaders.splice(p,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new _(this._manager,this._source),this._fullRequestReader}getRangeReader(E,p){const a=new P(this._manager,E,p);return a.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(a),a}cancelAllRequests(E){var p;(p=this._fullRequestReader)==null||p.cancel(E);for(const a of this._rangeRequestReaders.slice(0))a.cancel(E)}}t.PDFNetworkStream=l;class _{constructor(E,p){this._manager=E;const a={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=p.url,this._fullRequestId=E.requestFull(a),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=p.disableRange||!1,this._contentLength=p.length,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const E=this._fullRequestId,p=this._manager.getRequestXhr(E),a=R=>p.getResponseHeader(R),{allowRangeRequests:h,suggestedLength:d}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});h&&(this._isRangeSupported=!0),this._contentLength=d||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(a),this._isRangeSupported&&this._manager.abortRequest(E),this._headersReceivedCapability.resolve()}_onDone(E){if(E&&(this._requests.length>0?this._requests.shift().resolve({value:E.chunk,done:!1}):this._cachedChunks.push(E.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(E){this._storedError=(0,r.createResponseStatusError)(E,this._url),this._headersReceivedCapability.reject(this._storedError);for(const p of this._requests)p.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(E){var p;(p=this.onProgress)==null||p.call(this,{loaded:E.loaded,total:E.lengthComputable?E.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const E=(0,i.createPromiseCapability)();return this._requests.push(E),E.promise}cancel(E){this._done=!0,this._headersReceivedCapability.reject(E);for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class P{constructor(E,p,a){this._manager=E;const h={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=E.url,this._requestId=E.requestRange(p,a,h),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var E;(E=this.onClosed)==null||E.call(this,this)}_onDone(E){const p=E.chunk;this._requests.length>0?this._requests.shift().resolve({value:p,done:!1}):this._queuedChunk=p,this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(E){this._storedError=(0,r.createResponseStatusError)(E,this._url);for(const p of this._requests)p.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(E){var p;this.isStreamingSupported||(p=this.onProgress)==null||p.call(this,{loaded:E.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const p=this._queuedChunk;return this._queuedChunk=null,{value:p,done:!1}}if(this._done)return{value:void 0,done:!0};const E=(0,i.createPromiseCapability)();return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var i=n(1),r=n(33);function s(_,P,w){return{method:"GET",headers:_,signal:w.signal,mode:"cors",credentials:P?"include":"same-origin",redirect:"follow"}}function o(_){const P=new Headers;for(const w in _){const E=_[w];typeof E>"u"||P.append(w,E)}return P}class m{constructor(P){this.source=P,this.isHttp=/^https?:/i.test(P.url),this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var P;return((P=this._fullRequestReader)==null?void 0:P._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new A(this),this._fullRequestReader}getRangeReader(P,w){if(w<=this._progressiveDataLength)return null;const E=new l(this,P,w);return this._rangeRequestReaders.push(E),E}cancelAllRequests(P){this._fullRequestReader&&this._fullRequestReader.cancel(P);for(const w of this._rangeRequestReaders.slice(0))w.cancel(P)}}t.PDFFetchStream=m;class A{constructor(P){this._stream=P,this._reader=null,this._loaded=0,this._filename=null;const w=P.source;this._withCredentials=w.withCredentials||!1,this._contentLength=w.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=w.disableRange||!1,this._rangeChunkSize=w.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!w.disableStream,this._isRangeSupported=!w.disableRange,this._headers=o(this._stream.httpHeaders);const E=w.url;fetch(E,s(this._headers,this._withCredentials,this._abortController)).then(p=>{if(!(0,r.validateResponseStatus)(p.status))throw(0,r.createResponseStatusError)(p.status,E);this._reader=p.body.getReader(),this._headersCapability.resolve();const a=R=>p.headers.get(R),{allowRangeRequests:h,suggestedLength:d}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:P,done:w}=await this._reader.read();return w?{value:P,done:w}:(this._loaded+=P.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(P).buffer,done:!1})}cancel(P){this._reader&&this._reader.cancel(P),this._abortController.abort()}}class l{constructor(P,w,E){this._stream=P,this._reader=null,this._loaded=0;const p=P.source;this._withCredentials=p.withCredentials||!1,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!p.disableStream,this._abortController=new AbortController,this._headers=o(this._stream.httpHeaders),this._headers.append("Range",`bytes=${w}-${E-1}`);const a=p.url;fetch(a,s(this._headers,this._withCredentials,this._abortController)).then(h=>{if(!(0,r.validateResponseStatus)(h.status))throw(0,r.createResponseStatusError)(h.status,a);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:P,done:w}=await this._reader.read();return w?{value:P,done:w}:(this._loaded+=P.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(P).buffer,done:!1})}cancel(P){this._reader&&this._reader.cancel(P),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return r.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return s.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return o.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return m.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"LoopbackPort",{enumerable:!0,get:function(){return n.LoopbackPort}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return _.SVGGraphics}}),Object.defineProperty(e,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return t.UNSUPPORTED_FEATURES}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return P.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(e,"createPromiseCapability",{enumerable:!0,get:function(){return t.createPromiseCapability}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return l.renderTextLayer}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return n.version}});var t=__w_pdfjs_require__(1),n=__w_pdfjs_require__(4),i=__w_pdfjs_require__(8),r=__w_pdfjs_require__(22),s=__w_pdfjs_require__(7),o=__w_pdfjs_require__(27),m=__w_pdfjs_require__(15),A=__w_pdfjs_require__(3),l=__w_pdfjs_require__(30),_=__w_pdfjs_require__(31),P=__w_pdfjs_require__(29);if(A.isNodeJS){const{PDFNodeStream:w}=__w_pdfjs_require__(32);(0,n.setPDFNetworkStreamFactory)(E=>new w(E))}else{const{PDFNetworkStream:w}=__w_pdfjs_require__(35),{PDFFetchStream:E}=__w_pdfjs_require__(36);(0,n.setPDFNetworkStreamFactory)(p=>(0,i.isValidFetchUrl)(p.url)?new E(p):new w(p))}})(),__webpack_exports__})())})(pdf$1);const pdf=pdf$1.exports;var pdf_1=pdf;function isFunction(e){return typeof e=="function"}var usePdf=function e(t){var n=t.canvasRef,i=t.file,r=t.onDocumentLoadSuccess,s=t.onDocumentLoadFail,o=t.onPageLoadSuccess,m=t.onPageLoadFail,A=t.onPageRenderSuccess,l=t.onPageRenderFail,_=t.scale,P=_===void 0?1:_,w=t.rotate,E=w===void 0?0:w,p=t.page,a=p===void 0?1:p,h=t.cMapUrl,d=t.cMapPacked,R=t.workerSrc,x=R===void 0?"//cdnjs.cloudflare.com/ajax/libs/pdf.js/"+pdf_1.version+"/pdf.worker.js":R,f=t.withCredentials,c=f===void 0?!1:f,u=reactExports.useState(),y=u[0],O=u[1],M=reactExports.useState(),S=M[0],F=M[1],Q=reactExports.useRef(null),re=reactExports.useRef(r),J=reactExports.useRef(s),V=reactExports.useRef(o),z=reactExports.useRef(m),q=reactExports.useRef(A),Y=reactExports.useRef(l);return reactExports.useEffect(function(){re.current=r},[r]),reactExports.useEffect(function(){J.current=s},[s]),reactExports.useEffect(function(){V.current=o},[o]),reactExports.useEffect(function(){z.current=m},[m]),reactExports.useEffect(function(){q.current=A},[A]),reactExports.useEffect(function(){Y.current=l},[l]),reactExports.useEffect(function(){pdf_1.GlobalWorkerOptions.workerSrc=x},[x]),reactExports.useEffect(function(){var ie={url:i,withCredentials:c};h&&(ie.cMapUrl=h,ie.cMapPacked=d),pdf_1.getDocument(ie).promise.then(function(oe){O(oe),isFunction(re.current)&&re.current(oe)},function(){isFunction(J.current)&&J.current()})},[i,c,h,d]),reactExports.useEffect(function(){var ie=function oe(be){var $=E===0?be.rotate:be.rotate+E,T=window.devicePixelRatio,b=P*T,I=be.getViewport({scale:b,rotation:$}),B=n.current;if(B){var H=B.getContext("2d");if(H){if(B.style.width=I.width/T+"px",B.style.height=I.height/T+"px",B.height=I.height,B.width=I.width,Q.current){Q.current.cancel();return}return Q.current=be.render({canvasContext:H,viewport:I}),Q.current.promise.then(function(){Q.current=null,isFunction(q.current)&&q.current(be)},function(j){Q.current=null,j&&j.name==="RenderingCancelledException"?oe(be):isFunction(Y.current)&&Y.current()})}}};y&&y.getPage(a).then(function(oe){F(oe),isFunction(V.current)&&V.current(oe),ie(oe)},function(){isFunction(z.current)&&z.current()})},[n,a,y,E,P]),{pdfDocument:y,pdfPage:S}};const DrawComponent=({G_CODE:e,PDBV:t,PDBV_EMPL:n,PDBV_DATE:i,PROD_REQUEST_NO:r})=>{const s=useSelector(_=>_.totalSlice.userData),[o,m]=reactExports.useState(1),A=reactExports.useRef(null);let l="http://14.160.33.94/banve/";return console.log(l+e+".pdf"),usePdf({file:l+e+".pdf",page:o,scale:3,canvasRef:A}),jsxRuntimeExports.jsxs("div",{className:"drawcomponent",children:[t==="Y"&&jsxRuntimeExports.jsx("div",{className:"qcpass",children:jsxRuntimeExports.jsx("img",{alt:"qcpass",src:"/QC PASS20.png",width:220,height:200})}),jsxRuntimeExports.jsxs("span",{className:"approval_info2",children:["TKIN: ",s==null?void 0:s.EMPL_NO]}),t==="Y"&&jsxRuntimeExports.jsxs("span",{className:"approval_info",children:["| TTPD: ",n,"_",hooks.utc(i).format("YYYY-MM-DD HH:mm:ss")," | YCSX: ",r]}),jsxRuntimeExports.jsx("canvas",{className:"draw",ref:A}),t==="Y"&&jsxRuntimeExports.jsx("div",{className:"qcpass2",children:jsxRuntimeExports.jsx("img",{alt:"qcpass2",src:"/QC PASS20.png",width:220,height:200})})]})};export{DrawComponent as D,YCSXComponent as Y};
