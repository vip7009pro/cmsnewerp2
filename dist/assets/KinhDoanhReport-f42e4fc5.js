import{r,j as t,ag as k,ah as Y,ad as m,ai as h,S as p}from"./index-4ab6dde0.js";import{C as w,a as R,X as I,L,Y as _,T as A,b as S,c as O,B as F,d as W}from"./ComposedChart-cf350085.js";import{W as b,C as V,a as q,b as B,c as $,e as Q}from"./Widget-1c991610.js";import{P as G,a as K}from"./PieChart-e6e37eea.js";import"./DataGrid-b5e0acb2.js";import"./TextField-db9fe3d0.js";import"./MenuItem-8199bc03.js";import"./Typography-b6d023f3.js";const X=()=>{const[d,u]=r.useState([]),y=e=>{if(e<1e3)return e;if(e>=1e3)return+(e/1e3).toFixed(1)+"K$"},f=e=>y(e),x=({active:e,payload:s,label:a})=>e&&s&&s.length?t.jsxs("div",{className:"custom-tooltip",style:{backgroundImage:"linear-gradient(to right, #ccffff, #00cccc)",padding:20,borderRadius:5},children:[t.jsxs("p",{children:["Tuần ",a,":"]}),t.jsxs("p",{className:"label",children:["QTY: ",`${s[0].value.toLocaleString("en-US")}`," EA"]}),t.jsxs("p",{className:"label",children:["AMOUNT: ",`${s[1].value.toLocaleString("en-US",{style:"currency",currency:"USD"})}`]})]}):null,g=()=>{m("kd_weeklyclosing",{YEAR:h().format("YYYY")}).then(e=>{if(e.data.tk_status!=="NG"){const s=e.data.data.map((a,n)=>({...a}));u(s)}else p.fire("Thông báo","Nội dung: "+e.data.message,"error")}).catch(e=>{console.log(e)})};return r.useEffect(()=>{g()},[]),t.jsx(k,{children:t.jsxs(w,{width:500,height:300,data:d,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx(R,{strokeDasharray:"3 3",className:"chartGrid"}),t.jsx(I,{dataKey:"DEL_WEEK",children:t.jsx(L,{value:"Tuần",offset:0,position:"insideBottom"})}),t.jsx(_,{yAxisId:"left-axis",label:{value:"Số lượng",angle:-90,position:"insideLeft"},tickFormatter:e=>new Intl.NumberFormat("en",{notation:"compact",compactDisplay:"short"}).format(e),tickCount:7}),t.jsx(_,{yAxisId:"right-axis",orientation:"right",label:{value:"Số tiền",angle:-90,position:"insideRight"},tickFormatter:e=>Y(e,2)+"$",tickCount:8}),t.jsx(A,{content:t.jsx(x,{})}),t.jsx(S,{}),t.jsx(O,{yAxisId:"left-axis",type:"monotone",dataKey:"DELIVERY_QTY",stroke:"green"}),t.jsx(F,{yAxisId:"right-axis",type:"monotone",dataKey:"DELIVERED_AMOUNT",stroke:"#804d00",fill:"#ff9900",label:{position:"top",formatter:f}})]})})},H=()=>{const[d,u]=r.useState([]),y=h().add(-20,"day").format("YYYY-MM-DD"),f=h().format("YYYY-MM-DD"),x=a=>{if(a<1e3)return a;if(a>=1e3)return+(a/1e3).toFixed(1)+"K$"},g=a=>x(a),e=({active:a,payload:n,label:o})=>a&&n&&n.length?t.jsxs("div",{className:"custom-tooltip",style:{backgroundImage:"linear-gradient(to right, #ccffff, #00cccc)",padding:20,borderRadius:5},children:[t.jsxs("p",{children:["Ngày ",o,":"]}),t.jsxs("p",{className:"label",children:["QTY: ",`${n[0].value.toLocaleString("en-US")}`," EA"]}),t.jsxs("p",{className:"label",children:["AMOUNT: ",`${n[1].value.toLocaleString("en-US",{style:"currency",currency:"USD"})}`]})]}):null,s=()=>{m("kd_dailyclosing",{START_DATE:y,END_DATE:f}).then(a=>{if(a.data.tk_status!=="NG"){const n=a.data.data.map((o,j)=>({...o,DELIVERY_DATE:o.DELIVERY_DATE.slice(0,10)}));u(n)}else p.fire("Thông báo","Nội dung: "+a.data.message,"error")}).catch(a=>{console.log(a)})};return r.useEffect(()=>{s()},[]),t.jsx(k,{children:t.jsxs(w,{width:500,height:300,data:d,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx(R,{strokeDasharray:"3 3",className:"chartGrid"}),t.jsxs(I,{dataKey:"DELIVERY_DATE",children:[" ",t.jsx(L,{value:"Ngày tháng",offset:0,position:"insideBottom"})]}),t.jsx(_,{yAxisId:"left-axis",label:{value:"Số lượng",angle:-90,position:"insideLeft"},tickFormatter:a=>new Intl.NumberFormat("en",{notation:"compact",compactDisplay:"short"}).format(a),tickCount:6}),t.jsx(_,{yAxisId:"right-axis",orientation:"right",label:{value:"Số tiền",angle:-90,position:"insideRight"},tickFormatter:a=>Y(a,2)+"$",tickCount:10}),t.jsx(A,{content:t.jsx(e,{})}),t.jsx(S,{}),t.jsx(O,{yAxisId:"left-axis",type:"monotone",dataKey:"DELIVERY_QTY",stroke:"green"}),t.jsx(F,{yAxisId:"right-axis",type:"monotone",dataKey:"DELIVERED_AMOUNT",stroke:"white",fill:"#cc66ff",label:{position:"top",formatter:g}})]})})},z=()=>{const[d,u]=r.useState([]),y=e=>Y(e,2)+"$",f=({active:e,payload:s,label:a})=>e&&s&&s.length?t.jsxs("div",{className:"custom-tooltip",style:{backgroundImage:"linear-gradient(to right, #ccffff, #00cccc)",padding:20,borderRadius:5},children:[t.jsxs("p",{children:["Tháng ",a,":"]}),t.jsxs("p",{className:"label",children:["QTY: ",`${s[0].value.toLocaleString("en-US")}`," EA"]}),t.jsxs("p",{className:"label",children:["AMOUNT: ",`${s[1].value.toLocaleString("en-US",{style:"currency",currency:"USD"})}`]})]}):null,x=e=>y(e),g=()=>{m("kd_monthlyclosing",{YEAR:h().format("YYYY")}).then(e=>{if(e.data.tk_status!=="NG"){const s=e.data.data.map((a,n)=>({...a}));u(s)}else p.fire("Thông báo","Nội dung: "+e.data.message,"error")}).catch(e=>{console.log(e)})};return r.useEffect(()=>{g()},[]),t.jsx(k,{children:t.jsxs(w,{width:500,height:300,data:d,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx(R,{strokeDasharray:"3 3",className:"chartGrid"}),t.jsx(I,{dataKey:"MONTH_NUM",children:t.jsx(L,{value:"Tháng",offset:0,position:"insideBottom"})}),t.jsx(_,{yAxisId:"left-axis",label:{value:"Số lượng",angle:-90,position:"insideLeft"},tickFormatter:e=>new Intl.NumberFormat("en",{notation:"compact",compactDisplay:"short"}).format(e)}),t.jsx(_,{yAxisId:"right-axis",orientation:"right",label:{value:"Số tiền",angle:-90,position:"insideRight"},tickFormatter:e=>Y(e,2)+"$"}),t.jsx(A,{content:t.jsx(f,{})}),t.jsx(S,{}),t.jsx(O,{yAxisId:"left-axis",type:"monotone",dataKey:"DELIVERY_QTY",stroke:"blue"}),t.jsx(F,{yAxisId:"right-axis",type:"monotone",dataKey:"DELIVERED_AMOUNT",stroke:"#196619",fill:"#33cc33",label:{position:"top",formatter:x}})]})})},J=()=>{const[d,u]=r.useState([]),y=e=>Y(e,2)+"$",f=e=>y(e),x=({active:e,payload:s,label:a})=>e&&s&&s.length?t.jsxs("div",{className:"custom-tooltip",style:{backgroundImage:"linear-gradient(to right, #ccffff, #00cccc)",padding:20,borderRadius:5},children:[t.jsxs("p",{children:["Năm ",a,":"]}),t.jsxs("p",{className:"label",children:["QTY: ",`${s[0].value.toLocaleString("en-US")}`," EA"]}),t.jsxs("p",{className:"label",children:["AMOUNT: ",`${s[1].value.toLocaleString("en-US",{style:"currency",currency:"USD"})}`]})]}):null,g=()=>{m("kd_annuallyclosing",{}).then(e=>{if(e.data.tk_status!=="NG"){const s=e.data.data.map((a,n)=>({...a}));u(s)}else p.fire("Thông báo","Nội dung: "+e.data.message,"error")}).catch(e=>{console.log(e)})};return r.useEffect(()=>{g()},[]),t.jsx(k,{children:t.jsxs(w,{width:500,height:300,data:d,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx(R,{strokeDasharray:"3 3",className:"chartGrid"}),t.jsx(I,{dataKey:"YEAR_NUM",children:t.jsx(L,{value:"Năm",offset:0,position:"insideBottom"})}),t.jsx(_,{yAxisId:"left-axis",label:{value:"Số lượng",angle:-90,position:"insideLeft"},tickFormatter:e=>new Intl.NumberFormat("en",{notation:"compact",compactDisplay:"short"}).format(e)}),t.jsx(_,{yAxisId:"right-axis",orientation:"right",label:{value:"Số tiền",angle:-90,position:"insideRight"},tickFormatter:e=>Y(e,2)+"$"}),t.jsx(A,{content:t.jsx(x,{})}),t.jsx(S,{}),t.jsx(O,{yAxisId:"left-axis",type:"monotone",dataKey:"DELIVERY_QTY",stroke:"blue"}),t.jsx(F,{yAxisId:"right-axis",type:"monotone",dataKey:"DELIVERED_AMOUNT",stroke:"#ff6666",fill:"#ff1a1a",label:{position:"top",formatter:f}})]})})},Z=()=>{const[d,u]=r.useState([]),y=({active:e,payload:s,label:a})=>e&&s&&s.length?t.jsx("div",{className:"custom-tooltip",children:t.jsx("p",{className:"label",children:`${s[0].value.toLocaleString("en-US",{style:"currency",currency:"USD"})}`})}):null,f=({cx:e,cy:s,midAngle:a,innerRadius:n,outerRadius:o,value:j,index:D})=>{const E=Math.PI/180,T=25+n+(o-n),C=e+T*Math.cos(-a*E),v=s+T*Math.sin(-a*E);return t.jsxs("text",{x:C,y:v,fill:"#8884d8",textAnchor:C>e?"start":"end",dominantBaseline:"central",children:[d[D].CUST_NAME_KD," : (",j.toLocaleString("en-US",{style:"currency",currency:"USD"}),")"]})},x=()=>{let e=h().clone().weekday(0).format("YYYY-MM-DD"),s=h().clone().weekday(6).format("YYYY-MM-DD");m("customerRevenue",{START_DATE:e,END_DATE:s}).then(a=>{if(a.data.tk_status!=="NG"){let n=a.data.data.map((o,j)=>({...o}));n=n.splice(0,5),u(n)}else e=h().clone().weekday(0).add(-7,"days").format("YYYY-MM-DD"),s=h().clone().weekday(6).add(-7,"days").format("YYYY-MM-DD"),m("customerRevenue",{START_DATE:e,END_DATE:s}).then(n=>{if(n.data.tk_status!=="NG"){let o=n.data.data.map((j,D)=>({...j}));o=o.splice(0,5),u(o)}}).catch(n=>{console.log(n)})}).catch(a=>{console.log(a)})};r.useEffect(()=>{x()},[]);const g=["#cc0000","#cc3300","#cc6600","#cc9900","#cccc00","#99cc00","#66cc00","#33cc00","#00cc00","#00cc33","#00cc66","#00cc99","#00cccc","#0099cc","#0066cc","#0033cc","#0000cc","#3300cc","#6600cc","#9900cc","#cc00cc","#cc0099","#cc0066","#cc0033","#cc0000"];return t.jsx(k,{children:t.jsxs(G,{width:900,height:900,children:[t.jsx(A,{content:t.jsx(y,{})}),t.jsx(S,{}),t.jsx(K,{dataKey:"DELIVERY_AMOUNT",nameKey:"CUST_NAME_KD",isAnimationActive:!1,data:d,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:f,children:d.map((e,s)=>t.jsx(W,{fill:g[2*s%g.length*2]},`cell-${s}`))})]})})},tt=()=>{const[d,u]=r.useState([]),y=({active:e,payload:s,label:a})=>e&&s&&s.length?t.jsx("div",{className:"custom-tooltip",children:t.jsx("p",{className:"label",children:`${s[0].value.toLocaleString("en-US",{style:"currency",currency:"USD"})}`})}):null,f=({cx:e,cy:s,midAngle:a,innerRadius:n,outerRadius:o,value:j,index:D})=>{const E=Math.PI/180,T=25+n+(o-n),C=e+T*Math.cos(-a*E),v=s+T*Math.sin(-a*E);return t.jsxs("text",{x:C,y:v,fill:"#8884d8",textAnchor:C>e?"start":"end",dominantBaseline:"central",children:[d[D].EMPL_NAME," : (",j.toLocaleString("en-US",{style:"currency",currency:"USD"}),")"]})},x=()=>{let e=h().clone().weekday(0).format("YYYY-MM-DD"),s=h().clone().weekday(6).format("YYYY-MM-DD");m("PICRevenue",{START_DATE:e,END_DATE:s}).then(a=>{if(a.data.tk_status!=="NG"){let n=a.data.data.map((o,j)=>({...o}));u(n)}else e=h().clone().weekday(0).add(-7,"days").format("YYYY-MM-DD"),s=h().clone().weekday(6).add(-7,"days").format("YYYY-MM-DD"),m("PICRevenue",{START_DATE:e,END_DATE:s}).then(n=>{if(n.data.tk_status!=="NG"){let o=n.data.data.map((j,D)=>({...j}));u(o)}}).catch(n=>{console.log(n)})}).catch(a=>{console.log(a)})};r.useEffect(()=>{x()},[]);const g=["#cc0000","#cc3300","#cc6600","#cc9900","#cccc00","#99cc00","#66cc00","#33cc00","#00cc00","#00cc33","#00cc66","#00cc99","#00cccc","#0099cc","#0066cc","#0033cc","#0000cc","#3300cc","#6600cc","#9900cc","#cc00cc","#cc0099","#cc0066","#cc0033","#cc0000"];return t.jsx(k,{children:t.jsxs(G,{width:500,height:400,children:[t.jsx(A,{content:t.jsx(y,{})}),t.jsx(S,{}),t.jsx(K,{dataKey:"DELIVERY_AMOUNT",nameKey:"EMPL_NAME",isAnimationActive:!1,data:d,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:f,children:d.map((e,s)=>t.jsx(W,{fill:g[(2+s)*3%g.length]},`cell-${s}`))})]})})};const dt=()=>{const[d,u]=r.useState({yesterday_qty:0,yesterday_amount:0}),[y,f]=r.useState({thisweek_qty:0,thisweek_amount:0}),[x,g]=r.useState({thismonth_qty:0,thismonth_amount:0}),[e,s]=r.useState({thisyear_qty:0,thisyear_amount:0}),[a,n]=r.useState({po_balance_qty:0,po_balance_amount:0}),[o,j]=r.useState({FCSTYEAR:0,FCSTWEEKNO:1,FCST4W_QTY:0,FCST4W_AMOUNT:0,FCST8W_QTY:0,FCST8W_AMOUNT:0}),D=async()=>{let c=h().add(1,"days").isoWeek(),l=h().year();await m("checklastfcstweekno",{FCSTWEEKNO:l}).then(i=>{i.data.tk_status!=="NG"?c=i.data.data[0].FCSTWEEKNO:p.fire("Thông báo","Nội dung: "+i.data.message,"error")}).catch(i=>{console.log(i)}),console.log("fcst week2->: ",c),m("fcstamount",{FCSTYEAR:l,FCSTWEEKNO:c}).then(i=>{if(i.data.tk_status!=="NG"){const N=i.data.data.map((M,U)=>({...M}));j(N[0])}else m("fcstamount",{FCSTYEAR:c-1===0?l-1:l,FCSTWEEKNO:c-1===0?52:c-1}).then(N=>{if(N.data.tk_status!=="NG"){const M=N.data.data.map((U,et)=>({...U}));j(M[0])}}).catch(N=>{console.log(N)})}).catch(i=>{console.log(i)})},E=()=>{let c=h().add(-1,"day").format("YYYY-MM-DD");m("kd_dailyclosing",{START_DATE:c,END_DATE:c}).then(l=>{if(l.data.tk_status!=="NG"){const i=l.data.data.map((N,M)=>({...N,DELIVERY_DATE:N.DELIVERY_DATE.slice(0,10)}));u({yesterday_qty:i[0].DELIVERY_QTY,yesterday_amount:i[0].DELIVERED_AMOUNT})}}).catch(l=>{console.log(l)})},T=()=>{m("kd_weeklyclosing",{YEAR:h().format("YYYY")}).then(c=>{if(c.data.tk_status!=="NG"){const l=c.data.data.map((i,N)=>({...i}));f({thisweek_qty:l[l.length-1].DELIVERY_QTY,thisweek_amount:l[l.length-1].DELIVERED_AMOUNT})}else p.fire("Thông báo","Nội dung: "+c.data.message,"error")}).catch(c=>{console.log(c)})},C=()=>{m("kd_monthlyclosing",{YEAR:h().format("YYYY")}).then(c=>{if(c.data.tk_status!=="NG"){const l=c.data.data.map((i,N)=>({...i}));g({thismonth_qty:l[l.length-1].DELIVERY_QTY,thismonth_amount:l[l.length-1].DELIVERED_AMOUNT})}else p.fire("Thông báo","Nội dung: "+c.data.message,"error")}).catch(c=>{console.log(c)})},v=()=>{m("kd_annuallyclosing",{}).then(c=>{if(c.data.tk_status!=="NG"){const l=c.data.data.map((i,N)=>({...i}));s({thisyear_qty:l[l.length-1].DELIVERY_QTY,thisyear_amount:l[l.length-1].DELIVERED_AMOUNT})}else p.fire("Thông báo","Nội dung: "+c.data.message,"error")}).catch(c=>{console.log(c)})},P=()=>{m("traPOSummaryTotal",{}).then(c=>{if(c.data.tk_status!=="NG"){const l=c.data.data.map((i,N)=>({...i}));n({po_balance_qty:l[0].PO_BALANCE,po_balance_amount:l[0].BALANCE_AMOUNT})}else p.fire("Thông báo","Nội dung: "+c.data.message,"error")}).catch(c=>{console.log(c)})};return r.useEffect(()=>{E(),T(),C(),v(),P(),D()},[]),t.jsxs("div",{className:"kinhdoanhreport",children:[t.jsxs("div",{className:"doanhthureport",children:[t.jsx("span",{className:"section_title",children:"1. Summary"}),t.jsxs("div",{className:"revenuewidget",children:[t.jsx("div",{className:"revenuwdg",children:t.jsx(b,{widgettype:"revenue",label:"Yesterday",topColor:"#b3c6ff",botColor:"#b3ecff",qty:d.yesterday_qty,amount:d.yesterday_amount,percentage:20})}),t.jsx("div",{className:"revenuwdg",children:t.jsx(b,{widgettype:"revenue",label:"This week",topColor:"#ccffcc",botColor:"#80ff80",qty:y.thisweek_qty,amount:y.thisweek_amount,percentage:20})}),t.jsx("div",{className:"revenuwdg",children:t.jsx(b,{widgettype:"revenue",label:"This month",topColor:"#fff2e6",botColor:"#ffbf80",qty:x.thismonth_qty,amount:x.thismonth_amount,percentage:20})}),t.jsx("div",{className:"revenuwdg",children:t.jsx(b,{widgettype:"revenue",label:"This year",topColor:"#ffe6e6",botColor:"#ffb3b3",qty:e.thisyear_qty,amount:e.thisyear_amount,percentage:20})})]}),t.jsx("br",{}),t.jsx("hr",{}),t.jsxs("div",{className:"graph",children:[t.jsx("span",{className:"section_title",children:"2. Closing"}),t.jsxs("div",{className:"dailygraphtotal",children:[t.jsxs("div",{className:"dailygraph",children:[t.jsx("span",{className:"subsection",children:"Daily Closing"}),t.jsx(H,{})]}),t.jsxs("div",{className:"dailygraph",children:[t.jsx("span",{className:"subsection",children:"Weekly Closing"}),t.jsx(X,{})]})]}),t.jsxs("div",{className:"monthlyweeklygraph",children:[t.jsxs("div",{className:"dailygraph",children:[t.jsx("span",{className:"subsection",children:"Monthly Closing"}),t.jsx(z,{})]}),t.jsxs("div",{className:"dailygraph",children:[t.jsx("span",{className:"subsection",children:"Yearly Closing"}),t.jsx(J,{})]})]}),t.jsxs("div",{className:"monthlyweeklygraph",children:[t.jsxs("div",{className:"dailygraph",children:[t.jsx("span",{className:"subsection",children:"TOP 5 Customer Weekly Revenue"}),t.jsx(Z,{})]}),t.jsxs("div",{className:"dailygraph",children:[t.jsx("span",{className:"subsection",children:"PIC Weekly Revenue"}),t.jsx(tt,{})]})]}),t.jsx("br",{}),t.jsx("hr",{}),t.jsx("span",{className:"section_title",children:"3. Purchase Order (PO)"}),t.jsx("br",{}),t.jsxs("div",{className:"pobalancesummary",children:[t.jsx("span",{className:"subsection",children:"PO Balance info"}),t.jsx(b,{widgettype:"revenue",label:"PO BALANCE INFOMATION",topColor:"#ccff33",botColor:"#99ccff",qty:a.po_balance_qty*1,amount:a.po_balance_amount,percentage:20})]}),t.jsxs("div",{className:"monthlyweeklygraph",children:[t.jsxs("div",{className:"dailygraph",children:[t.jsx("span",{className:"subsection",children:"PO By Week"}),t.jsx(V,{})]}),t.jsxs("div",{className:"dailygraph",children:[t.jsx("span",{className:"subsection",children:"Delivery By Week"}),t.jsx(q,{})]})]}),t.jsx("div",{className:"monthlyweeklygraph",children:t.jsxs("div",{className:"dailygraph",children:[t.jsx("span",{className:"subsection",children:"PO Balance Trending (By Week)"}),t.jsx(B,{})]})}),t.jsx("div",{className:"datatable",children:t.jsxs("div",{className:"dailygraph",children:[t.jsx("span",{className:"subsection",children:"Customer PO Balance By Product Type"}),t.jsx($,{})]})}),t.jsx("br",{}),t.jsx("hr",{}),t.jsx("span",{className:"section_title",children:"4. Forecast"}),t.jsx("br",{}),t.jsxs("div",{className:"fcstsummary",children:[t.jsxs("span",{className:"subsection",children:["FCST Amount (FCST W",o.FCSTWEEKNO,")"]}),t.jsxs("div",{className:"fcstwidget",children:[t.jsx("div",{className:"fcstwidget1",children:t.jsx(b,{widgettype:"revenue",label:"FCST AMOUNT(4 WEEK)",topColor:"#eb99ff",botColor:"#99ccff",qty:o.FCST4W_QTY*1,amount:o.FCST4W_AMOUNT,percentage:20})}),t.jsx("div",{className:"fcstwidget1",children:t.jsx(b,{widgettype:"revenue",label:"FCST AMOUNT(8 WEEK)",topColor:"#e6e600",botColor:"#ff99c2",qty:o.FCST8W_QTY*1,amount:o.FCST8W_AMOUNT,percentage:20})})]})]}),t.jsx("div",{className:"monthlyweeklygraph",children:t.jsxs("div",{className:"dailygraph",children:[t.jsx("span",{className:"subsection",children:"SamSung ForeCast (So sánh FCST 2 tuần liền kề)"}),t.jsx(Q,{})]})})]})]}),t.jsx("div",{className:"poreport"})]})};export{dt as default};
