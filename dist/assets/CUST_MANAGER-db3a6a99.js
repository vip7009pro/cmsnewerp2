import{r as n,k as A,j as e,aj as G,S as o,I as w,ak as D,al as O,ad as b}from"./index-4ab6dde0.js";import{T as f}from"./TextField-db9fe3d0.js";import{D as I,G as L,b as F}from"./DataGrid-b5e0acb2.js";import{G as K,a as P,b as V}from"./GridToolbarFilterButton-ec6062d3.js";import"./MenuItem-8199bc03.js";import"./Typography-b6d023f3.js";const Y=()=>{const[S,z]=n.useState({trapo:!0,thempohangloat:!1,them1po:!1,them1invoice:!1,testinvoicetable:!1}),s=A(a=>a.totalSlice.userData),[j,t]=n.useState(!1),[h,_]=n.useState([]),[u,x]=n.useState("0000"),[m,T]=n.useState("Seojin Vina"),[g,N]=n.useState("SEOJIN"),[i,k]=n.useState(!0);let c=[{field:"id",headerName:"CUST_CD",width:80,renderCell:a=>e.jsx("span",{style:{color:"gray"},children:e.jsx("b",{children:e.jsx("input",{className:"customerinput",disabled:i,onChange:d=>{},defaultValue:a.row.id})})})},{field:"name",headerName:"CUST_NAME",width:280,renderCell:a=>e.jsx("span",{style:{color:"gray"},children:e.jsx("b",{children:e.jsx("input",{className:"customerinput",disabled:i,defaultValue:a.row.name})})})},{field:"CUST_NAME_KD",headerName:"CUST_NAME_KD",width:220,renderCell:a=>e.jsx("span",{style:{color:"gray"},children:e.jsx("b",{children:e.jsx("input",{className:"customerinput",disabled:i,defaultValue:a.row.CUST_NAME_KD})})})}];const p=a=>{const d=new Set(a);var l=h.filter(C=>d.has(C.id));l.length>0&&(x(l[l.length-1].id),T(l[l.length-1].name),N(l[l.length-1].CUST_NAME_KD))},[E,r]=n.useState(c);function v(){return e.jsxs(L,{children:[e.jsx(K,{}),e.jsx(P,{}),e.jsx(V,{}),e.jsxs(w,{className:"buttonIcon",onClick:()=>{D(h,"Code Info Table")},children:[e.jsx(O,{color:"green",size:25}),"SAVE"]}),e.jsx("button",{onClick:()=>{k(!i),console.log(i),r(c)},children:"Bật Tắt Sửa"}),e.jsx(F,{})]})}const M=()=>{t(!0),r(c),b("get_listcustomer",{}).then(a=>{if(a.data.tk_status!=="NG"){const d=a.data.data.map((l,C)=>({...l}));_(d),t(!1),o.fire("Thông báo","Đã load "+a.data.data.length+" dòng","success")}else o.fire("Thông báo","Nội dung: "+a.data.message,"error"),t(!1)}).catch(a=>{console.log(a)})},U=()=>{t(!0),r(c),b("add_customer",{CUST_CD:u,CUST_NAME:m,CUST_NAME_KD:g}).then(a=>{a.data.tk_status!=="NG"?(t(!1),o.fire("Thông báo","Thêm khách thành công","success")):(o.fire("Thông báo","Thêm khách thất bại: "+a.data.message,"error"),t(!1))}).catch(a=>{console.log(a)})},y=()=>{t(!0),r(c),b("edit_customer",{CUST_CD:u,CUST_NAME:m,CUST_NAME_KD:g}).then(a=>{a.data.tk_status!=="NG"?(t(!1),o.fire("Thông báo","Sửa khách thành công","success")):(o.fire("Thông báo","Sửa khách thất bại: "+a.data.message,"error"),t(!1))}).catch(a=>{console.log(a)})};return n.useEffect(()=>{M()},[]),e.jsxs("div",{className:"customermamanger",children:[e.jsx("span",{style:{fontWeight:"bold",fontSize:20,marginTop:5},children:"Quản lý Khách Hàng"}),S.trapo&&e.jsxs("div",{className:"tracuuFcst",children:[e.jsx("div",{className:"tracuuFcstTable",children:e.jsx(I,{components:{Toolbar:v,LoadingOverlay:G},sx:{fontSize:12},loading:j,rowHeight:30,rows:h,columns:E,rowsPerPageOptions:[5,10,50,100,500,1e3,5e3,1e4,1e5],editMode:"row",onSelectionModelChange:a=>{p(a)}})}),e.jsx("div",{className:"editcustomerform",children:e.jsx("div",{className:"formnho",children:e.jsxs("div",{className:"dangkyform",children:[e.jsx("h3",{children:"Thêm - Sửa khách hàng"}),e.jsx("div",{className:"dangkyinput",children:e.jsxs("div",{className:"dangkyinputbox",children:[e.jsxs("label",{children:[e.jsx("b",{children:"Mã khách hàng:"})," ",e.jsx(f,{value:u,onChange:a=>{x(a.target.value)},size:"small",color:"success",className:"autocomplete",id:"outlined-basic",label:"Số PO",variant:"outlined"})]}),e.jsxs("label",{children:[e.jsx("b",{children:"Tên khách hàng (dài):"})," ",e.jsx(f,{value:m,onChange:a=>{T(a.target.value)},size:"small",color:"success",className:"autocomplete",id:"outlined-basic",label:"INVOICE QTY",variant:"outlined"})]}),e.jsxs("label",{children:[e.jsx("b",{children:"Tên khách hàng (KD):"})," ",e.jsx(f,{value:g,onChange:a=>{N(a.target.value)},size:"small",className:"autocomplete",id:"outlined-basic",label:"Remark",variant:"outlined"})]})]})}),e.jsxs("div",{className:"dangkybutton",children:[e.jsx("button",{className:"thembutton",onClick:()=>{(s==null?void 0:s.EMPL_NO)==="LVT1906"||(s==null?void 0:s.EMPL_NO)==="NHU1903"?U():o.fire("Thông báo","Chỉ leader kinh doanh mới tạo khách mới được","error")},children:"Thêm"}),e.jsx("button",{className:"suabutton",onClick:()=>{(s==null?void 0:s.EMPL_NO)==="LVT1906"||(s==null?void 0:s.EMPL_NO)==="NHU1903"?y():o.fire("Thông báo","Chỉ leader kinh doanh mới sửa khách được","error")},children:"Sửa"})]})]})})})]})]})};export{Y as default};
