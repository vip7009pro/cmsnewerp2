import{r as T,k as ge,j as a,aT as B,aj as Z,I as g,ak as ee,al as te,S as d,bq as rt,ad as S,b3 as ot,br as dt,bs as ct,bt as ht,bu as _t,bc as Et,ba as Ct,bv as oe,bw as Nt,b7 as Te,bx as Me,aQ as me,ai as x}from"./index-4ab6dde0.js";import{i as Tt}from"./index.esm-f9b137af.js";import{D as ae,G as ne,b as se,F as Mt,C as mt,A as Se,c as St}from"./DataGrid-b5e0acb2.js";import{T as ue}from"./TextField-db9fe3d0.js";import"./MenuItem-8199bc03.js";import"./Typography-b6d023f3.js";const ut=()=>{const[P,Q]=T.useState(!1),[y,F]=T.useState([]),[b,X]=T.useState(!1),[t,p]=T.useState(!1),o=ge(i=>i.totalSlice.userData),[w,_]=T.useState(!1);T.useState([]);const[R,f]=T.useState([]),[de,U]=T.useState([]),[D,m]=T.useState([]),[V,j]=T.useState(""),[H,l]=T.useState("BẢNG VẬT LIỆU"),v=[{field:"M_ID",headerName:"M_ID",width:80,editable:b},{field:"M_NAME",headerName:"M_NAME",width:150,editable:b},{field:"CUST_CD",headerName:"VENDOR",width:120,editable:b},{field:"SSPRICE",headerName:"SSPRICE",width:120,editable:b},{field:"CMSPRICE",headerName:"CMSPRICE",width:120,editable:b},{field:"SLITTING_PRICE",headerName:"SLITTING_PRICE",width:120,editable:b},{field:"MASTER_WIDTH",headerName:"MASTER_WIDTH",width:150,editable:b},{field:"ROLL_LENGTH",headerName:"ROLL_LENGTH",width:150,editable:b}];function A(){return a.jsxs(ne,{children:[a.jsxs(g,{className:"buttonIcon",onClick:()=>{ee(R,"Material Table")},children:[a.jsx(te,{color:"green",size:25}),"SAVE"]}),a.jsx(se,{}),a.jsx("div",{className:"div",style:{fontSize:20,fontWeight:"bold"},children:H}),a.jsxs(g,{className:"buttonIcon",onClick:()=>{X(!b),d.fire("Thông báo","Bật/Tắt Sửa thành công","success")},children:[a.jsx(rt,{color:"yellow",size:25}),"Bật/Tắt sửa"]}),b===!0?"Bật Sửa":"Tắt Sửa"]})}const k=()=>{S("get_material_table",{M_NAME:V,NGMATERIAL:P}).then(i=>{if(i.data.tk_status!=="NG"){let u=i.data.data.map((O,G)=>({...O,id:G}));f(u),U(v),p(!0),_(!1),d.fire("Thông báo","Đã load: "+i.data.data.length+" dòng","success")}else f([]),d.fire("Thông báo","Nội dung: "+i.data.message,"error")}).catch(i=>{console.log(i)})},le=async()=>{if(D.length>0){console.log(D);let i="";for(let u=0;u<D.length;u++)D[u].CUST_CD===null||D[u].CUST_CD===""?i+=" | Tên vendor không được để trống":D[u].SSPRICE===null?i+=" | Giá SS không được để trống":D[u].CMSPRICE===null?i+=" | Giá CMS không được để trống":D[u].MASTER_WIDTH===null?i+=" | Khổ cây không được để trống":D[u].ROLL_LENGTH===null?i+=" | Độ dài liệu không được để trống":await S("update_material_info",{M_ID:D[u].M_ID,CUST_CD:D[u].CUST_CD,SSPRICE:D[u].SSPRICE,CMSPRICE:D[u].CMSPRICE,SLITTING_PRICE:D[u].SLITTING_PRICE,MASTER_WIDTH:D[u].MASTER_WIDTH,ROLL_LENGTH:D[u].ROLL_LENGTH}).then(O=>{O.data.tk_status!=="NG"||(f([]),d.fire("Thông báo","Nội dung: "+O.data.message,"error"))}).catch(O=>{console.log(O)}),i!==""?console.log(D[u].M_NAME+": "+i):d.fire("Thông báo","Đã lưu thông tin vật liệu thành công")}else d.fire("Thông báo","Chọn ít nhất 1 liệu để lưu data","error")},E=i=>{const u=new Set(i);let O=R.filter(G=>u.has(G.M_ID));O.length>0?m(O):m([])},ce=i=>{i.key==="Enter"&&(_(!0),p(!1),U(v),k())};return T.useEffect(()=>{_(!1),p(!0)},[]),a.jsx("div",{className:"material_manager",children:a.jsxs("div",{className:"tracuuDataInspection",children:[a.jsxs("div",{className:"tracuuDataInspectionform",children:[a.jsxs("div",{className:"forminput",children:[a.jsx("div",{className:"forminputcolumn",children:a.jsxs("label",{children:[a.jsx("b",{children:"Tên Liệu"}),a.jsx("input",{type:"text",value:V,onChange:i=>j(i.target.value),onKeyDown:i=>{ce(i)}})]})}),a.jsx("div",{className:"forminputcolumn",children:a.jsxs("label",{children:[a.jsx("b",{children:"Chỉ liệu thiếu thông tin:"}),a.jsx("input",{type:"checkbox",name:"alltimecheckbox",defaultChecked:P,onChange:()=>Q(!P)})]})}),a.jsx("div",{className:"forminputcolumn",children:a.jsx("button",{className:"tranhatky",onClick:()=>{_(!0),p(!1),U(v),k()},children:"TRA LIỆU"})}),a.jsx("div",{className:"forminputcolumn",children:a.jsx("button",{className:"xuatnext",onClick:()=>{B(o==null?void 0:o.EMPL_NO,o==null?void 0:o.MAINDEPTNAME,["KD","RND"],le)},children:"SAVE"})})]}),a.jsx("div",{className:"formbutton"})]}),a.jsx("div",{className:"tracuuYCSXTable",children:t&&a.jsx(ae,{sx:{fontSize:12,flex:1},components:{Toolbar:A,LoadingOverlay:Z},loading:w,rowHeight:30,rows:R,columns:v,rowsPerPageOptions:[5,10,50,100,500,1e3,5e3,1e4,5e5],checkboxSelection:!0,disableSelectionOnClick:!0,editMode:"cell",getRowId:i=>i.M_ID,onSelectionModelChange:i=>{E(i)},onCellEditCommit:(i,u,O)=>{let G=y;G.push(i),F(G);const K=i.field,ie=R.map(W=>W.M_ID===i.id?{...W,[K]:i.value}:W);f(ie)}})})]})})},jt=()=>{var Ce,Ne;const[P,Q]=T.useState([]),[y,F]=T.useState([]),[b,X]=T.useState([]),[t,p]=T.useState({CUST_CD:"0000",PROD_PROJECT:"",PROD_MODEL:"",CODE_12:"7",PROD_TYPE:"TSP",G_NAME_KD:"",DESCR:"",PROD_MAIN_MATERIAL:"",G_NAME:"",G_LENGTH:0,G_WIDTH:0,PD:0,G_C:0,G_C_R:0,G_CG:0,G_LG:0,G_SG_L:0,G_SG_R:0,PACK_DRT:"1",KNIFE_TYPE:0,KNIFE_LIFECYCLE:0,KNIFE_PRICE:0,CODE_33:"02",ROLE_EA_QTY:0,RPM:0,PIN_DISTANCE:0,PROCESS_TYPE:"",EQ1:"NA",EQ2:"NA",PROD_DIECUT_STEP:0,PROD_PRINT_TIMES:0,REMK:"",USE_YN:"N",G_CODE:"-------",PO_TYPE:"E1",FSC:"N"}),[o,w]=T.useState([]),[_,R]=T.useState([]),[f,de]=T.useState([]);T.useState();const[U,D]=T.useState([{M_CODE:"A0000001",M_NAME:"#200",WIDTH_CD:1200}]),[m,V]=T.useState({M_CODE:"A0000001",M_NAME:"#200",WIDTH_CD:1200}),[j,H]=T.useState({trapo:!0,thempohangloat:!1,them1po:!1,them1invoice:!1,testinvoicetable:!1}),l=ge(e=>e.totalSlice.userData),[v,A]=T.useState(!1),[k,le]=T.useState(""),[E,ce]=T.useState(!1),[i,u]=T.useState(!0),[O,G]=T.useState([]),[K,ie]=T.useState([]),[W,De]=T.useState([]),[gt,Oe]=T.useState([]),N=(e,s)=>{let n={...t,[e]:s};p(n)},[z,xe]=T.useState(!1),[be,Dt]=T.useState([{field:"id",headerName:"ID",width:70,editable:E},{field:"G_CODE",headerName:"G_CODE",width:80,editable:E},{field:"G_NAME",headerName:"G_NAME",flex:1,minWidth:250,editable:E},{field:"G_NAME_KD",headerName:"G_NAME_KD",width:120,editable:E},{field:"PROD_TYPE",headerName:"PROD_TYPE",width:80,editable:E},{field:"PROD_LAST_PRICE",headerName:"PRICE",width:80,editable:E},{field:"PD",headerName:"PD",width:80,editable:E},{field:"CAVITY",headerName:"CAVITY",width:80,editable:E},{field:"PACKING_QTY",headerName:"PACKING_QTY",width:80,editable:E},{field:"G_WIDTH",headerName:"G_WIDTH",width:80,editable:E},{field:"G_LENGTH",headerName:"G_LENGTH",width:80,editable:E},{field:"PROD_PROJECT",headerName:"PROD_PROJECT",width:120,editable:E},{field:"PROD_MODEL",headerName:"PROD_MODEL",width:120,editable:E},{field:"M_NAME_FULLBOM",headerName:"FULLBOM",flex:1,minWidth:150,editable:E},{field:"BANVE",headerName:"BANVE",width:260,renderCell:e=>{let s=null,n="http://14.160.33.94:5011/upload";const r=async M=>{console.log(s);const c=new FormData;if(c.append("banve",s),c.append("filename",e.row.G_CODE),(l==null?void 0:l.MAINDEPTNAME)==="KD"||(l==null?void 0:l.MAINDEPTNAME)==="RND")try{const h=await Et.post(n,c);h.data.tk_status==="OK"?S("update_banve_value",{G_CODE:e.row.G_CODE,banvevalue:"Y"}).then(Y=>{if(Y.data.tk_status!=="NG"){d.fire("Thông báo","Upload bản vẽ thành công","success");let I=O.map((re,Ot)=>re.G_CODE===e.row.G_CODE?{...re,BANVE:"Y"}:re);G(I)}else d.fire("Thông báo","Upload bản vẽ thất bại","error")}).catch(Y=>{console.log(Y)}):d.fire("Thông báo",h.data.message,"error")}catch(h){console.log(h)}else d.fire("Thông báo","Chỉ bộ phận kinh doanh upload được bản vẽ","error")};let C="/banve/"+e.row.G_CODE+".pdf";return e.row.BANVE!=="N"&&e.row.BANVE!==null?a.jsx("span",{style:{color:"gray"},children:a.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:C,children:"LINK"})}):a.jsxs("div",{className:"uploadfile",children:[a.jsxs(g,{className:"buttonIcon",onClick:r,children:[a.jsx(ot,{color:"yellow",size:25}),"Upload"]}),a.jsx("input",{accept:".pdf",type:"file",onChange:M=>{s=M.target.files[0],console.log(s)}})]})},editable:E},{field:"NO_INSPECTION",headerName:"KT NGOAI QUAN",width:120,renderCell:e=>e.row.NO_INSPECTION!=="Y"?a.jsx("span",{style:{color:"green"},children:"Kiểm tra"}):a.jsx("span",{style:{color:"red"},children:"Không kiểm tra"}),editable:E},{field:"USE_YN",headerName:"SỬ DỤNG",width:80,renderCell:e=>e.row.USE_YN!=="Y"?a.jsx("span",{style:{color:"red"},children:"KHÓA"}):a.jsx("span",{style:{color:"green"},children:"MỞ"}),editable:!0},{field:"PDBV",headerName:"PD BANVE",width:80,renderCell:e=>e.row.PDBV==="P"||e.row.PDBV==="R"||e.row.PDBV===null?a.jsx("span",{style:{color:"red"},children:a.jsx("b",{children:"PENDING"})}):a.jsx("span",{style:{color:"green"},children:a.jsx("b",{children:"APPROVED"})})}]),[q,Ie]=T.useState([{field:"M_CODE",headerName:"M_CODE",width:80,renderCell:e=>a.jsxs("span",{style:{color:"blue"},children:[e.row.M_CODE," "]}),editable:E},{field:"M_NAME",headerName:"M_NAME",width:110,renderCell:e=>a.jsxs("span",{style:{color:"red"},children:[e.row.M_NAME," "]}),editable:E},{field:"WIDTH_CD",headerName:"SIZE",width:80,editable:E},{field:"M_QTY",headerName:"M_QTY",width:80,editable:E},{field:"LIEUQL_SX",headerName:"LIEUQL_SX",width:80,editable:E},{field:"MAIN_M",headerName:"MAIN_M",width:80,editable:E},{field:"INS_EMPL",headerName:"INS_EMPL",width:80,editable:E},{field:"INS_DATE",headerName:"INS_DATE",width:150,editable:E},{field:"UPD_EMPL",headerName:"UPD_EMPL",width:80,editable:E},{field:"UPD_DATE",headerName:"UPD_DATE",width:150,editable:E}]),[$,Ae]=T.useState([{field:"M_CODE",headerName:"M_CODE",width:80,editable:E},{field:"M_NAME",headerName:"M_NAME",width:150,editable:E},{field:"CUST_CD",headerName:"Vendor",width:80,editable:E,renderCell:e=>e.row.CUST_CD===""?a.jsx("span",{style:{backgroundColor:"red"},children:"NG"}):a.jsx("span",{children:e.row.CUST_CD})},{field:"USAGE",headerName:"USAGE",width:80,editable:E,renderCell:e=>e.row.USAGE===""?a.jsx("span",{style:{backgroundColor:"red"},children:"NG"}):a.jsx("span",{children:e.row.USAGE})},{field:"MAIN_M",headerName:"MAIN_M",width:80,editable:E},{field:"MAT_MASTER_WIDTH",headerName:"Khổ liệu",width:80,editable:E,renderCell:e=>e.row.MAT_MASTER_WIDTH===0?a.jsx("span",{style:{backgroundColor:"red"},children:"NG"}):a.jsx("span",{children:e.row.MAT_MASTER_WIDTH})},{field:"MAT_CUTWIDTH",headerName:"Khổ SD",width:80,editable:E},{field:"MAT_ROLL_LENGTH",headerName:"Dài liệu",width:110,editable:E,renderCell:e=>e.row.MAT_ROLL_LENGTH===0?a.jsx("span",{style:{backgroundColor:"red"},children:"NG"}):a.jsx("span",{children:e.row.MAT_ROLL_LENGTH})},{field:"M_QTY",headerName:"M_QTY",width:80,editable:E},{field:"REMARK",headerName:"REMARK",width:80,editable:E},{field:"PROCESS_ORDER",headerName:"Thứ tự",width:80,editable:E}]);function Pe(){return a.jsxs(ne,{children:[a.jsxs(g,{className:"buttonIcon",onClick:()=>{ee(O,"Code Info Table")},children:[a.jsx(te,{color:"green",size:25}),"SAVE"]}),a.jsxs(g,{className:"buttonIcon",onClick:()=>{it()},children:[a.jsx(Ct,{color:"green",size:25}),"RESET BẢN VẼ"]}),a.jsxs(g,{className:"buttonIcon",onClick:()=>{u(!i),d.fire("Thông báo","Bật/Tắt chế độ sửa","success")},children:[a.jsx(oe,{color:"yellow",size:25}),"Bật tắt sửa"]}),a.jsxs(g,{className:"buttonIcon",onClick:()=>{xe(!z),d.fire("Thông báo","Ghim/ bỏ ghim BOM thành công","success")},children:[a.jsx(Nt,{color:"red",size:25}),"Ghim BOM"]}),a.jsx(se,{})]})}function Re(){return a.jsxs(ne,{children:[a.jsxs(g,{className:"buttonIcon",onClick:()=>{ee(O,"Code Info Table")},children:[a.jsx(te,{color:"green",size:20}),"EXCEL"]}),a.jsxs(g,{className:"buttonIcon",onClick:()=>{st()},children:[a.jsx(Te,{color:"blue",size:20}),"Lưu BOM"]}),a.jsxs(g,{className:"buttonIcon",onClick:()=>{ze()},children:[a.jsx(Me,{color:"yellow",size:20}),"Thêm dòng"]}),a.jsxs(g,{className:"buttonIcon",onClick:()=>{qe()},children:[a.jsx(me,{color:"yellow",size:20}),"Xóa dòng"]}),a.jsxs(g,{className:"buttonIcon",onClick:()=>{Ie(q.map((e,s)=>({...e,editable:!e.editable}))),d.fire("Thông báo","Bật/Tắt chế độ sửa","success")},children:[a.jsx(oe,{color:"yellow",size:20}),"Bật tắt sửa"]}),a.jsx(se,{})]})}function je(){return a.jsxs(ne,{children:[a.jsxs(g,{className:"buttonIcon",onClick:()=>{ee(O,"Code Info Table")},children:[a.jsx(te,{color:"green",size:20}),"EXCEL"]}),a.jsxs(g,{className:"buttonIcon",onClick:()=>{lt()},children:[a.jsx(Te,{color:"blue",size:20}),"Lưu BOM"]}),a.jsxs(g,{className:"buttonIcon",onClick:()=>{Ze()},children:[a.jsx(Me,{color:"yellow",size:20}),"Thêm dòng"]}),a.jsxs(g,{className:"buttonIcon",onClick:()=>{et()},children:[a.jsx(me,{color:"yellow",size:20}),"Xóa dòng"]}),a.jsxs(g,{className:"buttonIcon",onClick:()=>{Ae($.map((e,s)=>({...e,editable:!e.editable}))),d.fire("Thông báo","Bật/Tắt chế độ sửa","success")},children:[a.jsx(oe,{color:"yellow",size:25}),"Bật tắt sửa"]}),a.jsxs(g,{className:"buttonIcon",onClick:()=>{nt()},children:[a.jsx(Tt,{color:"red",size:20}),"Clone BOMSX"]}),a.jsx(se,{})]})}const Ge=async e=>{var s,n,r;if(P.length>=1)if(((s=l==null?void 0:l.EMPL_NO)==null?void 0:s.toUpperCase())==="NVH1011"||((n=l==null?void 0:l.EMPL_NO)==null?void 0:n.toUpperCase())==="NHU1903"||((r=l==null?void 0:l.EMPL_NO)==null?void 0:r.toUpperCase())==="LVT1906"){for(let C=0;C<P.length;C++)await S("resetbanve",{G_CODE:P[C].G_CODE,VALUE:e}).then(M=>{console.log(M.data.tk_status),M.data.tk_status}).catch(M=>{console.log(M)});d.fire("Thông báo","RESET BAN VE THÀNH CÔNG","success")}else d.fire("Thông báo","Không đủ quyền hạn!","error");else d.fire("Thông báo","Chọn ít nhất 1 G_CODE để SET !","error")},Le=e=>{A(!0),S("getbomsx",{G_CODE:e}).then(s=>{if(s.data.tk_status!=="NG"){const n=s.data.data.map((r,C)=>({...r,INS_DATE:x.utc(r.INS_DATE).format("YYYY-MM-DD HH:mm:ss"),UPD_DATE:x.utc(r.UPD_DATE).format("YYYY-MM-DD HH:mm:ss"),id:C}));w(n),A(!1)}else w([]),A(!1)}).catch(s=>{console.log(s)})},pe=e=>{A(!0),S("getbomgia",{G_CODE:e}).then(s=>{if(s.data.tk_status!=="NG"){const n=s.data.data.map((r,C)=>({...r,INS_DATE:x.utc(r.INS_DATE).format("YYYY-MM-DD HH:mm:ss"),UPD_DATE:x.utc(r.UPD_DATE).format("YYYY-MM-DD HH:mm:ss"),id:C}));R(n),A(!1)}else R([]),A(!1)}).catch(s=>{console.log(s)})},he=()=>{A(!0),S("codeinfo",{G_NAME:k}).then(e=>{if(e.data.tk_status!=="NG"){const s=e.data.data.map((n,r)=>({...n,id:r}));G(s),A(!1),d.fire("Thông báo","Đã load "+e.data.data.length+" dòng","success")}else d.fire("Thông báo","Nội dung: "+e.data.message,"error"),A(!1)}).catch(e=>{console.log(e)})},_e=e=>{e===1?H({...j,trapo:!0,thempohangloat:!1,them1po:!1,them1invoice:!1,testinvoicetable:!1}):e===2?H({...j,trapo:!1,thempohangloat:!0,them1po:!1,them1invoice:!1,testinvoicetable:!1}):e===3&&H({...j,trapo:!1,thempohangloat:!1,them1po:!1,them1invoice:!1,testinvoicetable:!0})},ve=()=>{S("selectcustomerList",{}).then(e=>{e.data.tk_status!=="NG"&&de(e.data.data)}).catch(e=>{console.log(e)})},we=()=>{S("getMaterialList",{}).then(e=>{e.data.tk_status!=="NG"&&D(e.data.data)}).catch(e=>{console.log(e)})},Ye=e=>{S("getcodefullinfo",{G_CODE:e}).then(s=>{if(s.data.tk_status!=="NG"){let n=s.data.data.map((r,C)=>({...r,PROD_TYPE:r.PROD_TYPE.trim(),id:C}));p(n[0])}else d.fire("Thông báo","Nội dung: "+s.data.message,"error"),A(!1)}).catch(s=>{console.log(s)})},Be=e=>{const s=new Set(e);let n=O.filter(r=>s.has(r.id));n.length>0?(Q(n),z||(Le(n[0].G_CODE),pe(n[0].G_CODE)),Ye(n[0].G_CODE)):Q([])},fe=e=>{const s=new Set(e);let n=o.filter(r=>s.has(r.id));n.length>0?F(n):F([])},Ue=e=>{const s=new Set(e);let n=_.filter(r=>s.has(r.id));n.length>0?X(n):X([])},ye=()=>{p({CUST_CD:"0000",PROD_PROJECT:"",PROD_MODEL:"",CODE_12:"7",PROD_TYPE:"TSP",G_NAME_KD:"",DESCR:"",PROD_MAIN_MATERIAL:"",G_NAME:"",G_LENGTH:0,G_WIDTH:0,PD:0,G_C:0,G_C_R:0,G_CG:0,G_LG:0,G_SG_L:0,G_SG_R:0,PACK_DRT:"",KNIFE_TYPE:0,KNIFE_LIFECYCLE:0,KNIFE_PRICE:0,CODE_33:"02",ROLE_EA_QTY:0,RPM:0,PIN_DISTANCE:0,PROCESS_TYPE:"",EQ1:"NO",EQ2:"NO",PROD_DIECUT_STEP:0,PROD_PRINT_TIMES:0,REMK:"",USE_YN:"Y",G_CODE:"",FSC:"N"})},J=()=>{let e=t,s=!0;for(const[n,r]of Object.entries(e))if((r===null||r==="")&&n!=="REMK"&&n!=="FACTORY"&&n!=="Setting1"&&n!=="Setting2"&&n!=="UPH1"&&n!=="UPH2"&&n!=="Step1"&&n!=="Step2"&&n!=="LOSS_SX1"&&n!=="LOSS_SX2"&&n!=="LOSS_SETTING1"&&n!=="LOSS_SETTING2"&&n!=="NOTE"){d.fire("Thông báo","Không được để trống: "+n,"error"),s=!1;break}return s},He=()=>{d.fire({title:"Chắc chắn muốn thêm code mới ?",text:"Thêm rồi mà sai, sửa là hơi vất đấy",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Vẫn thêm!"}).then(e=>{e.isConfirmed&&(d.fire("Tiến hành thêm","Đang thêm Code mới","success"),B(l==null?void 0:l.EMPL_NO,l==null?void 0:l.MAINDEPTNAME,["RND"],Fe))})},ke=()=>{d.fire({title:"Chắc chắn muốn thêm ver mới ?",text:"Thêm rồi mà sai, sửa là hơi vất đấy",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Vẫn thêm!"}).then(e=>{e.isConfirmed&&(d.fire("Tiến hành thêm","Đang thêm Ver mới","success"),B(l==null?void 0:l.EMPL_NO,l==null?void 0:l.MAINDEPTNAME,["RND"],Xe))})},Ke=()=>{d.fire({title:"Chắc chắn muốn update thông tin code ?",text:"Update thông tin code sẽ hủy phê duyệt bản vẽ",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Vẫn update!"}).then(e=>{e.isConfirmed&&(d.fire("Tiến hành Update","Đang update code","success"),B(l==null?void 0:l.EMPL_NO,l==null?void 0:l.MAINDEPTNAME,["RND","QLSX"],Ve))})},L=(e,s)=>String(e).padStart(s,"0"),Qe=async(e,s)=>{let n="",r="";return await S("getNextSEQ_G_CODE",{CODE_12:e,CODE_27:s}).then(C=>{let M=C.data.data[0].LAST_SEQ_NO;C.data.tk_status!=="NG"?e==="9"?(n=L(Number(M)+1,6),r=n):(n=L(Number(M)+1,5)+"A",r=L(Number(M)+1,5)):e==="9"?(n="000001",r=n):(n="00001A",r="00001")}).catch(C=>{console.log(C)}),{NEXT_G_CODE:e+s+n,NEXT_SEQ_NO:r}},Fe=async()=>{if(console.log(J()),J()){let e="C";t.PROD_TYPE.trim()==="TSP"||t.PROD_TYPE.trim()==="OLED"||t.PROD_TYPE.trim()==="UV"?e="C":t.PROD_TYPE.trim()==="LABEL"?e="A":t.PROD_TYPE.trim()==="TAPE"?e="B":t.PROD_TYPE.trim()==="RIBBON"&&(e="E");let s=await await Qe(t.CODE_12,e),n=s.NEXT_G_CODE,r=s.NEXT_SEQ_NO;await S("insertM100",{G_CODE:n,CODE_27:e,NEXT_SEQ_NO:r,CODE_FULL_INFO:t}).then(C=>{C.data.tk_status!=="NG"?d.fire("Thông báo","Code mới: "+n,"success"):d.fire("Thông báo","Lỗi: "+C.data.message,"error")}).catch(C=>{console.log(C)})}},Xe=async()=>{if(J()){let e="C";t.PROD_TYPE.trim()==="TSP"||t.PROD_TYPE.trim()==="OLED"||t.PROD_TYPE.trim()==="UV"?e="C":t.PROD_TYPE.trim()==="LABEL"?e="A":t.PROD_TYPE.trim()==="TAPE"?e="B":t.PROD_TYPE.trim()==="RIBBON"&&(e="E");let s="",n="",r="",C="";t.CODE_12==="9"?(n=L(Number(t.G_CODE.substring(2,8))+1,6),s=t.CODE_12+e+n):(n=t.G_CODE.substring(2,7),r=t.G_CODE.substring(7,8),C=String.fromCharCode(r.charCodeAt(0)+1),s=t.CODE_12+e+n+C),console.log(s),console.log(n),console.log("NEXT REV",C),await S("insertM100_AddVer",{G_CODE:s,CODE_27:e,NEXT_SEQ_NO:n,REV_NO:C,CODE_FULL_INFO:t}).then(M=>{M.data.tk_status!=="NG"?d.fire("Thông báo","Code ver mới: "+s,"success"):d.fire("Thông báo","Lỗi: "+M.data.message,"error")}).catch(M=>{console.log(M)})}},Ve=async()=>{J()&&await S("updateM100",t).then(e=>{e.data.tk_status!=="NG"?d.fire("Thông báo","Update thành công: "+t.G_CODE,"success"):d.fire("Thông báo","Lỗi: "+e.data.message,"error")}).catch(e=>{console.log(e)})},We=e=>{e.key==="Enter"&&he()},ze=async()=>{if(P.length>0){let e={id:x().format("YYYY-MM-DD HH:mm:ss.SSS"),G_CODE:t.G_CODE,G_NAME:t==null?void 0:t.G_NAME,G_NAME_KD:t==null?void 0:t.G_NAME_KD,RIV_NO:"A",M_CODE:m==null?void 0:m.M_CODE,M_NAME:m==null?void 0:m.M_NAME,WIDTH_CD:m==null?void 0:m.WIDTH_CD,M_QTY:1,MAIN_M:"0",LIEUQL_SX:0,INS_EMPL:l==null?void 0:l.EMPL_NO,INS_DATE:x().format("YYYY-MM-DD HH:mm:ss.SSS"),UPD_EMPL:l==null?void 0:l.EMPL_NO,UPD_DATE:x().format("YYYY-MM-DD HH:mm:ss.SSS")};w([...o,e])}else d.fire("Thông báo","Chọn 1 code trong list để thêm liệu","warning")},qe=()=>{if(y.length>0){let e=[...o];for(let s=0;s<y.length;s++)for(let n=0;n<e.length;n++)y[s].id===e[n].id&&e.splice(n,1);w(e)}else d.fire("Thông báo","Chọn ít nhất một dòng để xóa","error")},$e=async()=>{if(_.length>0)if(o.length>0){let e="0",s=0,n=0,r=1,C=0,M="";for(let c=0;c<o.length;c++)s+=o[c].LIEUQL_SX,o[c].LIEUQL_SX>1&&(C+=1);for(let c=0;c<o.length;c++)if(parseInt(o[c].LIEUQL_SX.toString())===1)for(let h=0;h<o.length;h++)o[h].M_NAME===o[c].M_NAME&&parseInt(o[h].LIEUQL_SX.toString())===0&&(n+=1);for(let c=0;c<o.length;c++)if(parseInt(o[c].LIEUQL_SX.toString())===1)for(let h=0;h<o.length;h++)parseInt(o[h].LIEUQL_SX.toString())===1&&o[c].M_NAME!==o[h].M_NAME&&(r=2);for(let c=0;c<o.length-1;c++)M+=`'${o[c].M_CODE}',`;if(M+=`'${o[o.length-1].M_CODE}'`,console.log("m_list",M),s>0&&n===0&&r===1&&C===0||(e+=" | Check lại liệu quản lý (liệu chính)"),e==="0"){await S("deleteM140_2",{G_CODE:t.G_CODE,M_LIST:M}).then(h=>{h.data.tk_status}).catch(h=>{console.log(h)});let c="001";await S("checkGSEQ_M140",{G_CODE:t.G_CODE}).then(h=>{h.data.tk_status!=="NG"?c=h.data.data[0].MAX_G_SEQ:c="001"}).catch(h=>{console.log(h)});for(let h=0;h<o.length;h++){let Y=!1;await S("check_m_code_m140",{G_CODE:t.G_CODE,M_CODE:o[h].M_CODE}).then(I=>{I.data.tk_status!=="NG"?Y=!0:Y=!1}).catch(I=>{console.log(I)}),Y?await S("update_M140",{G_CODE:t.G_CODE,M_CODE:o[h].M_CODE,M_QTY:o[h].M_QTY,MAIN_M:o[h].MAIN_M===null?"0":o[h].MAIN_M,LIEUQL_SX:o[h].LIEUQL_SX===null?"0":o[h].LIEUQL_SX}).then(I=>{I.data.tk_status}).catch(I=>{console.log(I)}):await S("insertM140",{G_CODE:t.G_CODE,G_SEQ:L(parseInt(c)+h+1,3),M_CODE:o[h].M_CODE,M_QTY:o[h].M_QTY,MAIN_M:o[h].MAIN_M===null?"0":o[h].MAIN_M,LIEUQL_SX:o[h].LIEUQL_SX===null?"0":o[h].LIEUQL_SX}).then(I=>{I.data.tk_status}).catch(I=>{console.log(I)})}}else d.fire("Thông báo",""+e,"error")}else d.fire("Thông báo","Thêm ít nhất 1 liệu để lưu BOM","warning");else d.fire("Thông báo","Code chưa có BOM giá, phải thêm BOM giá trước","warning")},Je=async()=>{if(o.length<=0)if(_.length>0){await S("deleteM140",{G_CODE:t.G_CODE}).then(e=>{e.data.tk_status}).catch(e=>{console.log(e)});for(let e=0;e<_.length;e++)await S("insertM140",{G_CODE:t.G_CODE,G_SEQ:L(e+1,3),M_CODE:_[e].M_CODE,M_QTY:_[e].M_QTY,MAIN_M:_[e].MAIN_M}).then(s=>{s.data.tk_status}).catch(s=>{console.log(s)})}else d.fire("Thông báo","Thêm ít nhất 1 liệu để lưu BOM","warning");else d.fire("Thông báo","Code đã có BOM SX, Sẽ chỉ lưu lại bom giá mà ko lưu thêm BOM SX nữa","warning")},Ze=async()=>{if(P.length>0){let e={M_ID:564,M_NAME:"OS75-006WP",CUST_CD:"C-TECH",SSPRICE:1.3,CMSPRICE:1.234545455,SLITTING_PRICE:.054545455,MASTER_WIDTH:1080,ROLL_LENGTH:1e3};await S("checkMaterialInfo",{M_NAME:m==null?void 0:m.M_NAME}).then(n=>{n.data.tk_status!=="NG"&&(e=n.data.data[0])}).catch(n=>{console.log(n)});let s={id:x().format("YYYY-MM-DD HH:mm:ss.SSS"),BOM_ID:x().format("YYYY-MM-DD HH:mm:ss.SSS"),G_CODE:t.G_CODE,RIV_NO:"A",G_SEQ:L(_.length+1,3),CATEGORY:1,M_CODE:m==null?void 0:m.M_CODE,M_NAME:m==null?void 0:m.M_NAME,CUST_CD:e.CUST_CD,IMPORT_CAT:"",M_CMS_PRICE:e.CMSPRICE,M_SS_PRICE:e.SSPRICE,M_SLITTING_PRICE:e.SLITTING_PRICE,USAGE:"",MAIN_M:"0",MAT_MASTER_WIDTH:e.MASTER_WIDTH,MAT_CUTWIDTH:m==null?void 0:m.WIDTH_CD,MAT_ROLL_LENGTH:e.ROLL_LENGTH,MAT_THICKNESS:0,M_QTY:1,REMARK:"",PROCESS_ORDER:_.length+1,INS_EMPL:l==null?void 0:l.EMPL_NO,INS_DATE:x().format("YYYY-MM-DD HH:mm:ss.SSS"),UPD_EMPL:l==null?void 0:l.EMPL_NO,UPD_DATE:x().format("YYYY-MM-DD HH:mm:ss.SSS")};R([..._,s])}else d.fire("Thông báo","Chọn 1 code trong list để thêm liệu","warning")},et=()=>{if(b.length>0){let e=[..._];for(let s=0;s<b.length;s++)for(let n=0;n<e.length;n++)b[s].id===e[n].id&&e.splice(n,1);R(e)}else d.fire("Thông báo","Chọn ít nhất một dòng để xóa","error")},tt=async()=>{if(_.length>0){let e="0",s=0;for(let n=0;n<_.length;n++)s+=parseInt(_[n].MAIN_M),(_[n].CUST_CD===""||_[n].USAGE===""||_[n].MAT_MASTER_WIDTH===0||_[n].MAT_ROLL_LENGTH===0)&&(e="Không được để ô nào NG màu đỏ");if(console.log(s),s===0&&(e+="| Phải chỉ định liệu quản lý"),e==="0"){console.log("vao bom gia insert"),await S("deleteBOM2",{G_CODE:t.G_CODE}).then(n=>{n.data.tk_status}).catch(n=>{console.log(n)});for(let n=0;n<_.length;n++)await S("insertBOM2",{G_CODE:t.G_CODE,G_SEQ:L(n+1,3),M_CODE:_[n].M_CODE,M_NAME:_[n].M_NAME,CUST_CD:_[n].CUST_CD,USAGE:_[n].USAGE,MAIN_M:_[n].MAIN_M,MAT_MASTER_WIDTH:_[n].MAT_MASTER_WIDTH,MAT_CUTWIDTH:_[n].MAT_CUTWIDTH,MAT_ROLL_LENGTH:_[n].MAT_ROLL_LENGTH,MAT_THICKNESS:_[n].MAT_THICKNESS,M_QTY:_[n].M_QTY,PROCESS_ORDER:_[n].PROCESS_ORDER,REMARK:_[n].REMARK}).then(r=>{r.data.tk_status}).catch(r=>{console.log(r)});Je()}else d.fire("Thông báo",e,"error")}else d.fire("Thông báo","Thêm ít nhất 1 liệu để lưu BOM","warning")},at=async()=>{var e,s,n,r,C;if(o.length>0){let M=[];for(let c=0;c<o.length;c++){let h={id:x().format("YYYY-MM-DD HH:mm:ss.SSS")+((e=o[c])==null?void 0:e.M_CODE),BOM_ID:x().format("YYYY-MM-DD HH:mm:ss.SSS")+((s=o[c])==null?void 0:s.M_CODE),G_CODE:t.G_CODE,RIV_NO:"A",G_SEQ:L(_.length+1,3),CATEGORY:1,M_CODE:(n=o[c])==null?void 0:n.M_CODE,M_NAME:(r=o[c])==null?void 0:r.M_NAME,CUST_CD:"",IMPORT_CAT:"",M_CMS_PRICE:0,M_SS_PRICE:0,M_SLITTING_PRICE:0,USAGE:"",MAIN_M:"0",MAT_MASTER_WIDTH:0,MAT_CUTWIDTH:(C=o[c])==null?void 0:C.WIDTH_CD,MAT_ROLL_LENGTH:0,MAT_THICKNESS:0,M_QTY:1,REMARK:"",PROCESS_ORDER:c+1,INS_EMPL:l==null?void 0:l.EMPL_NO,INS_DATE:x().format("YYYY-MM-DD HH:mm:ss.SSS"),UPD_EMPL:l==null?void 0:l.EMPL_NO,UPD_DATE:x().format("YYYY-MM-DD HH:mm:ss.SSS")};M=[...M,h]}R(M)}else d.fire("Thông báo","Không có BOM SX để Clone sang","error")},nt=()=>{d.fire({title:"Chắc chắn muốn Clone BOM SX ?",text:"Clone BOM Sản xuất",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Vẫn Clone!"}).then(e=>{e.isConfirmed&&(d.fire("Tiến hành Clone BOM SX","Đang Clone BOM","success"),at())})},st=()=>{d.fire({title:"Chắc chắn muốn lưu BOM SX ?",text:"Lưu BOM Sản xuất",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Vẫn lưu!"}).then(e=>{e.isConfirmed&&(d.fire("Tiến hành Lưu BOM SX","Đang lưu BOM","success"),B(l==null?void 0:l.EMPL_NO,l==null?void 0:l.MAINDEPTNAME,["RND","QLSX"],$e))})},lt=()=>{d.fire({title:"Chắc chắn muốn lưu BOM GIÁ ?",text:"Lưu BOM GIÁ",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Vẫn lưu!"}).then(e=>{e.isConfirmed&&(d.fire("Tiến hành Lưu BOM GIÁ","Đang lưu BOM","success"),B(l==null?void 0:l.EMPL_NO,l==null?void 0:l.MAINDEPTNAME,["RND","QLSX"],tt))})},it=()=>{d.fire({title:"Chắc chắn muốn RESET các bản vẽ đã chọn ?",text:"RESET bản vẽ",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Vẫn reset!"}).then(e=>{e.isConfirmed&&(d.fire("Tiến RESET Bản vẽ","Đang Reset bản vẽ","success"),Ge("N"))})},Ee=St({matchFrom:"any",limit:100});return T.useEffect(()=>{we(),ve()},[]),a.jsxs("div",{className:"bom_manager",children:[a.jsxs("div",{className:"mininavbar",children:[a.jsx("div",{className:"mininavitem",onClick:()=>_e(1),style:{backgroundColor:j.trapo===!0?"#02c712":"#abc9ae",color:(j.trapo===!0,"yellow")},children:a.jsx("span",{className:"mininavtext",children:"Thông tin code"})}),a.jsx("div",{className:"mininavitem",onClick:()=>B(l==null?void 0:l.EMPL_NO,l==null?void 0:l.MAINDEPTNAME,["KD","RND"],()=>{_e(2)}),style:{backgroundColor:j.thempohangloat===!0?"#02c712":"#abc9ae",color:(j.thempohangloat===!0,"yellow")},children:a.jsx("span",{className:"mininavtext",children:"Quản lý Liệu"})})]}),j.trapo&&a.jsxs("div",{className:"bom_manager_wrapper",children:[a.jsxs("div",{className:"left",children:[a.jsxs("div",{className:"bom_manager_button",children:[a.jsxs("div",{className:"buttonrow1",children:[a.jsxs(g,{className:"buttonIcon",onClick:()=>{He()},children:[a.jsx(dt,{color:"#3366ff",size:25}),"ADD"]}),a.jsxs(g,{className:"buttonIcon",onClick:()=>{Ke()},children:[a.jsx(ct,{color:"#ffff00",size:25}),"UPDATE"]})]}),a.jsxs("div",{className:"buttonrow2",children:[a.jsxs(g,{className:"buttonIcon",onClick:()=>{ke()},children:[a.jsx(ht,{color:"#cc33ff",size:25}),"ADD VER"]}),a.jsxs(g,{className:"buttonIcon",onClick:()=>{ye()},children:[a.jsx(_t,{color:"red",size:25}),"Clear"]})]})]}),a.jsx("div",{className:"codemanager",children:a.jsxs("div",{className:"tracuuFcst",children:[a.jsx("div",{className:"tracuuFcstform",children:a.jsx("div",{className:"forminput",children:a.jsxs("div",{className:"forminputcolumn",children:[a.jsxs("label",{children:[a.jsx("b",{children:"Code:"})," ",a.jsx("input",{type:"text",placeholder:"Nhập code vào đây",value:k,onChange:e=>le(e.target.value),onKeyDown:e=>{We(e)}})]}),a.jsx("button",{className:"traxuatkiembutton",onClick:()=>{he()},children:"Tìm code"})]})})}),a.jsx("div",{className:"codeinfotable",children:a.jsx(ae,{components:{Toolbar:Pe,LoadingOverlay:Z},sx:{fontSize:12},loading:v,rowHeight:30,rows:O,columns:be,onSelectionModelChange:e=>{Be(e)},rowsPerPageOptions:[5,10,50,100,500,1e3,5e3,1e4,1e5],editMode:"cell",onCellEditCommit:(e,s,n)=>{let r=K;r.push(e),ie(r);const C=e.field,M=O.map(c=>c.id===e.id?{...c,[C]:e.value}:c);G(M)}})})]})})]}),a.jsxs("div",{className:"right",children:[a.jsxs("div",{className:"codeinfobig",children:[a.jsxs("div",{className:"biginfocms",children:[" ",(Ce=P[0])==null?void 0:Ce.G_CODE,":"," "]}),a.jsxs("div",{className:"biginfokd",children:[" ",(Ne=P[0])==null?void 0:Ne.G_NAME]})]}),a.jsx("div",{className:"down",children:a.jsxs("div",{className:"codeinfo",children:[a.jsxs("div",{className:"info12",children:[a.jsxs("div",{className:"info1",children:[a.jsxs("label",{children:["Khách hàng:",a.jsx("select",{disabled:i,name:"khachhang",value:(t==null?void 0:t.CUST_CD)===null?"":t==null?void 0:t.CUST_CD,onChange:e=>{N("CUST_CD",e.target.value)},children:f.map((e,s)=>a.jsx("option",{value:e.CUST_CD,children:e.CUST_NAME_KD},s))})]}),a.jsxs("label",{children:["Dự án/Project:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.PROD_PROJECT)===null?"":t==null?void 0:t.PROD_PROJECT,onChange:e=>{N("PROD_PROJECT",e.target.value)}})]}),a.jsxs("label",{children:["Model:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.PROD_MODEL)===null?"":t==null?void 0:t.PROD_MODEL,onChange:e=>{N("PROD_MODEL",e.target.value)}})]}),a.jsxs("label",{children:["Đặc tính sản phẩm:",a.jsxs("select",{disabled:i,name:"dactinhsanpham",value:(t==null?void 0:t.CODE_12)===null?"":t==null?void 0:t.CODE_12,onChange:e=>{N("CODE_12",e.target.value)},children:[a.jsx("option",{value:6,children:"Bán Thành Phẩm"}),a.jsx("option",{value:7,children:"Thành Phẩm"}),a.jsx("option",{value:8,children:"Nguyên Chiếc Không Ribbon"}),a.jsx("option",{value:9,children:"Nguyên Chiếc Ribbon"})]})]}),a.jsxs("label",{children:["Phân loại sản phẩm:",a.jsxs("select",{disabled:i,name:"phanloaisanpham",value:(t==null?void 0:t.PROD_TYPE)===null?"C":t==null?void 0:t.PROD_TYPE,onChange:e=>{N("PROD_TYPE",e.target.value)},children:[a.jsx("option",{value:"TSP",children:"TSP"}),a.jsx("option",{value:"OLED",children:"OLED"}),a.jsx("option",{value:"UV",children:"UV"}),a.jsx("option",{value:"TAPE",children:"TAPE"}),a.jsx("option",{value:"LABEL",children:"LABEL"}),a.jsx("option",{value:"RIBBON",children:"RIBBON"}),a.jsx("option",{value:"SPT",children:"SPT"})]})]}),a.jsxs("label",{children:["Code KD:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.G_NAME_KD)===null?"":t==null?void 0:t.G_NAME_KD,onChange:e=>{N("G_NAME_KD",e.target.value)}})]}),a.jsxs("label",{children:["Mô tả/Spec:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.DESCR)===null?"":t==null?void 0:t.DESCR,onChange:e=>{N("DESCR",e.target.value)}})]}),a.jsxs("label",{children:["VL Chính:"," ",a.jsx("input",{disabled:!0,type:"text",value:(t==null?void 0:t.PROD_MAIN_MATERIAL)===null?"":t==null?void 0:t.PROD_MAIN_MATERIAL,onChange:e=>{N("PROD_MAIN_MATERIAL",e.target.value)}})]}),a.jsxs("label",{children:["Code RnD:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.G_NAME)===null?"":t==null?void 0:t.G_NAME,onChange:e=>{N("G_NAME",e.target.value)}})]})]}),a.jsxs("div",{className:"info2",children:[a.jsxs("label",{children:["Chiều dài sp(Length):"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.G_LENGTH)===null?"":t==null?void 0:t.G_LENGTH,onChange:e=>{N("G_LENGTH",e.target.value)}})]}),a.jsxs("label",{children:["Chiều rộng sp(Width):"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.G_WIDTH)===null?"":t==null?void 0:t.G_WIDTH,onChange:e=>{N("G_WIDTH",e.target.value)}})]}),a.jsxs("label",{children:["P/D:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.PD)===null?"":t==null?void 0:t.PD,onChange:e=>{N("PD",e.target.value)}})]}),a.jsxs("label",{children:["Cavity hàng:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.G_C_R)===null?"":t==null?void 0:t.G_C_R,onChange:e=>{N("G_C_R",e.target.value)}})]}),a.jsxs("label",{children:["Cavity cột:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.G_C)===null?"":t==null?void 0:t.G_C,onChange:e=>{N("G_C",e.target.value)}})]}),a.jsxs("label",{children:["K/c hàng:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.G_LG)===null?"":t==null?void 0:t.G_LG,onChange:e=>{N("G_LG",e.target.value)}})]}),a.jsxs("label",{children:["K/c cột:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.G_CG)===null?"":t==null?void 0:t.G_CG,onChange:e=>{N("G_CG",e.target.value)}})]}),a.jsxs("label",{children:["K/c tới liner trái:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.G_SG_L)===null?"":t==null?void 0:t.G_SG_L,onChange:e=>{N("G_SG_L",e.target.value)}})]}),a.jsxs("label",{children:["K/c tới liner phải:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.G_SG_R)===null?"":t==null?void 0:t.G_SG_R,onChange:e=>{N("G_SG_R",e.target.value)}})]})]}),a.jsxs("div",{className:"info11",children:[a.jsxs("label",{children:["Hướng mở roll:",a.jsxs("select",{disabled:i,name:"huongmoroll",value:(t==null?void 0:t.PACK_DRT)===null?"":t==null?void 0:t.PACK_DRT,onChange:e=>{N("PACK_DRT",e.target.value)},children:[a.jsx("option",{value:"1",children:"FORWARD"}),a.jsx("option",{value:"0",children:"REVERSE"})]})]}),a.jsxs("label",{children:["Loại dao:",a.jsxs("select",{disabled:i,name:"loaidao",value:(t==null?void 0:t.KNIFE_TYPE)===null?"":t==null?void 0:t.KNIFE_TYPE,onChange:e=>{N("KNIFE_TYPE",e.target.value)},children:[a.jsx("option",{value:0,children:"PVC"}),a.jsx("option",{value:1,children:"PINACLE"}),a.jsx("option",{value:2,children:"NO"})]})]}),a.jsxs("label",{children:["Tuổi dao (Số dập):"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.KNIFE_LIFECYCLE)===null?"":t==null?void 0:t.KNIFE_LIFECYCLE,onChange:e=>{N("KNIFE_LIFECYCLE",e.target.value)}})]}),a.jsxs("label",{children:["Đơn giá dao:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.KNIFE_PRICE)===null?"":t==null?void 0:t.KNIFE_PRICE,onChange:e=>{N("KNIFE_PRICE",e.target.value)}})]}),a.jsxs("label",{children:["Packing Type:",a.jsxs("select",{disabled:i,name:"packingtype",value:(t==null?void 0:t.CODE_33)===null?"":t==null?void 0:t.CODE_33,onChange:e=>{N("CODE_33",e.target.value)},children:[a.jsx("option",{value:"02",children:"ROLL"}),a.jsx("option",{value:"03",children:"SHEET"})]})]}),a.jsxs("label",{children:["Packing QTY:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.ROLE_EA_QTY)===null?"":t==null?void 0:t.ROLE_EA_QTY,onChange:e=>{N("ROLE_EA_QTY",e.target.value)}})]}),a.jsxs("label",{children:["RPM:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.RPM)===null?"":t==null?void 0:t.RPM,onChange:e=>{N("RPM",e.target.value)}})]}),a.jsxs("label",{children:["PIN DISTANCE:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.PIN_DISTANCE)===null?"":t==null?void 0:t.PIN_DISTANCE,onChange:e=>{N("PIN_DISTANCE",e.target.value)}})]}),a.jsxs("label",{children:["PROCESS TYPE:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.PROCESS_TYPE)===null?"":t==null?void 0:t.PROCESS_TYPE,onChange:e=>{N("PROCESS_TYPE",e.target.value)}})]})]}),a.jsxs("div",{className:"info22",children:[a.jsxs("label",{children:["Máy 1:",a.jsxs("select",{disabled:i,name:"may1",value:(t==null?void 0:t.EQ1)===null||(t==null?void 0:t.EQ1)===""?"NA":t==null?void 0:t.EQ1,onChange:e=>{N("EQ1",e.target.value)},children:[a.jsx("option",{value:"FR",children:"FR"}),a.jsx("option",{value:"SR",children:"SR"}),a.jsx("option",{value:"DC",children:"DC"}),a.jsx("option",{value:"ED",children:"ED"}),a.jsx("option",{value:"NO",children:"NO"}),a.jsx("option",{value:"NA",children:"NA"})]})]}),a.jsxs("label",{children:["Máy 2:",a.jsxs("select",{disabled:i,name:"may2",value:(t==null?void 0:t.EQ2)===null||(t==null?void 0:t.EQ2)===""?"NA":t==null?void 0:t.EQ2,onChange:e=>{N("EQ2",e.target.value)},children:[a.jsx("option",{value:"FR",children:"FR"}),a.jsx("option",{value:"SR",children:"SR"}),a.jsx("option",{value:"DC",children:"DC"}),a.jsx("option",{value:"ED",children:"ED"}),a.jsx("option",{value:"NO",children:"NO"}),a.jsx("option",{value:"NA",children:"NA"})]})]}),a.jsxs("label",{children:["Số bước (dao):"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.PROD_DIECUT_STEP)===null?"":t==null?void 0:t.PROD_DIECUT_STEP,onChange:e=>{N("PROD_DIECUT_STEP",e.target.value)}})]}),a.jsxs("label",{children:["Số lần in:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.PROD_PRINT_TIMES)===null?"":t==null?void 0:t.PROD_PRINT_TIMES,onChange:e=>{N("PROD_PRINT_TIMES",e.target.value)}})]}),a.jsxs("label",{children:["PO TYPE:",a.jsxs("select",{disabled:i,name:"may1",value:(t==null?void 0:t.PO_TYPE)===null||(t==null?void 0:t.PO_TYPE)===""?"NA":t==null?void 0:t.PO_TYPE,onChange:e=>{N("PO_TYPE",e.target.value)},children:[a.jsx("option",{value:"E1",children:"E1"}),a.jsx("option",{value:"E2",children:"E2"})]})]}),a.jsxs("label",{children:["FSC:",a.jsxs("select",{disabled:i,name:"may1",value:(t==null?void 0:t.FSC)===null||(t==null?void 0:t.FSC)===""?"NA":t==null?void 0:t.FSC,onChange:e=>{N("FSC",e.target.value)},children:[a.jsx("option",{value:"Y",children:"YES"}),a.jsx("option",{value:"N",children:"NO"})]})]}),a.jsxs("label",{children:["Remark:"," ",a.jsx("input",{disabled:i,type:"text",value:(t==null?void 0:t.REMK)===null?"":t==null?void 0:t.REMK,onChange:e=>{N("REMK",e.target.value)}})]}),a.jsx(Mt,{disabled:i,label:"Mở/Khóa",control:a.jsx(mt,{checked:(t==null?void 0:t.USE_YN)==="Y",onChange:e=>{N("USE_YN",e.target.checked===!0?"Y":"N")},inputProps:{"aria-label":"controlled"}})}),a.jsx("label",{children:a.jsx(Se,{sx:{height:10,margin:"1px",position:"initial"},disabled:i,size:"small",disablePortal:!0,options:U,className:"autocomplete",filterOptions:Ee,isOptionEqualToValue:(e,s)=>e.M_CODE===s.M_CODE,getOptionLabel:e=>`${e.M_NAME}|${e.WIDTH_CD}|${e.M_CODE}`,renderInput:e=>a.jsx(ue,{...e,label:"Select Main Material"}),defaultValue:{M_CODE:"A0007770",M_NAME:"SJ-203020HC",WIDTH_CD:208},value:m,onChange:(e,s)=>{console.log(s),N("PROD_MAIN_MATERIAL",s===null?"":s.M_NAME)}})})]})]}),a.jsxs("div",{className:"info34",children:[a.jsx("div",{className:"info3"}),a.jsx("div",{className:"info4"})]})]})}),a.jsx("div",{className:"materiallist",children:a.jsx(Se,{disabled:q[0].editable||$[0].editable,size:"small",disablePortal:!0,options:U,className:"autocomplete",filterOptions:Ee,isOptionEqualToValue:(e,s)=>e.M_CODE===s.M_CODE,getOptionLabel:e=>`${e.M_NAME}|${e.WIDTH_CD}|${e.M_CODE}`,renderInput:e=>a.jsx(ue,{...e,label:"Select material"}),defaultValue:{M_CODE:"A0007770",M_NAME:"SJ-203020HC",WIDTH_CD:208},value:m,onChange:(e,s)=>{console.log(s),V(s)}})}),a.jsxs("div",{className:"up",children:[a.jsx("div",{className:"bomsx",children:a.jsxs("div",{className:"bomsxtable",children:[a.jsxs("span",{style:{fontSize:16,fontWeight:"bold",marginLeft:10},children:["BOM SẢN XUẤT (",q[0].editable?"Bật Sửa":"Tắt Sửa",")"," ",z?"(Đang ghim BOM)":""]}),a.jsx(ae,{components:{Toolbar:Re,LoadingOverlay:Z},sx:{fontSize:12},loading:v,rowHeight:30,rows:o,columns:q,checkboxSelection:!0,onSelectionModelChange:e=>{fe(e)},rowsPerPageOptions:[5,10,50,100,500,1e3,5e3,1e4,1e5],editMode:"cell",onCellEditCommit:(e,s,n)=>{let r=K;r.push(e),De(r);const C=e.field,M=o.map(c=>c.id===e.id?{...c,[C]:e.value}:c);w(M)}})]})}),a.jsx("div",{className:"bomgia",children:a.jsxs("div",{className:"bomgiatable",children:[a.jsxs("span",{style:{fontSize:16,fontWeight:"bold",marginLeft:10},children:["BOM GIÁ(",$[0].editable?"Bật Sửa":"Tắt Sửa",")",z?"(Đang ghim BOM)":""]}),a.jsx(ae,{components:{Toolbar:je,LoadingOverlay:Z},sx:{fontSize:12},loading:v,rowHeight:30,rows:_,columns:$,checkboxSelection:!0,onSelectionModelChange:e=>{Ue(e)},rowsPerPageOptions:[5,10,50,100,500,1e3,5e3,1e4,1e5],editMode:"cell",onCellEditCommit:(e,s,n)=>{let r=K;r.push(e),Oe(r);const C=e.field,M=_.map(c=>c.id===e.id?{...c,[C]:e.value}:c);R(M)}})]})})]}),a.jsx("div",{className:"bottom"})]})]}),j.thempohangloat&&a.jsx("div",{className:"quanlylieu",children:a.jsx(ut,{})})]})};export{jt as default};
