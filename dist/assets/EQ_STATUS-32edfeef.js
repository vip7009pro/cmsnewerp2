import{ai as C,r as M,j as r,ad as T}from"./index-4ab6dde0.js";import{T as b}from"./TextField-db9fe3d0.js";const _=t=>{var h,g,E;const u="#2fd5eb",l="#8ce9f5",o="white",a="black";var s=C(),c=C.utc(t.upd_time).format("YYYY-MM-DD HH:mm:ss"),S=s.diff(c,"minutes");const[x,N]=M.useState(!1);let d=!1;return t.current_g_name!==void 0&&t.search_string!==void 0&&t.current_g_name!==null&&t.search_string!==null&&(t.search_string===""||t.current_g_name===null?d=!0:d=t.current_g_name.toLowerCase().includes(t.search_string.toLowerCase())),r.jsxs("div",{className:"mc2",style:{WebkitFilter:t.current_g_name===null||d===!0?"none":"blur(5px)"},children:[t.eq_status==="STOP"&&t.upd_empl!==""&&r.jsxs("div",{className:"downtime",style:{fontSize:11},children:["  Stop: ",S," min"]}),t.eq_status==="SETTING"&&t.upd_empl!==""&&r.jsxs("div",{className:"downtime",style:{fontSize:11},children:["  Setting: ",S," min"]}),t.eq_status==="MASS"&&t.upd_empl!==""&&r.jsxs("div",{className:"downtime",style:{fontSize:11},children:["  Run: ",S," min"]}),r.jsxs("div",{className:"machine_component2",style:{backgroundImage:`linear-gradient(to right, ${t.run_stop===1?u:o}, ${t.run_stop===1?l:a})`,borderBottom:`${((h=t.machine_name)==null?void 0:h.slice(0,2))==="FR"?"5px solid black":((g=t.machine_name)==null?void 0:g.slice(0,2))==="SR"?"5px solid #fa0cf2":((E=t.machine_name)==null?void 0:E.slice(0,2))==="DC"?"5px solid blue":"5px solid #faa30c"}`,borderRadius:"4px"},onDoubleClick:t.onClick,onMouseEnter:()=>{N(!0)},onMouseLeave:()=>{N(!1)},children:[r.jsx("div",{className:"tieude",style:{backgroundColor:`${d?t.eq_status==="STOP"?"red":t.eq_status==="SETTING"?"yellow":"#3ff258":"black"}`},children:r.jsxs("div",{className:"eqname",style:{color:`${t.eq_status==="STOP"?"white":(t.eq_status==="SETTING","black")}`},children:[t.machine_name==="ED36"&&t.factory==="NM2"?"ED36(SP01)":t.machine_name,d&&t.eq_status==="MASS"&&r.jsx("img",{alt:"running",src:"/blink.gif",width:40,height:20}),d&&t.eq_status==="SETTING"&&r.jsx("img",{alt:"running",src:"/setting3.gif",width:30,height:30})]})}),r.jsxs("div",{className:"machineplan",children:[t.current_g_name," STEP: B",t.current_step]})]}),x&&r.jsx("div",{className:"chitiet"})]})};const P=({EQ_DATA:t})=>{const u=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="FR"}).length,l=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="SR"}).length,o=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="DC"}).length,a=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="ED"}).length,s=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="FR"&&n.EQ_STATUS==="STOP"}).length,c=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="SR"&&n.EQ_STATUS==="STOP"}).length,S=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="DC"&&n.EQ_STATUS==="STOP"}).length,x=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="ED"&&n.EQ_STATUS==="STOP"}).length,N=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="FR"&&n.EQ_STATUS==="SETTING"}).length,d=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="SR"&&n.EQ_STATUS==="SETTING"}).length,h=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="DC"&&n.EQ_STATUS==="SETTING"}).length,g=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="ED"&&n.EQ_STATUS==="SETTING"}).length,E=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="FR"&&n.EQ_STATUS==="MASS"}).length,p=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="SR"&&n.EQ_STATUS==="MASS"}).length,f=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="DC"&&n.EQ_STATUS==="MASS"}).length,R=t==null?void 0:t.filter((n,e)=>{var i;return((i=n.EQ_NAME)==null?void 0:i.substring(0,2))==="ED"&&n.EQ_STATUS==="MASS"}).length,j=n=>`${(n*100).toFixed(0)}%`;return r.jsx("div",{className:"eq_summary",children:r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("td",{children:"Machine"}),r.jsx("td",{children:"TOTAL"}),r.jsx("td",{children:"STOP"}),r.jsx("td",{children:"SETTING"}),r.jsx("td",{children:"RUNNING"}),r.jsx("td",{children:"OPERATION RATE"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"FR"}),r.jsx("td",{children:u}),r.jsx("td",{children:s}),r.jsx("td",{children:N}),r.jsx("td",{children:E}),r.jsx("td",{children:u!==0?j((E+N)/u):"0%"})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"SR"}),r.jsx("td",{children:l}),r.jsx("td",{children:c}),r.jsx("td",{children:d}),r.jsx("td",{children:p}),r.jsx("td",{children:l!==0?j((p+d)/l):"0%"})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"DC"}),r.jsx("td",{children:o}),r.jsx("td",{children:S}),r.jsx("td",{children:h}),r.jsx("td",{children:f}),r.jsx("td",{children:o!==0?j((f+h)/o):"0%"})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"ED"}),r.jsx("td",{children:a}),r.jsx("td",{children:x}),r.jsx("td",{children:g}),r.jsx("td",{children:R}),r.jsx("td",{children:a!==0?j((R+g)/a):"0%"})]})]})]})})},v=()=>{const[t,u]=M.useState("");M.useState({tab1:!0,tab2:!1,tab3:!1,tabycsx:!1,tabbanve:!1});const[l,o]=M.useState([]),a=()=>{T("checkEQ_STATUS",{}).then(s=>{if(s.data.tk_status!=="NG"){const c=s.data.data.map((S,x)=>({...S,id:x}));o(c)}else o([])}).catch(s=>{console.log(s)})};return M.useEffect(()=>{a();let s=window.setInterval(()=>{a()},3e3);return()=>{window.clearInterval(s)}},[]),r.jsxs("div",{className:"eq_status",children:[r.jsx("div",{className:"searchcode",children:r.jsx(b,{placeholder:"Search Code",value:t,onChange:s=>{u(s.target.value)}})}),r.jsxs("div",{className:"machinelist",children:[r.jsx("div",{className:"eqlist",children:r.jsxs("div",{className:"NM1",children:[r.jsx("span",{className:"machine_title",children:"NM1"}),r.jsx(P,{EQ_DATA:l.filter((s,c)=>s.FACTORY==="NM1")}),r.jsx("div",{className:"FRlist",children:l.filter((s,c)=>s.FACTORY==="NM1"&&s.EQ_NAME.substring(0,2)==="FR").map((s,c)=>r.jsx(_,{search_string:t,factory:s.FACTORY,machine_name:s.EQ_NAME,eq_status:s.EQ_STATUS,current_g_name:s.G_NAME_KD,current_plan_id:s.CURR_PLAN_ID,current_step:s.STEP,run_stop:s.EQ_ACTIVE==="OK"?1:0,upd_time:s.UPD_DATE,upd_empl:s.UPD_EMPL,onClick:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{}},c))}),r.jsx("div",{className:"FRlist",children:l.filter((s,c)=>s.FACTORY==="NM1"&&s.EQ_NAME.substring(0,2)==="SR").map((s,c)=>r.jsx(_,{search_string:t,factory:s.FACTORY,machine_name:s.EQ_NAME,eq_status:s.EQ_STATUS,current_g_name:s.G_NAME_KD,current_step:s.STEP,current_plan_id:s.CURR_PLAN_ID,run_stop:s.EQ_ACTIVE==="OK"?1:0,upd_time:s.UPD_DATE,upd_empl:s.UPD_EMPL,onClick:()=>{}},c))}),r.jsx("div",{className:"FRlist",children:l.filter((s,c)=>s.FACTORY==="NM1"&&s.EQ_NAME.substring(0,2)==="DC").map((s,c)=>r.jsx(_,{search_string:t,factory:s.FACTORY,machine_name:s.EQ_NAME,eq_status:s.EQ_STATUS,current_g_name:s.G_NAME_KD,current_step:s.STEP,current_plan_id:s.CURR_PLAN_ID,run_stop:s.EQ_ACTIVE==="OK"?1:0,upd_time:s.UPD_DATE,upd_empl:s.UPD_EMPL,onClick:()=>{}},c))}),r.jsx("div",{className:"FRlist",children:l.filter((s,c)=>s.FACTORY==="NM1"&&s.EQ_NAME.substring(0,2)==="ED").map((s,c)=>r.jsx(_,{search_string:t,factory:s.FACTORY,machine_name:s.EQ_NAME,eq_status:s.EQ_STATUS,current_g_name:s.G_NAME_KD,current_step:s.STEP,current_plan_id:s.CURR_PLAN_ID,run_stop:s.EQ_ACTIVE==="OK"?1:0,upd_time:s.UPD_DATE,upd_empl:s.UPD_EMPL,onClick:()=>{}},c))})]})}),r.jsx("div",{className:"eqinfo",children:r.jsxs("div",{className:"NM2",children:[r.jsx("span",{className:"machine_title",children:"NM2"}),r.jsx(P,{EQ_DATA:l.filter((s,c)=>s.FACTORY==="NM2")}),r.jsx("div",{className:"FRlist",children:l.filter((s,c)=>s.FACTORY==="NM2"&&s.EQ_NAME.substring(0,2)==="FR").map((s,c)=>r.jsx(_,{search_string:t,factory:s.FACTORY,machine_name:s.EQ_NAME,eq_status:s.EQ_STATUS,current_g_name:s.G_NAME_KD,current_plan_id:s.CURR_PLAN_ID,current_step:s.STEP,run_stop:s.EQ_ACTIVE==="OK"?1:0,upd_time:s.UPD_DATE,upd_empl:s.UPD_EMPL,onClick:()=>{}},c))}),r.jsx("div",{className:"FRlist",children:l.filter((s,c)=>s.FACTORY==="NM2"&&s.EQ_NAME.substring(0,2)==="ED").map((s,c)=>r.jsx(_,{search_string:t,factory:s.FACTORY,machine_name:s.EQ_NAME,eq_status:s.EQ_STATUS,current_g_name:s.G_NAME_KD,current_step:s.STEP,current_plan_id:s.CURR_PLAN_ID,run_stop:s.EQ_ACTIVE==="OK"?1:0,upd_time:s.UPD_DATE,upd_empl:s.UPD_EMPL,onClick:()=>{}},c))})]})})]})]})};export{v as default};
